<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for HTML5 for Linux version 5.6.0">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">
  <title>Recoll user manual</title>
  <link rel="stylesheet" type="text/css" href="docbook-xsl.css">
  <meta name="generator" content=
  "DocBook XSL Stylesheets Vsnapshot">
  <meta name="description" content=
  "Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license can be found at the following location: GNU web site. This document introduces full text search notions and describes the installation and use of the Recoll application. This version describes Recoll 1.37.">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
  <div lang="en" class="book">
    <div class="titlepage">
      <div>
        <div>
          <h1 class="title"><a name="idm1" id="idm1"></a>Руководство пользователя Recoll</h1>
        </div>
        <div>
          <div class="author">
            <h3 class="author"><span class=
            "firstname">Jean-Francois</span> <span class=
            "surname">Dockes</span></h3>
            <div class="affiliation">
              <div class="address">
                <p><code class="email">&lt;<a class="email" href=
                "mailto:jfd@recoll.org">jfd@recoll.org</a>&gt;</code></p>
              </div>
            </div>
          </div>
        </div>
        <div>
          <p class="copyright">Copyright © 2005-2023 Jean-Francois
          Dockes</p>
        </div>
        <div>
          <div class="abstract">
            <p><code class="literal">Разрешается копировать, распространять
            и / или изменять этот документ в соответствии с условиями лицензии
            GNU Free Documentation License, версии 1.3 или любой более поздней
            версии, опубликованной Фондом свободного программного обеспечения
            без каких-либо инвариантных разделов, без добавления текста в начале
            или в конце. Копию этой лицензии можно найти на <a class=
            "ulink" href="https://www.gnu.org/licenses/fdl.html"
            target="_top">веб-сайте GNU</a>.</code></p>
            <p>Настоящий документ содержит описание полнотекстового поиска,
            описывает установку и использование приложения
            <span class="application">Recoll</span>.
            Данная версия содержит описание <span class=
            "application">Recoll</span> 1.37.</p>
          </div>
        </div>
      </div>
      <hr>
    </div>
    <div class="toc">
      <p><b>Оглавление</b></p>
      <dl class="toc">
        <dt><span class="chapter">1. <a href=
        "#RCL.INTRODUCTION">Введение</a></span></dt>
        <dd>
          <dl>
            <dt><span class="sect1">1.1. <a href=
            "#RCL.INTRODUCTION.TRYIT">Пробное
            использование</a></span></dt>
            <dt><span class="sect1">1.2. <a href=
            "#RCL.INTRODUCTION.SEARCH">Полнотекстовый
            поиск</a></span></dt>
            <dt><span class="sect1">1.3. <a href=
            "#RCL.INTRODUCTION.RECOLL">Обзор Recoll
            </a></span></dt>
          </dl>
        </dd>
        <dt><span class="chapter">2. <a href=
        "#RCL.INDEXING">Индексирование</a></span></dt>
        <dd>
          <dl>
            <dt><span class="sect1">2.1. <a href=
            "#RCL.INDEXING.INTRODUCTION">Введение</a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">2.1.1. <a href=
                "#RCL.INDEXING.INTRODUCTION.MODES">Режимы
                индексирования</a></span></dt>
                <dt><span class="sect2">2.1.2. <a href=
                "#RCL.INDEXING.INTRODUCTION.CONFIG">Конфигурации,
                несколько индексов</a></span></dt>
                <dt><span class="sect2">2.1.3. <a href=
                "#idm240">Типы документов</a></span></dt>
                <dt><span class="sect2">2.1.4. <a href=
                "#idm291">Ошибки индексирования</a></span></dt>
                <dt><span class="sect2">2.1.5. <a href=
                "#idm301">Восстановление</a></span></dt>
              </dl>
            </dd>
            <dt><span class="sect1">2.2. <a href=
            "#RCL.INDEXING.STORAGE">Хранение индекса</a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">2.2.1. <a href=
                "#RCL.INDEXING.STORAGE.FORMAT">Форматы индекса <span class=
                "application">Xapian</span>
                </a></span></dt>
                <dt><span class="sect2">2.2.2. <a href=
                "#RCL.INDEXING.STORAGE.SECURITY">Аспекты
                безопасности</a></span></dt>
                <dt><span class="sect2">2.2.3. <a href=
                "#RCL.INDEXING.STORAGE.BIG">Некоторые особенности работы
                с большими индексами</a></span></dt>
              </dl>
            </dd>
            <dt><span class="sect1">2.3. <a href=
            "#RCL.INDEXING.CONFIG">Конфигурация
            индекса</a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">2.3.1. <a href=
                "#RCL.INDEXING.CONFIG.GUI">Графический интерфейс
                настройки конфигурации индекса</a></span></dt>
                <dt><span class="sect2">2.3.2. <a href=
                "#RCL.INDEXING.CONFIG.MULTIPLE">Несколько индексов
                </a></span></dt>
                <dt><span class="sect2">2.3.3. <a href=
                "#RCL.INDEXING.CONFIG.SENS">Чувствительность к регистру
                и диакритическим знакам</a></span></dt>
                <dt><span class="sect2">2.3.4. <a href=
                "#RCL.INDEXING.CONFIG.THREADS">Конфигурирование потоков
                индексирования (<span class=
                "application">Unix</span>-подобные системы)
              </a></span></dt>
              </dl>
            </dd>
            <dt><span class="sect1">2.4. <a href=
            "#RCL.INDEXING.OPERATION">Расписание обновления
            индекса</a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">2.4.1. <a href=
                "#RCL.INDEXING.PERIODIC">Периодичность
                индексирования</a></span></dt>
                <dt><span class="sect2">2.4.2. <a href=
                "#RCL.INDEXING.MONITOR">Индексирование
                в режиме реального времени</a></span></dt>
              </dl>
            </dd>
            <dt><span class="sect1">2.5. <a href=
            "#RCL.INDEXING.NOTES">Прочие заметки
            об индексировании</a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">2.5.1. <a href=
                "#RCL.INDEXING.PDF">Обработчик входных
                файлов PDF</a></span></dt>
                <dt><span class="sect2">2.5.2. <a href=
                "#RCL.INDEXING.OCR">Запуск распознавания символов (OCR)
                на файлах изображений</a></span></dt>
                <dt><span class="sect2">2.5.3. <a href=
                "#RCL.INDEXING.STT">Работа программ распознавания
                речи с аудиофайлами</a></span></dt>
                <dt><span class="sect2">2.5.4. <a href=
                "#RCL.INDEXING.REMOVABLE">Съёмные носители
                </a></span></dt>
                <dt><span class="sect2">2.5.5. <a href=
                "#RCL.INDEXING.WEBQUEUE"><span class=
                "application">Unix</span>-подобные системы: индексирование
                истории веб-поиска</a></span></dt>
                <dt><span class="sect2">2.5.6. <a href=
                "#RCL.INDEXING.EXTATTR"><span class=
                "application">Unix</span>-подобные системы и
                <span class="application">Mac OS</span>-подобные
                системы: использование расширенных атрибутов</a></span></dt>
                <dt><span class="sect2">2.5.7. <a href=
                "#RCL.INDEXING.EXTTAGS"><span class=
                "application">Unix</span>-подобные системы: импорт
                внешних тегов</a></span></dt>
              </dl>
            </dd>
          </dl>
        </dd>
        <dt><span class="chapter">3. <a href=
        "#RCL.SEARCH">Поиск</a></span></dt>
        <dd>
          <dl>
            <dt><span class="sect1">3.1. <a href=
            "#RCL.SEARCH.INTRODUCTION">Введение</a></span></dt>
            <dt><span class="sect1">3.2. <a href=
            "#RCL.SEARCH.GUI">Поиск с помощью графического интерфейса
            пользователя на основе библиотеки Qt</a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">3.2.1. <a href=
                "#RCL.SEARCH.GUI.SIMPLE">Простой поиск
                </a></span></dt>
                <dt><span class="sect2">3.2.2. <a href=
                "#RCL.SEARCH.GUI.RESLIST">Список результатов
                </a></span></dt>
                <dt><span class="sect2">3.2.3. <a href=
                "#RCL.SEARCH.GUI.RESTABLE">Таблица результатов поиска
                </a></span></dt>
                <dt><span class="sect2">3.2.4. <a href=
                "#RCL.SEARCH.GUI.SIDEFILTERS">Панель фильтров
                </a></span></dt>
                <dt><span class="sect2">3.2.5. <a href=
                "#RCL.SEARCH.GUI.RUNSCRIPT">Выполнение произвольных команд
                для обработки файлов из результатов поиска</a></span></dt>
                <dt><span class="sect2">3.2.6. <a href=
                "#RCL.SEARCH.GUI.THUMBNAILS"><span class=
                "application">Unix</span>-подобные системы: отображение
                миниатюр</a></span></dt>
                <dt><span class="sect2">3.2.7. <a href=
                "#RCL.SEARCH.GUI.PREVIEW">Окно просмотра
                </a></span></dt>
                <dt><span class="sect2">3.2.8. <a href=
                "#RCL.SEARCH.GUI.FRAGBUTS">Окно «Фрагменты запроса»
                </a></span></dt>
                <dt><span class="sect2">3.2.9. <a href=
                "#RCL.SEARCH.GUI.COMPLEX">Автоматизированный сложный поиск
                (также называется «Сложным поиском»)</a></span></dt>
                <dt><span class="sect2">3.2.10. <a href=
                "#RCL.SEARCH.GUI.TERMEXPLORER">Инструмент обзора терминов
                </a></span></dt>
                <dt><span class="sect2">3.2.11. <a href=
                "#RCL.SEARCH.GUI.MULTIDB">Несколько индексов
                </a></span></dt>
                <dt><span class="sect2">3.2.12. <a href=
                "#RCL.SEARCH.GUI.HISTORY">История документов
                </a></span></dt>
                <dt><span class="sect2">3.2.13. <a href=
                "#RCL.SEARCH.GUI.SORT">Сортировка результатов поиска
                и устранение дубликатов</a></span></dt>
                <dt><span class="sect2">3.2.14. <a href=
                "#RCL.SEARCH.GUI.SHORTCUTS">Клавиши быстрого доступа
                </a></span></dt>
                <dt><span class="sect2">3.2.15. <a href=
                "#RCL.SEARCH.GUI.TIPS">Советы по поиску</a></span></dt>
                <dt><span class="sect2">3.2.16. <a href=
                "#RCL.SEARCH.SAVING">Сохранение и восстановление запросов
                </a></span></dt>
                <dt><span class="sect2">3.2.17. <a href=
                "#RCL.SEARCH.GUI.CUSTOM">Настройка интерфейса поиска
                </a></span></dt>
              </dl>
            </dd>
            <dt><span class="sect1">3.3. <a href=
            "#RCL.SEARCH.KIO">Поиск с помощью KIO slave в KDE
            </a></span></dt>
            <dt><span class="sect1">3.4. <a href=
            "#RCL.SEARCH.COMMANDLINE">Поиск в командной строке
            </a></span></dt>
            <dt><span class="sect1">3.5. <a href=
            "#RCL.SEARCH.LANG">Язык запросов</a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">3.5.1. <a href=
                "#RCL.SEARCH.LANG.SYNTAX">Базовый синтаксис
                </a></span></dt>
                <dt><span class="sect2">3.5.2. <a href=
                "#RCL.SEARCH.LANG.SPECIALFIELDS">Особые спецификаторы,
                похожие на поля</a></span></dt>
                <dt><span class="sect2">3.5.3. <a href=
                "#RCL.SEARCH.LANG.RANGES">Интервальные выражения
                </a></span></dt>
                <dt><span class="sect2">3.5.4. <a href=
                "#RCL.SEARCH.LANG.MODIFIERS">Модификаторы</a></span></dt>
              </dl>
            </dd>
            <dt><span class="sect1">3.6. <a href=
            "#RCL.SEARCH.ANCHORWILD">Символы подстановки и позиционный поиск
            </a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">3.6.1. <a href=
                "#RCL.SEARCH.WILDCARDS">Символы подстановки</a></span></dt>
                <dt><span class="sect2">3.6.2. <a href=
                "#RCL.SEARCH.ANCHOR">Позиционный поиск
                </a></span></dt>
              </dl>
            </dd>
            <dt><span class="sect1">3.7. <a href=
            "#RCL.SEARCH.SYNONYMS">Использование синонимов
            (1.22)</a></span></dt>
            <dt><span class="sect1">3.8. <a href=
            "#RCL.SEARCH.PTRANS">Корректировка путей</a></span></dt>
            <dt><span class="sect1">3.9. <a href=
            "#RCL.SEARCH.CASEDIAC">Чувствительность к регистру и диакритическим
            знакам при поиске</a></span></dt>
            <dt><span class="sect1">3.10. <a href=
            "#RCL.SEARCH.DESKTOP">Интеграция с рабочим столом
            </a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">3.10.1. <a href=
                "#RCL.SEARCH.SHORTCUT">Сочетания клавиш для
                recoll</a></span></dt>
                <dt><span class="sect2">3.10.2. <a href=
                "#RCL.KICKER-APPLET">Апплет Recoll — KDE Kicker
                </a></span></dt>
              </dl>
            </dd>
          </dl>
        </dd>
        <dt><span class="chapter">4. <a href=
        "#RCL.PROGRAM">Интерфейс программирования</a></span></dt>
        <dd>
          <dl>
            <dt><span class="sect1">4.1. <a href=
            "#RCL.PROGRAM.FILTERS">Написание обработчика ввода документа
            </a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">4.1.1. <a href=
                "#RCL.PROGRAM.FILTERS.SIMPLE">Простые обработчики ввода
                </a></span></dt>
                <dt><span class="sect2">4.1.2. <a href=
                "#RCL.PROGRAM.FILTERS.MULTIPLE">«Модульные» обработчики
                </a></span></dt>
                <dt><span class="sect2">4.1.3. <a href=
                "#RCL.PROGRAM.FILTERS.ASSOCIATION">Установка обработчика в
                <span class="application">Recoll</span>
                </a></span></dt>
                <dt><span class="sect2">4.1.4. <a href=
                "#RCL.PROGRAM.FILTERS.HTML">Вывод обработчика ввода
                </a></span></dt>
                <dt><span class="sect2">4.1.5. <a href=
                "#RCL.PROGRAM.FILTERS.PAGES">Номера страниц
                </a></span></dt>
              </dl>
            </dd>
            <dt><span class="sect1">4.2. <a href=
            "#RCL.PROGRAM.FIELDS">Обработка данных поля
            </a></span></dt>
            <dt><span class="sect1">4.3. <a href=
            "#RCL.PROGRAM.PYTHONAPI">API для Python</a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">4.3.1. <a href=
                "#RCL.PROGRAM.PYTHONAPI.INTRO">Введение</a></span></dt>
                <dt><span class="sect2">4.3.2. <a href=
                "#RCL.PROGRAM.PYTHONAPI.ELEMENTS">Элементы интерфейса
                </a></span></dt>
                <dt><span class="sect2">4.3.3. <a href=
                "#RCL.PROGRAM.PYTHONAPI.LOG">Сообщения журнала
                для сценариев Python</a></span></dt>
                <dt><span class="sect2">4.3.4. <a href=
                "#RCL.PROGRAM.PYTHONAPI.SEARCH">Интерфейс поиска Python
                </a></span></dt>
                <dt><span class="sect2">4.3.5. <a href=
                "#RCL.PROGRAM.PYTHONAPI.UPDATE">Интерфейс индексирования
                на Python</a></span></dt>
              </dl>
            </dd>
          </dl>
        </dd>
        <dt><span class="chapter">5. <a href=
        "#RCL.INSTALL">Установка и настройка конфигурации
        </a></span></dt>
        <dd>
          <dl>
            <dt><span class="sect1">5.1. <a href=
            "#RCL.INSTALL.BINARY">Установка бинарной версии
            </a></span></dt>
            <dt><span class="sect1">5.2. <a href=
            "#RCL.INSTALL.EXTERNAL">Поддерживающие пакеты
            </a></span></dt>
            <dt><span class="sect1">5.3. <a href=
            "#RCL.INSTALL.BUILDING">Сборка из исходного кода
            </a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">5.3.1. <a href=
                "#RCL.INSTALL.BUILDING.PREREQS">Необходимые условия</a></span></dt>
                <dt><span class="sect2">5.3.2. <a href=
                "#RCL.INSTALL.BUILDING.BUILDING">Сборка</a></span></dt>
                <dt><span class="sect2">5.3.3. <a href=
                "#RCL.INSTALL.BUILDING.INSTALL">Установка</a></span></dt>
                <dt><span class="sect2">5.3.4. <a href=
                "#RCL.INSTALL.BUILDING.PYTHON">Пакет API для Python
                </a></span></dt>
              </dl>
            </dd>
            <dt><span class="sect1">5.4. <a href=
            "#RCL.INSTALL.CONFIG">Обзор настройки конфигурации
            </a></span></dt>
            <dd>
              <dl>
                <dt><span class="sect2">5.4.1. <a href=
                "#RCL.INSTALL.CONFIG.ENVIR">Переменные окружения
                </a></span></dt>
                <dt><span class="sect2">5.4.2. <a href=
                "#RCL.INSTALL.CONFIG.RECOLLCONF">Главный конфигурационный файл
                Recoll — recoll.conf</a></span></dt>
                <dt><span class="sect2">5.4.3. <a href=
                "#RCL.INSTALL.CONFIG.FIELDS">Файл fields
                </a></span></dt>
                <dt><span class="sect2">5.4.4. <a href=
                "#RCL.INSTALL.CONFIG.MIMEMAP">Файл mimemap
                </a></span></dt>
                <dt><span class="sect2">5.4.5. <a href=
                "#RCL.INSTALL.CONFIG.MIMECONF">Файл mimeconf
                </a></span></dt>
                <dt><span class="sect2">5.4.6. <a href=
                "#RCL.INSTALL.CONFIG.MIMEVIEW">Файл mimeview
                </a></span></dt>
                <dt><span class="sect2">5.4.7. <a href=
                "#RCL.INSTALL.CONFIG.PTRANS">Файл <code class=
                "filename">ptrans</code></a></span></dt>
                <dt><span class="sect2">5.4.8. <a href=
                "#RCL.INSTALL.CONFIG.EXAMPLES">Примеры настройки
                конфигурации</a></span></dt>
              </dl>
            </dd>
          </dl>
        </dd>
      </dl>
    </div>
    <div class="list-of-tables">
      <p><b>Список таблиц</b></p>
      <dl>
        <dt>3.1. <a href="#idm1656">Клавиши быстрого доступа</a></dt>
      </dl>
    </div>
    <div class="chapter">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a name="RCL.INTRODUCTION" id=
            "RCL.INTRODUCTION"></a>Глава&nbsp;1.&nbsp;Введение</h1>
          </div>
        </div>
      </div>
      <p>Данный документ содержит сведения о полнотекстовом
      поиске, а также описание установки и использования приложения <span class=
      "application">Recoll</span>. Описание включает необходимые
      обновления для версии <span class="application">Recoll</span> 1.37.</p>
      <p><span class="application">Recoll</span> долгое время
      использовался исключительно в Unix-подобных системах и совсем
      недавно (в 2015 г.) был переписан для <span class="application">MS-Windows</span>.
      Многие ссылки в этом руководстве, особенно относящиеся к расположению файлов,
      имеют непосредственно отношение только к Unix и неприменимы к ОС Windows, где
      ряд описываемых функций также недоступен. Руководство
      постоянно обновляется. Однако до полного обновления документации
      в большинство ссылок на общие файлы для ОС Windows необходимо подставлять
      каталог установки Recoll (обычно <code class=
      "filename">C:/Program Files (x86)/Recoll</code>). Особенно это касается
      ссылки на каталог <code class="filename">/usr/share</code> в данном документе,
      которому соответствует подкаталог <code class="filename">Share</code> 
      установочного каталога. Конфигурация пользователя по умолчанию хранится
      в <code class="filename">AppData/Local/Recoll</code> в каталоге пользователя.
      Там же хранится и сам индекс.</p>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INTRODUCTION.TRYIT" id=
              "RCL.INTRODUCTION.TRYIT"></a>1.1.&nbsp;Пробное использование
              </h2>
            </div>
          </div>
        </div>
        <p>Не получая особенного удовольствия от чтения документации
        (как и большинство из нас), желающие попробовать
        <span class="application">Recoll</span> для своих нужд не обнаружат
        ничего сложного в <a class="link" href="#RCL.INSTALL.BINARY" title=
        "5.1.&nbsp;Installing a binary copy">установке</a> этого
        приложения. После запуска графического интерфейса <span class=
        "command"><strong>recoll</strong></span> предложит разрешить
        индексирование домашнего каталога, тотчас же по завершении
        которого будет возможно выполнение поиска.</p>
        <p>Однако не стоит это делать, если ваш домашний каталог содержит огромное количество документов,
        а вы не готовы ждать или объём дискового пространства на вашей системе невелик.
        В этом случае сначала может возникнуть необходимость настройки <a class="link" href="#RCL.INDEXING.CONFIG"
        title="2.3.&nbsp;Index configuration">конфигурации</a> для
        ограничения области индексации. Для этого в меню приложения <span class=
        "command"><strong>recoll</strong></span> нужно перейти в:
        <span class="guimenu">«Настройки»</span> → <span class=
        "guimenuitem">«Настройка индекса»</span>, затем настроить
        раздел <span class="guilabel">«Каталоги верхнего уровня»</span>,
        который определяет каталоги с которых начинается поиск по
        файловой системе.</p>
        <p>На <span class="application">Unix</span>-подобных системах,
        также может быть полезно установить ряд <a class="link"
        href="#RCL.INSTALL.EXTERNAL" title=
        "5.2.&nbsp;Supporting packages">вспомогательных приложений</a>
        для соответствующих типов документов (например, <span class=
        "application">antiword</span> для файлов <span class=
        "application">Microsoft Word</span>). Пакет
        <span class="application">Windows</span> полностью
        автономен и включает наиболее полезные вспомогательные
        программы.</p>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INTRODUCTION.SEARCH" id=
              "RCL.INTRODUCTION.SEARCH"></a>1.2.&nbsp;Полнотекстовый
              поиск</h2>
            </div>
          </div>
        </div>
        <p><span class="application">Recoll</span> является
        программой полнотекстового поиска, которая ищет данные по содержимому,
        а не по внешним атрибутам (таким как имя файла). Поиск выполняется
        по заданным словам (элементам поиска), которые должны или не должны содержаться
        в искомом тексте. По итогам поиска выводится список совпавших
        документов, отсортированный так, чтобы наиболее точно <span class="emphasis">
        <em>совпадающие</em></span> документы отображались первыми.</p>
        <p>Нет необходимости запоминать в каком именно файле или сообщении
        электронной почты хранится заданный элемент информации. Достаточно
        сделать соответствующий запрос и программа выдаст список
        документов, где заданные ключевые слова встречаются наиболее
        часто, как это делают поисковые системы в Интернете.</p>
        <p>Приложения полнотекстового поиска пытаются определить, какие
        документы больше всего подходят к задаваемым элементам поиска.
        Компьютерные алгоритмы для определения такого соответствия могут
        быть очень сложными, но в целом уступают возможности человеческого
        мозга быстро определять соответствие. Качество определения соответствия
        является наиболее важным аспектом при оценке поискового приложения.
        Для определения соответствия <span class="application">Recoll</span>
        использует библиотеку вероятностного информационного поиска
        <span class="application">Xapian</span>.</p>
        <p>Во многих случаях поиск целесообразно выполнять по всем формам
        слова, включая формы множественного числа, различные времена глагола
        или однокоренные слова, происходящие от одной <span class=
        "emphasis"><em>основы</em></span> (например: <em class=
        "replaceable"><code>floor, floors, floored,
        flooring...</code></em>). Запросы обычно автоматически
        расширяются для поиска по всем таким формам (однокоренным словам).
        Эту функцию можно отключить для поиска по конкретной форме.</p>
        <p>Сам по себе морфологический поиск недостаточно хорошо
        приспособлен к наличию орфографических ошибок или фонетических вариантов.
        Поэтому, приложение полнотекстового поиска может содержать
        и эту форму приближения.
        Например, поиск по слову <em class="replaceable"><code>aliterattion</code></em>
        при возврате нулевого результата может предложить слова <em class=
        "replaceable"><code>alliteration, alteration, alterations,
        или altercation</code></em> в качестве возможных вариантов замены.
        <span class="application">Recoll</span> основывает свои предложения
        на текущем содержании индекса, в связи с чем могут быть предложены слова,
        отсутствующие в стандартном словаре.</p>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INTRODUCTION.RECOLL" id=
              "RCL.INTRODUCTION.RECOLL"></a>1.3.&nbsp;Обзор Recoll
              </h2>
            </div>
          </div>
        </div>
        <p>В качестве системы хранения и поиска информации
        <span class="application">Recoll</span> использует библиотеку
        информационного поиска <a class="ulink" href="https://www.xapian.org" target=
        "_top"><span class="application">Xapian</span></a>.
        <span class="application">Xapian</span> является чрезвычайно
        развитым пакетом с использованием <a class="ulink" href=
        "https://www.xapian.org/docs/intro_ir.html" target="_top">
        сложной вероятностной модели ранжирования</a>.</p>
        <p>Библиотека <span class="application">Xapian</span>
        оперирует индексной базой данных, которая определяет местонахождение
        элементов поиска в файлах документов. Она эффективно обрабатывает
        сложные запросы, создаваемые сложным механизмом расширения запросов
        <span class="application">Recoll</span>, и отвечает за сложнейшую задачу
        вычисления соответствия.</p>
        <p><span class="application">Recoll</span> предоставляет лишь интерфейс
        и механизмы для обмена данными с индексом. Это включает извлечение
        текста из многих существующих форматов документов, работа
        с вариантами элементов поиска (с помощью систем морфологического поиска
        <span class="application">Xapian</span>), а также возможных орфографических
        вариантов (с помощью программы проверки орфографии <span class=
        "application">aspell</span>), интерпретацию запросов пользователя и вывод
        результатов.</p>
        <p>Если говорить кратко, <span class="application">Recoll</span> делает
        всю грязную работу, а <span class="application">Xapian</span>
        занимается интеллектуальной составляющей процесса.</p>
        <p>Индекс <span class="application">Xapian</span> может
        достигать больших размеров (примерно в объёме самих этих
        документов), но не является их архивом. <span class=
        "application">Recoll</span> может лишь отображать
        документы целиком, если они находятся там же, где были
        индексированы. Однако, последняя версия <span class=
        "application">Recoll</span> уже сохраняет данные из всех
        индексированных документов в виде обычного текста.</p>
        <p><span class="application">Recoll</span> сохраняет все
        внутренние данные в формате <span class="application"></span>
        UTF-8</span> и может индексировать множество различных типов
        файлов с разными наборами символов, кодировками и языками
        в один и тот же индекс. Он может обрабатывать документы,
        вложенные в другие документы (например, документ PDF, хранящийся
        в zip-архиве, отправленный в виде вложения в сообщении электронной
        почты…) с произвольной вложенностью.</p>
        <p>По умолчанию <span class="application">Recoll</span>
        обрабатывает тексты на восточно-азиатских языках путём формирования элементов
        поиска в виде произвольных последовательностей следующих друг за
        другом символов (n-грам). Однако способен интегрировать средства
        сегментации языка для <a class="ulink" href=
        "https://www.recoll.org/pages/recoll-chinese.html" target=
        "_top">китайского</a> и <a class="ulink" href=
        "https://www.recoll.org/pages/recoll-korean.html" target=
        "_top">корейского</a>, что приводит к уменьшению размеров
        индекса и улучшению результатов поиска.</p>
        <p>Стемминг — это процесс, посредством которого <span class=
        "application">Recoll</span> выделяет основу слова,
        чтобы поиск не зависел, например, от конкретного числа
        существительного (floor, floors) или времени глагола
        (flooring, floored). Поскольку механизмы стемминга
        зависят от конкретных грамматических правил каждого языка,
        в составе <span class="application">Xapian</span> имеется
        специальный модуль стеммера для большинства языков,
        поддерживающих выделение основы.</p>
        <p><span class="application">Recoll</span> хранит
        необработанную стеммером версию элементов поиска в
        главном индексе и использует вспомогательные базы данных
        для расширения элементов поиска (одну для каждого языка с выделением основы),
        благодаря чему можно переключать языки для стемминга между поисками
        или добавлять язык без необходимости полной переиндексации.</p>
        <p>Документы на разных языках могут сохраняться в один
        индекс, что часто и происходит. В такой ситуации для индекса
        может быть указано несколько языков с выделяемой основой.</p>
        <p>На данный момент <span class="application">Recoll</span>
        не предпринимает попыток разработки автоматического распознавания
        языка, благодаря чему стеммер будет иногда применяться к элементам
        поиска из других языков с трудно предсказуемыми результатами. На
        практике такой подход при всех возможных недоразумениях
        оказался весьма полезным и значительно менее громоздким, 
        чем сегрегация документов по языкам.</p>
        <p>По умолчанию <span class="application">Recoll</span>
        удаляет большую часть диакритических знаков из элементов поиска,
        и переводит текст в нижний регистр как перед сохранением в индексе,
        так и перед использованием в поиске. В итоге сводятся на нет
        какие-либо отличия в поиске с применением прописных букв
        (<code class="literal">US</code> / <code class=
        "literal">us</code>), либо диакритических
        знаков (<code class="literal">sake</code> /
        <code class="literal">saké</code>, <code class=
        "literal">mate</code> / <code class=
        "literal">maté</code>).</p>
        <p>В то же время <span class="application">Recoll</span>
        может хранить элементы поиска в исходном варианте без удаления диакритических
        знаков или преобразования регистра. В такой конфигурации
        поиск по умолчанию будет происходить как и прежде, но сохраняется
        возможность выполнения регистрозависимого поиска с учётом диакритических
        знаков. Более подробно это описывается в разделе о
        <a class="link" href="#RCL.INDEXING.CONFIG.SENS" title=
        "2.3.3.&nbsp;Index case and diacritics sensitivity">чувствительности к регистру
        и диакритическим знакам</a>.</p>
        <p><span class="application">Recoll</span> использует
        множество параметров для точного определения предмета индексирования,
        а также способа классификации и декодирования исходных документов.
        Эти параметры хранятся в <a class="link" href="#RCL.INDEXING.CONFIG" title=
        "2.3.&nbsp;Index configuration">конфигурационных файлах</a>. 
        В процессе установки конфигурация по умолчанию копируется в стандартное
        местоположение (обычно что-то вроде <code class=
        "filename">/usr/share/recoll/examples</code>). Значения
        по умолчанию, заданные в файлах конфигурации в этом каталоге,
        могут переопределяться значениями, заданными в личной
        конфигурации пользователя. Конфигурация
        <span class="application">Recoll</span> по умолчанию предписывает
        индексировать домашний каталог пользователя с использованием общесистемных
        параметров. Наиболее часто используемые параметры можно настроить с помощью
        меню настройки параметров в графическом интерфейсе
        <span class="command"><strong>recoll</strong></span>.
        Менее распространённые параметры могут быть заданы только с помощью
        текстовых файлов.</p>
        <p>Процедура <a class="link" href="#RCL.INDEXING.PERIODIC.EXEC"
        title="Running the indexer">индексации</a> начинается
        автоматически (после получения разрешения) при первом
        запуске графического интерфейса программы <span class=
        "command"><strong>recoll</strong></span>. Индексирование
        также может выполняться при запуске команды <span class=
        "command"><strong>recollindex</strong></span>.
        По умолчанию при наличии соответствующих аппаратных ресурсов
        индексирование в <span class="application">Recoll</span> осуществляется
        в многопоточном режиме и может выполнять несколько задач
        параллельно для извлечения текста, сегментации и обновления
        индекса.</p>
        <p><a class="link" href="#RCL.SEARCH" title=
        "Chapter&nbsp;3.&nbsp;Searching">Поиск</a> обычно
        происходит внутри графического интерфейса
        <span class="command"><strong>recoll</strong></span>, который обладает
        большим количеством параметров, помогающих найти искомое.
        При этом существуют и другие способы выполнения запросов к индексу:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p><a class="link" href="#RCL.SEARCH.COMMANDLINE"
              title=
              "3.4.&nbsp;Searching on the command line">Интерфейс
              командной строки</a>.</p>
            </li>
            <li class="listitem">
              <p><a class="ulink" href=
              "https://framagit.org/medoc92/recollwebui" target=
              "_top">Recoll WebUI</a>.</p>
            </li>
            <li class="listitem">
              <p><a class="ulink" href=
              "https://www.recoll.org/pages/download.html" target=
              "_top">Служба поиска</a> Gnome Shell.</p>
            </li>
            <li class="listitem">
              <p>Программный интерфейс <a class="link" href="#RCL.PROGRAM.PYTHONAPI"
              title="4.3.&nbsp;Python API"><span class=
              "application">Python</span></a></p>
            </li>
            <li class="listitem">
              <p>Модуль <a class="link" href="#RCL.SEARCH.KIO" title=
              "3.3.&nbsp;Searching with the KDE KIO slave">KIO slave для <span class="application">
                KDE</span></a>.</p>
            </li>
            <li class="listitem">
              <p>Модуль Ubuntu Unity <a class="ulink" href=
              "https://www.recoll.org/pages/download.html" target=
              "_top">Scope</a>.</p>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="chapter">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a name="RCL.INDEXING" id=
            "RCL.INDEXING"></a>Глава&nbsp;2.&nbsp;Индексирование</h1>
          </div>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INDEXING.INTRODUCTION" id=
              "RCL.INDEXING.INTRODUCTION"></a>2.1.&nbsp;Введение</h2>
            </div>
          </div>
        </div>
        <p>Индексирование — это процесс, при котором
        анализируется набор документов и данные записываются в базу данных.
        <span class="application">Recoll</span> обычно использует
        инкрементальное индексирование, при котором документы анализируются
        только если они изменялись после последнего индексирования.
        При первом запуске анализу подвергаются все документы.
        Принудительное выполнение полного индексирования может быть осуществлено
        позднее при указании соответствующего параметра команды (<span class=
        "command"><strong>recollindex</strong></span> <code class=
        "option">-z</code> или <code class="option">-Z</code>).</p>
        <p>При этом <span class="command"><strong>recollindex</strong></span>
        пропускает файлы, которые на прошлом проходе вызвали ошибку.
        Эта оптимизация производительности может быть отключена
        с помощью параметра командной строки <code class="option">-k</code>,
        с которым программа будет повторно анализировать проблемные
        файлы. Например, после обновления обработчика ввода.</p>
        <p>Если файл был удалён, <span class=
        "command"><strong>recollindex</strong></span> удаляет и 
        соответствующие данные из индекса. Точный момент времени удаления
        зависит от режима индексирования. Предусмотрены меры для
        предотвращения <a class="link" href=
        "#RCL.INDEXING.REMOVABLE" title=
        "2.5.4.&nbsp;Removable volumes">удаления данных</a> при
        использовании съёмных носителей.</p>
        <p>В последующих разделах даётся обзор различных аспектов
        процесса индексирования и конфигурации со ссылками
        на описывающие их разделы.</p>
        <p>В зависимости от типа данных при индексировании могут потребоваться
        временные файлы, которые в некоторых случаях могут достигать довольно больших размеров.
        Можно использовать переменные окружения <code class="envar">RECOLL_TMPDIR</code>
        или <code class="envar">TMPDIR</code> для определения
        места их создания (по умолчанию они создаются в
        <code class="filename">/tmp</code>). Использование переменной <code class=
        "envar">TMPDIR</code> полезно ещё и тем, что она также может
        учитываться вспомогательными командами, запускаемыми
        <span class=
        "command"><strong>recollindex</strong></span>.</p>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INDEXING.INTRODUCTION.MODES" id=
                "RCL.INDEXING.INTRODUCTION.MODES"></a>2.1.1.&nbsp;Режимы
                индексирования</h3>
              </div>
            </div>
          </div>
          <p>Индексация <span class="application">Recoll</span> может
          выполняться в двух основных режимах:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p><b><a class="link" href="#RCL.INDEXING.PERIODIC"
                title="2.4.1.&nbsp;Periodic indexing">Периодическое (или
                пакетное) индексирование</a> .&nbsp;</b><span class=
                "command"><strong>recollindex</strong></span> запускается
                через определённые промежутки времени. На <span class=
                "application">Unix</span>-подобных системах обычно
                используется для запуска в ночное время, которое <a class="link"
                href="#RCL.INDEXING.PERIODIC.AUTOMAT" title=
                "Linux: using cron to automate indexing">прописывается</a>
                в файле <span class=
                "command"><strong>cron</strong></span>. В ОС
                <span class="application">Windows</span> для запуска
                процедуры индексирования можно использовать
                <span class="application">Планировщик задач</span>.
                В обох случаях, графический интерфейс
                <span class="application">Recoll</span> включает
                простой интерфейс конфигурирования системного
                планировщика.</p>
              </li>
              <li class="listitem">
                <p><b><a class="link" href="#RCL.INDEXING.MONITOR"
                title="2.4.2.&nbsp;Real time indexing">Индексирование
                в режиме реального времени</a> .&nbsp;</b><span class=
                "command"><strong>recollindex</strong></span> постоянно
                работает в качестве фоновой службы и использует механизм
                отслеживания изменений в файловой системе (например, <span class=
                "application">inotify</span> на <span class=
                "application">Unix</span>-подобных системах) для обнаружения
                изменений в файлах. Новые или обновлённые файлы мгновенно
                индексируются. Отслеживание дерева большой файловой системы
                может потреблять значительные ресурсы системы.</p>
              </li>
            </ul>
          </div>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name="idm197" id=
                  "idm197"></a>Выбор режима индексирования</h4>
                </div>
              </div>
            </div>
            <p>Выбор между двумя методами делается на основе
            личных предпочтений, а также может комбинироваться при организации
            нескольких индексов (например: можно использовать периодическое
            индексирование на большом каталоге с документацией, и
            индексирование в режиме реального времени на небольшом
            домашнем каталоге), либо <a class="link" href="#RCL.INDEXING.MONITOR" title=
            "2.4.2.&nbsp;Real time indexing">настроить индекс таким
            образом, чтобы отслеживать только некое подмножество дерева.</a></p>
            <p>Выбор метода и используемых параметров можно настроить
            в графическом интерфейсе <span class="command"><strong>recoll</strong></span>:
            <span class="guimenu">«Настройки»</span> → диалог <span class=
            "guimenuitem">«Расписание индексирования»</span>.</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INDEXING.INTRODUCTION.CONFIG" id=
                "RCL.INDEXING.INTRODUCTION.CONFIG"></a>2.1.2.&nbsp;Конфигурации,
                несколько индексов</h3>
              </div>
            </div>
          </div>
          <p><span class="application">Recoll</span> поддерживает
          работу с несколькими индексами, каждый из которых определяется
          по своему конфигурационному каталогу. Конфигурационный каталог
          содержит <a class="link" href="#RCL.INDEXING.CONFIG"
          title="2.3.&nbsp;Index configuration">несколько файлов</a>
          с описанием объектов и способов индексирования.</p>
          <p>При первом запуске <span class=
          "command"><strong>recoll</strong></span> или <span class=
          "command"><strong>recollindex</strong></span> создаётся
          конфигурационный каталог по умолчанию.
          Эта конфигурация используется для индексирования и
          выполнения запросов до тех пор, пока не задана никакая конкретная конфигурация.
          Она располагается в <code class=
          "filename">$HOME/.recoll/</code> на <span class=
          "application">Unix</span>-подобных системах и в <code class=
          "filename">%LOCALAPPDATA%/Recoll</code> на ОС <span class=
          "application">Windows</span> (обычно <code class=
          "filename">C:/Users/[пользователь]/Appdata/Local/Recoll</code>).</p>
          <p>У всех параметров конфигурации есть значения по умолчанию,
          определённые в общесистемных файлах. Без дальнейшей настройки
          конфигурации по умолчанию все файлы домашнего каталога будут обрабатываться с применением
          наиболее целесообразного стандартного набора параметров. Настройка
          конфигурации позволяет задавать обработку произвольной области
          файловой системы, устанавливать способы выбора файлов, а также многое другое.</p>
          <p>В некоторых случаях может быть полезно создавать дополнительные
          конфигурационные каталоги, например, для отделения общих индексов
          от личных, либо с целью использования преимуществ организации
          данных для улучшения точности поиска.</p>
          <p>Для создания конфигурационного каталога необходимо создать пустой каталог в выбранном
          месте, затем задать назначение каталога в
          <span class="command"><strong>recoll</strong></span> или
          <span class="command"><strong>recollindex</strong></span>
          через настройки с помощью параметров командной строки
          (<code class="literal">-c</code> <em class=
          "replaceable"><code>/some/directory</code></em>), либо в
          переменной окружения (<code class=
          "envar">RECOLL_CONFDIR</code>=<em class=
          "replaceable"><code>/some/directory</code></em>). После этого
          любое изменение, выполняемое командами (например,
          настройка конфигурации, поиск с помощью <span class=
          "command"><strong>recoll</strong></span> или создание
          индекса <span class=
          "command"><strong>recollindex</strong></span>), будет
          применяться к новому каталогу, а не к каталогу по умолчанию.</p>
          <p>После создания нескольких индексов, каждый из них
          можно использовать независимо, для чего желаемый индекс
          указывается с параметром <code class=
          "literal">-c</code> или в переменной окружения <code class=
          "envar">RECOLL_CONFDIR</code> при запуске программы.</p>
          <p>Также можно настроить одну конфигурацию в дополнение
          к своему индексу и отправлять запросы на один или несколько
          других индексов с помощью функции <span class="guimenuitem">
          Внешний индекс</span> в графическом интерфейсе <span class=
          "command"><strong>recoll</strong></span> или путём использования аналогичных
          средств командной строки и программных инструментов.</p>
          <p>Одним из вариантов при выборе системным администратором тактики
          использовании функции множественного индекса
          может быть установка центрального индекса на общие данные
          (с возможностью исключения их из поиска) в дополнение к своим личным данным.
          Конечно, существуют и другие варианты. Например, нередко так случается,
          что поиск нужно выполнить в известном наборе файлов, в каковом случае
          сужение области поиска может привести к улучшению его результатов. Схожего эффекта можно достичь
          и при указании в поисковом запросе фильтра каталогов,
          но множественное индексирование позволяет работать с большей производительностью
          и в некоторых ситуациях стоит усилий, затраченных на её настройку.</p>
          <p>В более сложном формате использования индексов выполняется улучшение
          производительности индексирования путём параллельного обновления нескольких
          индексов (при использовании нескольких ядер ЦП и дисков, а также при
          использовании нескольких компьютеров) с последующим слиянием индексов,
          либо с выдачей параллельных запросов.</p>
          <p>См. более подробную информацию в разделе о <a class="link" href=
          "#RCL.INDEXING.CONFIG.MULTIPLE" title=
          "2.3.2.&nbsp;Multiple indexes">настройке конфигурации
          нескольких индексов</a></p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="idm240" id=
                "idm240"></a>2.1.3.&nbsp;Типы документов</h3>
              </div>
            </div>
          </div>
          <p><span class="application">Recoll</span> умеет работать
          с несколькими различными типами документов. Параметры
          определения типов документов и их обработки определяются в
          <a class="link" href="#RCL.INDEXING.CONFIG" title=
          "2.3.&nbsp;Index configuration">файлах конфигурации</a>.</p>
          <p>Большинство типов файлов, такие как HTML или файлы текстовых редакторов,
          могут содержать только один документ. Однако некоторые типы файлов, такие как
          папки электронной почти или zip-архивы, содержат по нескольку документов
          с собственной индексацией, которые и сами могут быть составными.
          Такие иерархии могут иметь глубокое вложение. Например, <span class=
          "application">Recoll</span> может обрабатывать
          документ <span class="application">LibreOffice</span>,
          прикреплённый к сообщению электронной почты в файле
          zip-архива папки электронной почты…</p>
          <p><span class=
          "command"><strong>recollindex</strong></span> способен обрабатывать
          своими силами простой текст, HTML, OpenDocument (Open/LibreOffice), форматы
          электронной почты, а также некоторые другие типы документов.</p>
          <p>Остальные типы файлов (например: postscript, pdf, ms-word, rtf
          …) требуют наличия внешних приложений для предварительной обработки.
          Список таких приложений приведён в разделе <a class="link" href=
          "#RCL.INSTALL.EXTERNAL" title=
          "5.2.&nbsp;Supporting packages">установка</a>.
          После каждой операции индексирования <span class=
          "application">Recoll</span> обновляет список команд,
          необходимых для индексирования существующих типов файлов.
          Этот список можно увидеть в меню
          <span class="guimenu">«Файл»</span> → <span class=
          "guimenuitem">«Показать недостающие обработчики»</span>
          графического интерфейса
          <span class="command"><strong>recoll</strong></span>.
          Он хранится в текстовом файле <code class="filename">missing</code>
          внутри конфигурационного каталога.</p>
          <p>После установки отсутствующего обработчика будет логично
          запустить <span class=
          "command"><strong>recollindex</strong></span> для повторной обработки
          файлов с ошибками, добавив параметр <code class=
          "literal">-k</code> в интерфейсе командной строки или в графическом интерфейсе
          с помощью меню <span class="guimenu">«Файл»</span> → <span class=
          "guimenuitem">«Специальное индексирование»</span>. Сделать это необходимо,
          потому что <span class=
          "command"><strong>recollindex</strong></span> в режиме работы
          по умолчанию не будет повторно обрабатывать файлы, предыдущая обработка
          которых была выполнена с ошибкой. В некоторых случаях целесообразно
          очистить данные для категории файлов перед индексированием.
          См. страницу руководства <span class=
          "command"><strong>recollindex</strong></span>.
          Если индекс не слишком велик, то проще будет построить его заново.</p>
          <p>По умолчанию <span class="application">Recoll</span>
          будет пытаться индексировать любой тип файла, который так или иначе можно
          прочитать. Делать это не всегда желательно, поэтому с одной стороны существуют способы
          для исключения некоторых типов файлов, с другой стороны можно задать
          список типов файлов, предназначенных для индексирования. В последнем случае
          любой тип файла, отсутствующий в списке, будет игнорироваться.</p>
          <p>Исключение файлов по имени выполняется путём добавления шаблонов имён
          с подстановочными знаками в список <a class="link" href=
          "#RCL.INSTALL.CONFIG.RECOLLCONF.SKIPPEDNAMES">skippedNames</a>,
          что можно сделать из графического интерфейса в меню «Настройка индекса».
          Исключение по типу может быть задано путём ввода списка
          <a class="link" href=
          "#RCL.INSTALL.CONFIG.RECOLLCONF.EXCLUDEDMIMETYPES">excludedmimetypes</a>
          в конфигурационный файл. Список можно переопределить для подкаталогов.</p>
          <p>Также можно определить исчерпывающий перечень индексируемых MIME-типов
          (остальные типы не будут индексироваться), путём задания конфигурационной переменной
          <a class="link" href=
          "#RCL.INSTALL.CONFIG.RECOLLCONF.INDEXEDMIMETYPES">indexedmimetypes</a>.
          Пример:</p>
          <pre class=
          "programlisting">indexedmimetypes = text/html application/pdf</pre>
          <p>Данный параметр можно переопределить для подкаталогов
          Пример:</p>
          <pre class="programlisting">[/path/to/my/dir]
          indexedmimetypes = application/pdf</pre>
          <p>(При изменении подобных параметров, не забудьте, что они
          действуют до конца файла или другого маркера раздела).</p>
          <p>Параметр <code class="literal">excludedmimetypes</code> или
          <code class="literal">indexedmimetypes</code> может быть задан либо
          путём внесения изменений в <a class="link" href=
          "#RCL.INSTALL.CONFIG.RECOLLCONF" title=
          "5.4.2.&nbsp;Recoll main configuration file, recoll.conf">
          конфигурационный файл (<code class=
          "filename">recoll.conf</code>)</a> индекса, либо с помощью графического
          интерфейса средства настройки конфигурации индекса.</p>
          <div class="note" style=
          "margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Примечание о MIME-типах</h3>
            <p>При редактировании списка <code class=
            "literal">indexedmimetypes</code> или <code class=
            "literal">excludedmimetypes</code>, необходимо
            предпочитать значения MIME, перечисленные в файле <code class=
            "filename">mimemap</code> или в списках результатов Recoll,
            выводу команды <code class="literal">file
            -i</code>: между ними имеется ряд различий.
            Вывод <code class="literal">file -i</code> можно использовать
            только для файлов без расширений или для тех файлов,
            расширения которых отсутствуют в списке <code class=
            "filename">mimemap</code></p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="idm291" id=
                "idm291"></a>2.1.4.&nbsp;Ошибки индексирования</h3>
              </div>
            </div>
          </div>
          <p>Индексирование некоторых документов может вызывать ошибки
          по нескольким причинам: может отсутствовать вспомогательная
          программа, документ может быть повреждён, разархивирование
          файла может оказаться невозможным в связи с нехваткой
          дискового пространства, и т.д.</p>
          <p>По умолчанию, индексатор <span class="application">Recoll</span>
          версии 1.21 и более поздних не проводит повторную индексацию
          файлов с ошибками, потому что некоторые ошибки индексирования
          могут оказаться очень дорогостоящими (например, ошибка
          разархивирования большого файла по причине нехватки дискового
          пространства). Повторная индексация проводится только в случае
          непосредственного указания параметра (<code class="option">-k</code>)
          при запуске команды <span class="command"><strong>recollindex</strong></span>
          в командной строке или когда такое указание даётся в сценарии, запускающемся при старте <span class=
          "command"><strong>recollindex</strong></span>.
          Сценарий определяется в переменной конфигурации (<code class=
          "literal">checkneedretryindexscript</code>) и делает
          неубедительную попытку выяснить факт установки вспомогательной
          программы путём проверки внесения изменений в общие каталоги
          <code class="filename">bin</code>.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="idm301" id=
                "idm301"></a>2.1.5.&nbsp;Восстановление</h3>
              </div>
            </div>
          </div>
          <p>В тех редких случаях, когда происходит повреждение индекса
          (о котором можно судить по странным результатам поиска
          или сбоям), необходимо удалить файлы индекса до запуска
          прохода переиндексирования. Для этого достаточно просто удалить каталог
          <code class="filename">xapiandb</code> (см. 
          <a class="link" href="#RCL.INDEXING.STORAGE" title=
          "2.2.&nbsp;Index storage">следующий раздел</a>). Также можно
          запустить <span class=
          "command"><strong>recollindex</strong></span> с параметром
          <code class="option">-z</code>, который выполняет сброс
          базы данных перед индексацией. Различие между двумя методами
          заключается в том, что во втором случае текущий формат индекса
          не изменяется, что может быть нежелательно, если текущая версия 
          <span class="application">Xapian</span> уже поддерживает новый формат.</p>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INDEXING.STORAGE" id=
              "RCL.INDEXING.STORAGE"></a>2.2.&nbsp;Хранение
              индекса</h2>
            </div>
          </div>
        </div>
        <p>Данные индекса по умолчанию хранятся в подкаталоге
        <code class="filename">xapiandb</code> конфигурационного
        каталога <span class="application">Recoll</span>, обычно это
        <code class="filename">$HOME/.recoll/xapiandb/</code> на <span class=
        "application">Unix</span>-подобных системах или <code class=
        "filename">C:/Users/[me]/Appdata/Local/Recoll/xapiandb</code>
        на <span class="application">Windows</span>. Местоположение можно изменить
        двумя различными способами (для различных целей):</p>
        <div class="orderedlist">
          <ol class="orderedlist" type="1">
            <li class="listitem">
              <p>Для данного конфигурационного каталога можно указать
              нестандартное место расположения индекса с помощью
              параметра <code class="varname">dbdir</code> в конфигурационном
              файле (см. <a class="link" href="#RCL.INSTALL.CONFIG.RECOLLCONF"
              title="5.4.2.&nbsp;Recoll main configuration file, recoll.conf">
              раздел описания конфигурации</a>). Этот способ подходит, главным образом,
              в том случае, когда расположение конфигурационного каталога хотелось бы
              оставить по умолчанию, но индекс требуется расположить в другом месте. Обычно это делают в связи
              с нехваткой дискового пространства или низкой производительностью.</p>
            </li>
            <li class="listitem">
              <p>Другой конфигурационный каталог можно указать в
              переменной окружения <code class="envar">RECOLL_CONFDIR</code>
              или в параметре <code class="option">-c</code>
              команды <span class="application">Recoll</span>.
              Этот метод обычно используется для индексирования
              различных областей файловой системы в различных
              индексах. Например, при запуске указанной ниже команды:</p>
              <pre class=
              "programlisting">recoll -c ~/.indexes-email</pre>
              <p><span class="application">Recoll</span> будет
              использовать конфигурационный файл, находящийся в <code class=
              "filename">~/.indexes-email/</code> и (если не
              не указано иное в <code class=
              "filename">recoll.conf</code>) будет искать индекс в 
              <code class=
              "filename">~/.indexes-email/xapiandb/</code>.</p>
              <p>Использование нескольких конфигурационных каталогов и
              <a class="link" href="#RCL.INSTALL.CONFIG.RECOLLCONF"
              title=
              "5.4.2.&nbsp;Recoll main configuration file, recoll.conf">
              конфигурационных параметров</a> позволяет настраивать
              несколько конфигураций и индексов для обработки
              любого подмножества доступных данных, использующихся
              для выполнения поиска.</p>
            </li>
          </ol>
        </div>
        <p>Имеется ещё довольно большое количество параметров, которые можно задать
        в самом конфигурационном файле для настройки хранения данных <span class=
        "application">Recoll</span>. Они описаны в <a class="link" href=
        "#RCL.INSTALL.CONFIG.RECOLLCONF.STORE" title=
        "Parameters affecting where and how we store things">разделе 
        главы по конфигурации</a>.</p>
        <p>Размер индекса определяется по размеру совокупности документов,
        но эта зависимость может сильно варьироваться. Для типичного
        смешанного набора документов, размер индекса часто будет близок
        к размеру набора данных. В особых случаях (например, набор сжатых
        mbox-файлов), индекс может значительно превышать документы по размеру.
        Также он может быть значительно меньше, если документы содержат
        большое количество изображений или других неиндексируемых данных
        (в качестве наиболее радикального примера можно представить набор
        mp3-файлов, где индексируются только теги).</p>
        <p>Конечно же, изображения, звук и видео не увеличивают размер
        индекса, а это означает, что в подавляющем большинстве случаев используемое
        индексом пространство будет ничтожно мало по сравнению с общим
        количеством данных на компьютере.</p>
        <p>Каталог данных индекса (<code class=
        "filename">xapiandb</code>) содержит только такие данные, которые
        могут быть полностью воссозданы повторным индексированием
        (пока существуют исходные документы), и удаление их безопасно.</p>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INDEXING.STORAGE.FORMAT" id=
                "RCL.INDEXING.STORAGE.FORMAT"></a>2.2.1.&nbsp;Форматы индекса <span class="application">Xapian</span></h3>
              </div>
            </div>
          </div>
          <p>Версии <span class="application">Xapian</span>
          обычно поддерживают несколько форматов для хранения индекса.
          Текущая старшая версия <span class="application">Xapian</span>
          будет использовать текущий формат для создания новых
          индексов, а также будет поддерживать формат предыдущей
          старшей версии.</p>
          <p><span class="application">Xapian</span> не будет
          автоматически преобразовывать существующий индекс из старого
          формата в новый. Для обновления текущего формата в новый формат,
          а также когда формат индекса настолько устарел, что более
          не поддерживается, необходимо полностью удалить
          старый индекс (обычно <code class="filename">~/.recoll/xapiandb</code>),
          а затем запустить обычную команду индексирования. Команда
          <span class="command"><strong>recollindex</strong></span> с параметром
          <code class="option">-z</code> в данном случае не сможет исправить
          ситуацию.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INDEXING.STORAGE.SECURITY" id=
                "RCL.INDEXING.STORAGE.SECURITY"></a>2.2.2.&nbsp;Аспекты
                безопасности</h3>
              </div>
            </div>
          </div>
          <p>Индекс <span class="application">Recoll</span> не
          сохраняет полных копий индексируемых документов (фактически
          начал сохранять с версии 1.24). Но содержит достаточное
          количество данных для почти полного их воспроизведения.
          Поэтому, при иднексировании секретных данных доступ к каталогу базы данных
          должен быть запрещён.</p>
          <p><span class="application">Recoll</span> создаёт
          конфигурационный каталог с правами доступа 0700 (доступ
          только для владельца). Поскольку каталог данных индекса по умолчанию
          является подкаталогом конфигурационного каталога, что позволяет
          обеспечить ему надёжную защиту.</p>
          <p>Если ваша установочная конфигурация имеет отличия от этой схемы, то возникает
          необходимость продумать способ защиты индекса, установить соответствующие
          права доступа для каталога и файлов, а также, по возможности, подправить
          параметры команды <code class="literal">umask</code>, применяемой при обновлении
          индекса.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INDEXING.STORAGE.BIG" id=
                "RCL.INDEXING.STORAGE.BIG"></a>2.2.3.&nbsp;Некоторые
                особенности работы с большими индексами</h3>
              </div>
            </div>
          </div>
          <p>Интерес к данным рассуждениям может возникнуть только
          при превышении индексом размера 5 Гбайт. Размер более 10 Гбайт
          превращает вопрос в серьёзную проблему. Размер индекса
          у большинства пользователей будет несравнимо меньше. Для
          справки, размер 5 Гбайт идентичен содержимому примерно
          2000 Библий, что составляет значительный объём текстовой
          информации. При наличии у вас значительного объёма текстовых данных
          (запомните: изображения не считаются, текстовая составляющая
          PDF-файлов обычно меньше 5% от размера файла) ознакомление
          с содержимым этого раздела крайне необходимо.</p>
          <p>Количество операций записи, совершаемое Xapian при
          построении индекса, имеет нелинейную зависимость от размера
          индекса (близко к среднему значению между линейной и квадратичной).
          Для больших индексов это может привести к проблемам
          с производительностью и даже стать причиной износа
          SSD-дисков.</p>
          <p>Остроту проблемы можно снизить путём соблюдения
          следующих базовых принципов:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>Большой набор данных разбивается на несколько наборов
                сравнительно небольшого размера. Запросы к этим индексам
                в дальнейшем можно запараллелить (с помощью функции использования внешних индексов
                <span class="application">Recoll</span>) или объединить
                с помощью <span class=
                "command"><strong>xapian-compact</strong></span>.</p>
              </li>
              <li class="listitem">
                <p>Необходимо обеспечить наличие большого объёма ОЗУ и задать
                максимально возможное значение параметра
                <code class="literal">idxflushmb</code> конфигурации
                <span class="application">Recoll</span> без
                подкачки на диск (необходимо поэкспериментировать).
                Значение 200 составляет минимально необходимую величину параметра в этом контексте.</p>
              </li>
              <li class="listitem">
                <p>Следует использовать Xapian 1.4.10 или более свежую версию продукта,
                поскольку она содержит значительное улучшение
                по количеству операций записи.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INDEXING.CONFIG" id=
              "RCL.INDEXING.CONFIG"></a>2.3.&nbsp;Конфигурация
              индекса</h2>
            </div>
          </div>
        </div>
        <p>Параметры <a class="link" href=
        "#RCL.INSTALL.CONFIG" title=
        "5.4.&nbsp;Configuration overview">конфигурационных файлов <span class=
        "application">Recoll</span> </a> определяют
        индексируемые области файловой системы и способы
        обработки файлов. Значения могут задаваться путём изменения
        текстовых файлов. Большинство наиболее часто используемых параметров
        также можно задать в <a class="link" href=
        "#RCL.INDEXING.CONFIG.GUI" title=
        "2.3.1.&nbsp;The index configuration GUI">диалогах графического
        интерфейса <span class="command"><strong>recoll</strong></span></a>.</p>
        <p>При первом запуске <span class=
        "command"><strong>recoll</strong></span> выводится предложение
        немедленно создать индекс. Если перед созданием индекса необходимо
        настроить конфигурацию, то на данном этапе можно нажать кнопку
        <span class="guilabel">Отмена</span>,  после чего откроется интерфейс
        настройки конфигурации.
        При выходе из настройки на этом этапе <code class="filename">recoll</code>
        создаст конфигурационный каталог по умолчанию с пустыми
        конфигурационными файлами, после чего в эти файлы уже можно
        вносить изменения.</p>
        <p>В текущем документе подробная информация по настройке конфигурации
        содержится в <a class=
        "link" href="#RCL.INSTALL.CONFIG" title=
        "5.4.&nbsp;Configuration overview">главе с описанием установки</a>
        или на странице руководства <a class="ulink" href=
        "https://www.recoll.org/manpages/recoll.conf.5.html"
        target="_top"><span class="citerefentry"><span class=
        "refentrytitle">recoll.conf</span>(5)</span></a>.
        Оба документа автоматически создаются из
        комментариев, содержащихся в конфигурационном файле.</p>
        <p>Наиболее полезной переменной на момент установки будет, вероятно,
        <a class="link" href=
        "#RCL.INSTALL.CONFIG.RECOLLCONF.TOPDIRS"><code class=
        "varname">topdirs</code></a>, в которой перечисляются
        индексируемые поддеревья и файлы.</p>
        <p>Приложения, необходимые для индексирования различных типов
        файлов помимо простого текста, HTML и файлов электронной
        почты (например: pdf, postscript, ms-word…), описаны
        в <a class="link" href=
        "#RCL.INSTALL.EXTERNAL" title=
        "5.2.&nbsp;Supporting packages">разделе по внешним
        пакетам</a>.</p>
        <p>В Recoll могут использоваться два несовместимых типа индекса,
        имеющих отличия по обработке регистра символов и
        диакритических знаков. Далее в <a class="link" href=
        "#RCL.INDEXING.CONFIG.SENS" title=
        "2.3.3.&nbsp;Index case and diacritics sensitivity">соответствующем
        разделе</a> эти два типа описываются более подробно.
        В большинстве случаев подходит тип по умолчанию.</p>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.INDEXING.CONFIG.GUI"
                id="RCL.INDEXING.CONFIG.GUI"></a>2.3.1.&nbsp;
                Графический интерфейс настройки конфигурации индекса</h3>
              </div>
            </div>
          </div>
          <p>Большая часть параметров конфигурации может быть установлена
          в графическом интерфейсе <span class="command"><strong>recoll</strong></span>
          (задайте переменную <code class="envar">RECOLL_CONFDIR</code> или примените
          параметр <code class="option">-c</code> для использования
          нестандартного индекса).</p>
          <p>В графическом интерфейсе диалог настройки конфигурации
          открывается с помощью меню <span class=
          "guimenu">«Настройки»</span> → <span class=
          "guimenuitem">«Настройка индекса»</span>. Он разделён
          на четыре вкладки, <span class="guilabel">«Общие
          параметры»</span>, <span class="guilabel">«Локальные
          параметры»</span>, <span class="guilabel">«История в
          веб»</span> (<a class="link" href=
          "#RCL.INDEXING.WEBQUEUE" title=
          "2.5.5.&nbsp;Unix-like systems: indexing visited Web pages">подробно</a>)
          и <span class="guilabel">«Параметры поиска»</span>.</p>
          <p>Вкладка <span class="guilabel">«Общие параметры»</span>
          позволяет настраивать общие переменные, такие как списки
          начальных каталогов/каталогов верхнего уровня, пропущенных
          путей и языков со словоформами.</p>
          <p>Вкладка <span class="guilabel">«Локальные параметры»</span>
          позволяет настраивать переменные, которые можно переопределить
          для подкаталогов. Эта вторая вкладка содержит изначально пустой
          список настраиваемых каталогов, которые можно туда добавить.
          Затем задаются переменные каталога, выбранного в данный момент
          (или находящегося на верхнем уровне при выборе пустой строки).</p>
          <p>Вкладка <span class="guilabel">«Параметры поиска»</span>
          определяет общие для индекса параметры поискового запроса, которые
          оказывают влияние на все инструменты поиска, не ограничиваясь
          графическим интерфейсом.</p>
          <p>Значение большинства элементов интерфейса совершенно очевидно
          и описано в содержимом <code class=
          "literal">всплывающей подсказки</code> к текстовой надписи. Для
          получения более подробной информации необходимо обратиться к <a class="link"
          href="#RCL.INSTALL.CONFIG" title=
          "5.4.&nbsp;Configuration overview">разделу
          конфигурации</a> в данном руководстве.</p>
          <p>Средство настройки конфигурации обычно учитывает комментарии
          и большую часть форматирования конфигурационных файлов.
          Поэтому оно вполне может быть использовано для внесения
          изменений в файлы, редактируемые вручную. Однако прежде всего
          рекомендуется создавать резервные копии этих файлов…</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INDEXING.CONFIG.MULTIPLE" id=
                "RCL.INDEXING.CONFIG.MULTIPLE"></a>2.3.2.&nbsp;Несколько
                индексов</h3>
              </div>
            </div>
          </div>
          <p>Несколько индексов <span class="application">Recoll</span>
          могут быть созданы путём создания нескольких конфигурационных
          каталогов, которые обычно предназначаются для индексации
          различных областей файловой системы.</p>
          <p>При этом конкретная конфигурация выбирается посредством установки
          переменной окружения <code class="envar">RECOLL_CONFDIR</code>
          или запуском <span class="command"><strong>recoll</strong></span>
          и <span class="command"><strong>recollindex</strong></span>
          с параметром <code class="option">-c</code>.</p>
          <p>Программа <span class=
          "command"><strong>recollindex</strong></span>,
          использующаяся для создания или обновления индекса, всегда
          работает с одним индексом. Различные конфигурации полностью
          независимы (параметры никогда не используются совместно
          при индексировании на разных конфигурациях).</p>
          <p>Все интерфейсы поиска (<span class=
          "command"><strong>recoll</strong></span>, <span class=
          "command"><strong>recollq</strong></span>, Python
          API, и т.д.) используют параметры и данные индекса основной конфигурации. При этом
          могут запрашиваться данные из нескольких дополнительных индексов.
          Но дополнительные индексы используются только в качестве
          источников данных. Конфигурационные параметры дополнительных индексов игнорируются.
          Это означает, что ряд параметров в совместно используемых
          конфигурациях индексов должен совпадать.</p>
          <p>При осуществлении поиска, текущий основной индекс
          (указанный в <code class="envar">RECOLL_CONFDIR</code> или <code class=
          "option">-c</code>) всегда активен. Если это нежелательно,
          можно в основной конфигурации индексировать пустой каталог.</p>
          <p>Параметры конфигурации индекса можно устанавливать либо
          с помощью текстового редактора в файлах или, для большинства
          параметров, с помощью <a class="link" href=
          "#RCL.INDEXING.CONFIG.GUI" title=
          "2.3.1.&nbsp;The index configuration GUI">графического
          интерфейса конфигурации индекса <span class="command"><strong>recoll</strong></span>
          </a>. В последнем случае применяются параметры конфигурационного каталога,
          который был указан в <code class=
          "envar">RECOLL_CONFDIR</code> или в параметре <code class=
          "option">-c</code>, и в процессе работы
          с графическим интерфейсом сменить конфигурационный каталог на другой уже не представляется возможным.</p>
          <p>См. <a class="link" href=
          "#RCL.INSTALL.CONFIG.RECOLLCONF" title=
          "5.4.2.&nbsp;Recoll main configuration file, recoll.conf">
          раздел настройки конфигурации</a> для подробного описания
          параметров</p>
          <p>Некоторые параметры конфигурации должны совпадать у
          ряда индексов, используемых для совместного поиска.
          Наиболее очевидно, что у всех одновременно запрашиваемых индексов
          должны совпадать параметры по регистрозависимости и использованию
          диакритических знаков, но существуют и другие ограничения.
          Большая часть соответствующих параметров влияет на <a class=
          "link" href="#RCL.INSTALL.CONFIG.RECOLLCONF.TERMS" title=
          "Parameters affecting how we generate terms and organize the index">
          формирование элементов поиска</a>.</p>
          <p>Использование нескольких индексов подразумевает выполнение
          некоторого объёма операций в командной строке или диспетчере файлов. Например,
          дополнительные конфигурационные каталоги создаются пользователем самостоятельно.
          В графическом интерфейсе выполнение таких операций не предусмотрено.
          Это сделано во избежание непреднамеренного создания дополнительных
          каталогов при ошибочном указании соответствующего параметра в командной
          строке. А также графический интерфейс или индексатор для работы
          с определённой конфигурацией необходимо загружать с указанием
          соответствующего параметра или переменной окружения.</p>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name="idm453" id=
                  "idm453"></a>Создание и использование дополнительного
                  индекса: Пример на Linux</h4>
                </div>
              </div>
            </div>
            <p>Нижеследующее описание относится к <span class=
            "application">Unix</span>-подобным системам</p>
            <p>Сначала создаётся конфигурация и индекс:</p>
            <pre class="programlisting">mkdir <em class=
            "replaceable"><code>/путь/к/моей/новой/конфигурации</code></em></pre>
            <p>Конфигурирование нового индекса может осуществляться
            в графическом интерфейсе <span class="command"><strong>recoll</strong></span>,
            запущенном из командной строки с целью передачи параметра
            <code class="literal">-c</code> (можно запускать с помощью
            специально созданного файла на рабочем столе) с последующим использованием
            <a class="link" href="#RCL.INDEXING.CONFIG.GUI"
            title="2.3.1.&nbsp;The index configuration GUI">
            графического инструмента конфигурации индекса</a> для настройки индекса.</p>
            <pre class="programlisting">recoll -c <em class=
            "replaceable"><code>/путь/к/моей/новой/конфигурации</code></em></pre>
            <p>В то же время можно просто открыть главный конфигурационный файл
            в текстовом редакторе:</p>
            <pre class="programlisting"><em class=
            "replaceable"><code>мой_редактор</code></em> <em class=
            "replaceable"><code>/путь/к/моей/новой/конфигурации</code></em>/<a class=
            "link" href="#RCL.INSTALL.CONFIG.RECOLLCONF" title=
            "5.4.2.&nbsp;Recoll main configuration file, recoll.conf"><code class="filename">recoll.conf</code></a></pre>
            <p>Создание и обновление индекса может выполняться из командной строки:</p>
            <pre class="programlisting">recollindex -c <em class=
            "replaceable"><code>/путь/к/моей/новой/конфигурации</code></em></pre>
            <p>А также из меню «Файл» графического интерфейса, запущенного
            с тем же самым параметром (<span class=
            "command"><strong>recoll</strong></span>, см.
            выше).</p>
            <p>Графический интерфейс также позволяет настроить пакетное
            индексирование для нового индекса. Индексирование в режиме реального
            времени настраивается в графическом интерфейсе индекса
            по умолчанию (при запуске графического интерфейса с указанием
            другого индекса в параметре <code class="literal">-c</code> элемент меню будет неактивен).</p>
            <p>Новый индекс можно использовать отдельно при указании соответствующего параметра:</p>
            <pre class="programlisting">recoll -c <em class=
            "replaceable"><code>/путь/к/моей/новой/конфигурации</code></em></pre>
            <p>А также параллельно с индексом по умолчанию при запуске
            <span class="command"><strong>recoll</strong></span>
            без параметра <code class="literal">-c</code>, но с выполнением
            настройки на вкладке <span class="guilabel">Внешние
            индексы</span> в диалоге «Настройки», который можно
            открыть либо через меню <span class=
            "guimenu">«Параметры»</span> → <span class=
            "guimenuitem">«Настройки интерфейса»</span> → <span class=
            "guimenuitem">«Настройка внешнего индекса»</span>, либо
            <span class="guimenu">«Запрос»</span> → <span class=
            "guimenuitem">«Настройка внешнего индекса»</span>. Более подробная
            информация доступна в разделе <a class="link" href="#RCL.SEARCH.GUI.MULTIDB" title=
            "3.2.11.&nbsp;Multiple indexes">внешние индексы
            в графическом интерфейсе</a>.</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name="idm492" id=
                  "idm492"></a>Создание дополнительного индекса: Пример на Windows
                  </h4>
                </div>
              </div>
            </div>
            <p>При работе в <span class="application">Recoll</span>
            на <span class="application">Windows</span> самым
            простым способом использования внешних индексов будет
            применение нескольких значков рабочего стола для запуска
            графического интерфейса программы. Для организации такой работы требуется следующий порядок действий:</p>
            <div class="procedure">
              <ol class="procedure" type="1">
                <li class="step">
                  <p>Создайте в любом удобном для вас месте папку для размещения
                  новой конфигурации индекса.</p>
                </li>
                <li class="step">
                  <p>Выделите значок Recoll на рабочем столе,
                  скопируйте и вставьте его. Если при установке программы
                  значок рабочего стола не был создан, можно перетащить
                  на рабочий стол программу
                  recoll.exe из <code class=
                  "filename">C:\Program Files (X86)\Recoll</code>
                  правой клавишей мыши и затем выбрать <span class=
                  "guilabel">«Создать ярлык»</span> для создания
                  значка.</p>
                </li>
                <li class="step">
                  <p>Щёлкните правой клавишей мыши по новому значку и перейдите на вкладку
                  <span class=
                  "guilabel">«Свойства ярлыка»</span></p>
                </li>
                <li class="step">
                  <p>Измените значение поля <span class=
                  "guilabel">Объект</span> с исходного
                  <code class="filename">C:\Program Files
                  (x86)\Recoll\recoll.exe</code> на примерно следующую запись:</p>
                  <pre class=
                  "screen">"C:\Program Files (x86)\Recoll\recoll.exe" -c C:\путь\к\моему\новому\каталогу</pre>
                  <p>Если путь каталога содержит пробелы, то его необходимо
                    заключить в двойные кавычки.</p>
                </li>
                <li class="step">
                  <p>Сохраните новый значок нажатием кнопки «OK» и
                  дважды щёлкните по нему для запуска графического интерфейса
                  Recoll в новой конфигурации. В результате должно
                  открыться окно установки начальной конфигурации.</p>
                </li>
              </ol>
            </div>
            <p>Любой другой метод запуска графического интерфейса или
            программы <span class="command"><strong>recollindex</strong></span>
            с параметром <code class="literal">-c</code> или соответствующим значением
            переменной окружения RECOLL_CONFDIR также будет прекрасно работать.</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INDEXING.CONFIG.SENS" id=
                "RCL.INDEXING.CONFIG.SENS"></a>2.3.3.&nbsp;Чувствительность
                к регистру и диакритическим знакам</h3>
              </div>
            </div>
          </div>
          <p>Начиная с версии 1.18 в <span class="application">Recoll</span>
          возможно построение индекса с учётом
          чувствительности к регистру и диакритическим знакам,
          либо без таковой. Исходный поисковый запрос <code class=
          "literal">Résumé</code>, в первом случае фактически будет
          выглядеть как <code class="literal">Résumé</code>,
          а во втором — как <code class="literal">resume</code>.</p>
          <p>При этом поиск без чувствительности к регистру и диакритическим
          знакам может выполняться при любом типе индекса:
          в случае регистрозависимого индекса пользовательский запрос будет
          расширен до совпадения со всеми существующими в индексе вариантами
          регистра и диакритических знаков. При урезанном индексе перед
          выполнением поиска поисковый запрос приводится к стандартной форме.</p>
          <p>Неурезанный тип индекса различает регистр и
          диакритические знаки, позволяя, например, возвращать
          различные результаты при поисковом запросе <code class="literal">US</code> и
          <code class="literal">us</code>, а также <code class="literal">resume</code> и <code class=
          "literal">résumé</code>. Для получения более подробной информации
          ознакомьтесь с <a class="link" href="#RCL.SEARCH.CASEDIAC" title=
          "3.9.&nbsp;Search case and diacritics sensitivity">разделом
          о поиске с учётом регистра и диакритических знаков</a>.</p>
          <p>Тип создаваемого индекса регулируется параметром
          конфигурации <code class="literal">indexStripChars</code>,
          который изменяется только путём внесения изменения в конфигурационный
          файл. Любое такое изменение предполагает переиндексацию (автоматическая переиндексация
          программой <span class="application">Recoll</span> не предусмотрена), а также все
          параллельно используемые в поиске индексы должны принадлежать к одному типу
          (проверка средствами <span class="application">Recoll</span> не производится).</p>
          <p>По умолчанию, если не задан параметр <code class=
          "literal">indexStripChars</code>, <span class="application">Recoll</span> создаёт
          урезанную версию индекса.</p>
          <p>В качестве расплаты за дополнительные возможности неурезанный
          индекс будет занимать чуть больше места, чем урезанный (примерно на 10%).
          Поисковые запросы будут сложнее и выполнение их будет занимать чуть
          больше времени. Также необходимо учитывать, что данный функционал используется сравнительно редко,
          в связи с чем логично предположить возможность появления разного рода
          странностей в поведении программы.</p>
          <p>Одним из наиболее серьёзных последствий при применении
          неурезанного индекса может быть невозможность использования некоторых
          фраз и поиска с учётом расположения слов: в связи с необходимостью расширения
          каждого элемента поиска при создании всех комбинаций поиска на каком-то этапе мультипликативное
          расширение может выйти из под контроля.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INDEXING.CONFIG.THREADS" id=
                "RCL.INDEXING.CONFIG.THREADS"></a>2.3.4.&nbsp;Конфигурирование
                потоков индексирования (<span class=
                "application">Unix</span>-подобные системы)</h3>
              </div>
            </div>
          </div>
          <p>Примечание: вполне возможно, что чтение этого раздела конкретно для вас не представляет особой необходимости.
          Автоматическая конфигурация по умолчанию в подавляющем большинстве случаев
          прекрасно справляется. Более-менее общеполезной может быть только та часть, в которой
          говорится об отключении многопоточного режима. Поэтому, спешим предоставить эту информацию
          сразу. Отключение многопоточности обеспечивает следующее значение параметра в <code class="filename">recoll.conf</code>:</p>
          <pre class="programlisting">
            thrQSizes = -1 -1 -1
          </pre>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INDEXING.CONFIG.THREADS.DOCPREP" id=
                  "RCL.INDEXING.CONFIG.THREADS.DOCPREP"></a>Многопоточный режим
                  подготовки документа</h4>
                </div>
              </div>
            </div>
          <p>Служба индексирования <span class="application">Recoll</span> называется
          <span class=
          "command"><strong>recollindex</strong></span> и она может использовать
          многопоточность для увеличения скорости индексирования на многопроцессорных
          системах. На данный момент она работает на <span class=
          "application">Mac OS</span> и
          <span class="application">Unix</span>-подобных системах,
          но не на <span class="application">Windows</span>.</p>
          <p>Работа, выполняемая с файлами индекса, делится на несколько этапов,
          некоторые из которых могут исполняться в нескольких потоках. Имеются в виду следующие этапы работы:</p>
          <div class="orderedlist">
            <ol class="orderedlist" type="1">
              <li class="listitem">
                <p>Переход по файловой системе: данная операция всегда выполняется
                в основном потоке.</p>
              </li>
              <li class="listitem">
                <p>Преобразование файлов и извлечение данных.</p>
              </li>
              <li class="listitem">
                <p>Обработка текста (разбивка, стемминг и т.д.).</p>
              </li>
              <li class="listitem">
                <p>Обновление индекса <span class="application">Xapian</span>.</p>
              </li>
            </ol>
          </div>
          <p>Более подробно ознакомиться с настройкой индексирования
          <span class="application">Recoll</span> применительно
          к многопоточности можно и в <a class="ulink" href=
          "https://www.recoll.org/pages/idxthreads/threadingRecoll.html"
          target="_top">более содержательном документе</a> на
          эту тему.</p>
          <p>Конфигурация потоков контролируется двумя параметрами
          конфигурационного файла.</p>
          <div class="variablelist">
            <dl class="variablelist">
              <dt><span class="term"><code class=
              "varname">thrQSizes</code></span></dt>
              <dd>
                <p>Данная переменная определяет конфигурацию очереди входящих заданий.
                Всего может быть три очереди для этапов 2, 3 и 4, и этот параметр
                определяет глубину очереди для каждого этапа (три целочисленных
                значения). Если для какого-то конкретного этапа установлено значение -1,
                то для данного этапа очередь не используется и переходит к выполнению
                следующего этапа. Практика показала, что повышение глубины очереди не приводит
                к увеличению производительности. Значение 0 для первой очереди
                сообщает <span class="application">Recoll</span> о необходимости выполнения
                автоконфигурации (в данном случае больше ничего не требуется,
                параметр thrTCounts не используется) — это конфигурация по умолчанию.</p>
              </dd>
              <dt><span class="term"><code class=
              "varname">thrTCounts</code></span></dt>
              <dd>
                <p>Данный параметр определяет число потоков, использующихся
                на каждом этапе. Если в качестве глубины очереди какого-либо этапа в предыдущем параметре
                указано значение -1, указанное здесь число потоков для данного этапа игнорируется.
                Для последнего этапа нет смысла использовать значение
                отличное от 1, поскольку обновление индекса
                <span class="application">Xapian</span> обязательно выполняется
                в однопоточном режиме (и защищено мьютексом).</p>
              </dd>
            </dl>
          </div>
          <div class="note" style=
          "margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Примечание</h3>
            <p>Если первое значение в <code class=
            "varname">thrQSizes</code> равно 0, <code class=
            "varname">thrTCounts</code> игнорируется.</p>
          </div>
          <p>В следующем примере используется три очереди (глубиной
          2), а также 4 потока для преобразования исходных документов,
          2 потока для обработки извлечённых из них текстов и один для обновления
          индекса. По результатам тестов эта конфигурация лучше всего обеспечивала
          работу тестируемой системы (четырёхпроцессорная с несколькими дисками).</p>
          <pre class="programlisting">
            thrQSizes = 2 2 2
            thrTCounts =  4 2 1
          </pre>
          <p>Нижеследующий пример работает с использованием одной очереди
          и полная обработка каждого документа выполняется
          одним потоком (в большинстве случаев несколько документов
          так или иначе будут обрабатываться параллельно). Потоки будут
          использовать взаимное исключение при входе в режим обновления
          индекса. На практике производительность в целом будет близка
          к прецедентам, но в некоторых случаях результат будет заметно хуже
          (например, архив Zip будет обрабатываться исключительно последовательно),
          поэтому вышеприведённый подход представляется более предпочтительным.
          Впрочем, попробуйте сами, результаты вашей работы могут оказаться иными…
          Последние два значения thrTCounts просто игнорируются.</p>
          <pre class="programlisting">
            thrQSizes = 2 -1 -1
            thrTCounts =  6 1 1
          </pre>
          <p>И уже знакомый нам заключительный пример отключает многопоточный режим работы.
          Индексирование будет выполняться в один поток.</p>
          <pre class="programlisting">thrQSizes = -1 -1 -1</pre>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INDEXING.OPERATION" id=
              "RCL.INDEXING.OPERATION"></a>2.4.&nbsp;Расписание
              обновления индекса</h2>
            </div>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.INDEXING.PERIODIC"
                id="RCL.INDEXING.PERIODIC"></a>2.4.1.&nbsp;Периодичность
                индексирования</h3>
              </div>
            </div>
          </div>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INDEXING.PERIODIC.EXEC" id=
                  "RCL.INDEXING.PERIODIC.EXEC"></a>Запуск
                  индексатора</h4>
                </div>
              </div>
            </div>
            <p>Программа <span class=
            "command"><strong>recollindex</strong></span> выполняет
            обновление индекса. Запустить его можно либо из
            командной строки, либо из меню <span class=
            "guimenu">«Файл»</span> в графическом интерфейсе <span class=
            "command"><strong>recoll</strong></span>.
            При запуске из графического интерфейса, индексирование
            будет работать с той конфигурацией <span class=
            "command"><strong>recoll</strong></span>, с которой приложение было
            запущено. При запуске из командной строки нестандартный
            конфигурационный каталог для <span class=
            "command"><strong>recollindex</strong></span> можно указать
            в переменной окружения <code class="envar">RECOLL_CONFDIR</code>
            или в параметре <code class="option">-c</code> <em class=
            "replaceable"><code>confdir</code></em>.</p>
            <p>Если программа <span class=
            "command"><strong>recoll</strong></span> при запуске
            не сможет найти индекс, то автоматически запустит
            процесс индексирования (если не будет выполнена отмена).</p>
            <p>В графическом интерфейсе меню
            <span class="guimenu">«Файл»</span> находятся элементы
            для запуска или остановки текущей операции индексирования.
            Если в данный момент индексирование не выполняется,
            то выбор ограничен элементами <span class="guimenuitem">«Обновить
            индекс»</span> и <span class="guimenuitem">«Пересоздать
            индекс»</span>. В первом случае будут обработаны только
            изменённые файлы, во втором случае индекс удаляется для
            обработки всех файлов.</p>
            <p>Управлять операциями индексирования с помощью графического
            интерфейса можно, как на Linux, так и на Windows. Остановка индексатора
            при этом выполняется с помощью элемента меню графического интерфейса
            <span class="command"><strong>recoll</strong></span>
            <span class="guimenu">«Файл»</span> → <span class=
            "guimenuitem">«Остановить индексирование»</span>.</p>
            <p>Кроме того, на Linux процесс индексирования <span class=
            "command"><strong>recollindex</strong></span>
            можно прервать отправкой прерывания
            (<span class="keysym">Ctrl-C</span>, SIGINT) или
            сигнала завершения процесса (SIGTERM).</p>
            <p>При остановке индексирования может пройти некоторое
            время до фактического завершения работы
            <span class=
            "command"><strong>recollindex</strong></span>,
            так как для корректного сброса и закрытия индекса
            требуется некоторое время.</p>
            <p>После прерывания индексирования, строй индекса может оказаться не совсем
            последовательным, так как некоторые операции,
            обычно выполняемые в конце процесса индексирования, могли быть
            пропущены (например, базы данных стемминга и орфографических
            вариантов могут оказаться непоследовательно заполненными или устаревшими).
            Для восстановления последовательности построения всех данных достаточно
            всего лишь снова запустить индексирование. Оно
            будет перезапущено в точке прерывания (будет выполнен
            обход по всему дереву файлов, но файлы, которые уже были
            индексированы до прерывания и для которых содержание индекса
            не устарело, повторному индексированию не подлежат).</p>
          </div>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INDEXING.PERIODIC.CMDLINE" id=
                  "RCL.INDEXING.PERIODIC.CMDLINE"></a>Командная строка
                  recollindex</h4>
                </div>
              </div>
            </div>
            <p><span class=
            "command"><strong>recollindex</strong></span> имеет
            большое количество параметров, описанных на <a class="ulink" href=
            "https://www.recoll.org/manpages/recollindex.1.html"
            target="_top">странице руководства</a>. Здесь будут
            описаны лишь некоторые из них.</p>
            <p>Параметр <code class="option">-z</code> сбрасывает
            индекс при запуске. Это практически полностью соответствует
            удалению файлов индекса (нюанс заключается в том, что
            версия формата файла <span class="application">Xapian</span>
            в данном случае останется прежней).</p>
            <p>Параметр <code class="option">-Z</code> принудительно
            обновляет индекс всех документов без предварительного
            сброса. Здесь не будет «начала с чистого листа», характерного
            для <code class="option">-z</code>, но выгода заключается
            в том, что индекс остаётся доступен для запросов в процессе
            переиндексирования, что может считаться серьёзным
            преимуществом при значительных размерах индекса
            (в некоторых ситуациях переиндексация может потребовать
            несколько дней).</p>
            <p>Параметр <code class="option">-k</code> обеспечивает
            принудительную повторную индексацию файлов, которые
            не получилось индексировать в прошлый раз,
            например, по причине отсутствия вспомогательной программы.</p>
            <p>Особый интерес также могут представлять параметры
            <code class="option">-i</code> и <code class=
            "option">-f</code>. <code class=
            "option">-i</code> позволяет индексировать список конкретных
            файлов (может передаваться с параметром командной строки или считываться
            из <code class="literal">stdin</code>). <code class=
            "option">-f</code> заставляет <span class=
            "command"><strong>recollindex</strong></span> игнорировать
            параметры выбора файлов из конфигурации.
            В совокупности эти параметры позволяют выстроить собственный
            процесс выбора файлов для некоторой области файловой системы,
            путём добавления каталога верхнего уровня в список <code class=
            "varname">skippedPaths</code> и применения соответствующего
            метода выбора файлов с целью построения списка файлов для передачи
            <span class="command"><strong>recollindex</strong></span>
            <code class="option">-if</code>. Простейший пример:</p>
            <pre class=
            "programlisting">    find . -name indexable.txt -print | recollindex -if</pre>
            <p><span class=
            "command"><strong>recollindex</strong></span>
            <code class="option">-i</code> вместо входа в
            подкаталоги, указанные в качестве параметра, просто
            добавляет их в качестве элементов индекса. Построение полного
            списка файлов осуществляется здесь с помощью внешнего средства
            выбора файлов.</p>
          </div>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INDEXING.PERIODIC.AUTOMAT" id=
                  "RCL.INDEXING.PERIODIC.AUTOMAT"></a>Linux: использование
                  <span class=
                  "command"><strong>cron</strong></span> для
                  автоматизации индексирования</h4>
                </div>
              </div>
            </div>
            <p>Наиболее стандартным способом организации процесса индексирования
            являются выполняемые в ночное время задания cron. Например,
            следующая запись <code class="filename">crontab</code> обеспечит
            проведение ежедневного индексирования в 3:30AM (при этом <span class=
            "command"><strong>recollindex</strong></span> предполагает, что
            путь к индексу находится в PATH):</p>
            <pre class=
            "screen">30 3 * * * recollindex &gt; /some/tmp/dir/recolltrace 2&gt;&amp;1</pre>
            <p>То же самое можно выполнять и с помощью <span class=
            "command"><strong>anacron</strong></span>:</p>
            <pre class=
            "screen">1  15  su mylogin -c "recollindex recollindex &gt; /tmp/rcltraceme 2&gt;&amp;1"</pre>
            <p>Графический интерфейс <span class="application">Recoll</span>
            предусматривает возможность управления заданиями <code class="filename">crontab</code>
            для <span class="command"><strong>recollindex</strong></span>. Для этого необходимо
            зайти в соответствующий диалог с помощью меню <span class=
            "guimenu">«Настройки»</span> → <span class=
            "guimenuitem">«Расписание индексирования»</span>. Операция
            выполняется с помощью обычной службы <span class=
            "command"><strong>cron</strong></span> и не предполагает
            доступа ко всем имеющимся возможностям планирования <span class=
            "command"><strong>cron</strong></span></span>.
            Создаваемые этим инструментом задания отмечаются маркером
            <code class="literal">RCLCRON_RCLINDEX=</code>, который позволяет
            отличать нужные инструменту записи. Соответственно, неизбежен побочный
            эффект в виде установки для процесса переменной окружения,
            фактически не использующейся, а проставляемой лишь в качестве маркера.</p>
            <p>Для внесения изменений в <code class=
            "filename">crontab</code> обычно применяется команда <span class=
            "command"><strong>crontab</strong></span> <code class=
            "option">-e</code> (которая запускает редактор
            <span class="command"><strong>vi</strong></span>
            для редактирования файла). В каждой конкретной системе для этого могут использоваться и другие, более
            совершенные инструменты.</p>
            <p>Необходимо осознавать возможность существования различий между
            интерактивной средой окружения командной строки текущей системы и
            средой окружения командной строки, применяемой командами crontab.
            В особенности это может касаться переменной PATH. Рекомендуется
            ознакомиться с руководством crontab для получения информации о возможных проблемах.</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.INDEXING.MONITOR"
                id="RCL.INDEXING.MONITOR"></a>2.4.2.&nbsp;Индексирование
                в режиме реального времени</h3>
              </div>
            </div>
          </div>
          <p>Отслеживание или индексирование в режиме реального времени
          выполняется путём запуска команды <span class=
          "command"><strong>recollindex</strong></span>
          <code class="option">-m</code>. С этим параметром,
          <span class="command"><strong>recollindex</strong></span>
          будет постоянно отслеживать изменения файлов и обновлять
          индекс.</p>
          <p>На ОС <span class="application">Windows</span>,
          процесс отслеживания запускается из графического интерфейса <span class=
          "command"><strong>recoll</strong></span> в меню <span class=
          "guilabel">«Файл»</span>. На <span class=
          "application">Unix</span>-подобных системах, существуют иные
          возможности, которые будут раскрыты в последующих разделах.</p>
          <p>При работе в режиме реального времени в меню <span class=
           "guimenu">«Файл»</span> графического интерфейса <span class=
          "command"><strong>recoll</strong></span>  доступны две операции:
          <span class="guimenuitem">«Остановить»</span> и
          <span class="guimenuitem">«Запустить пошаговый проход»</span>.</p>
          <p>Операция <span class="guimenuitem">«Запустить пошаговый проход»
          </span> фактически перезапускает индексатор для
          выполнения полного обхода индексируемой области с
          обработкой изменённых файлов, а затем вновь переключается
          на режим отслеживания. Эта операция приносит лишь ограниченную пользу,
          и, большей частью, лишь в случаях, когда конфигурация индексатора настроена
          на отсрочку обновлений или для немедленной принудительной 
          перестройки данных стемминга и фонетических вариантов,
          обрабатываемых индексатором в режиме реального времени
          лишь через определённые промежутки времени.</p>
          <p>При всём удобстве индексирования данных в режиме реального
          времени часто повторяющаяся индексация может создавать значительную
          нагрузку на систему при изменении таких файлов, как папка
          электронной почты.
          Отслеживание больших файловых деревьев также заметно 
          нагружает системные ресурсы. Поэтому вряд ли имеет смысл
          включать этот режим на маломощных системах.
          Периодического индексирования в большинстве случаев бывает
          вполне достаточно.</p>
          <p>Версия <span class="application">Recoll</span> 1.24
          позволяет задавать конфигурационный параметр <a class="link" href=
          "#RCL.INSTALL.CONFIG.RECOLLCONF.MONITORDIRS">monitordirs</a>
          для указания определённого набора индексируемых файлов,
          которые будут отслеживаться в режиме реального времени.
          В такой ситуации пошаговый проход по всему дереву
          может быть запущен либо путём перезапуска индексатора,
          либо просто запуском <span class=
          "command"><strong>recollindex</strong></span>, который
          уведомит запущенный процесс. Меню графического интерфейса <span class=
          "command"><strong>recoll</strong></span> также содержит
          элемент управления этим процессом.</p>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INDEXING.MONITOR.START.SYSTEMD" id=
                  "RCL.INDEXING.MONITOR.START.SYSTEMD"></a><span class="application">Unix</span>-подобные
                  системы: автоматический запуск службы с помощью systemd</h4>
                </div>
              </div>
            </div>
            <p>Установка содержит два примера файлов (в каталоге
            <code class="filename">share/recoll/examples</code>)
            для запуска службы индексирования с помощью <span class=
            "application">systemd</span>.</p>
            <p><code class="filename">recollindex.service</code>
            используется для запуска <span class=
            "command"><strong>recollindex</strong></span> в качестве
            службы пользователя. Индексатор будет запускаться при входе
            пользователя в систему и работать до тех пор, пока сеанс активен.</p>
            <p><code class="filename">recollindex@.service</code>
            является шаблоном службы, которая будет использоваться
            для запуска индексатора в процессе загрузки и работать
            от имени конкретного пользователя.
            Это может быть полезно при запуске текстового поиска
            в качестве общей службы (например, когда пользователи
            получают доступ к ней по WEB UI).</p>
            <p>Если конфигурация настроена именно так, то юнит-файлы
            в системе должны находиться в пути systemd по умолчанию
            (обычно <code class=
            "filename">/usr/lib/systemd/system/</code> и
            <code class="filename">/usr/lib/systemd/user/</code>).
            В противном случае, может возникнуть необходимость
            скопировать туда файлы перед запуском службы.</p>
            <p>При установке юнит-файлов в соответствующем месте расположения
            пользовательский юнит может быть запущен с помощью
            следующих команд:</p>
            <pre class=
            "programlisting">systemctl --user daemon-reload
systemctl --user enable --now recollindex.service</pre>
            <p>При запуске от имени суперпользователя системный юнит-файл может быть задан под определённого
            пользователя:</p>
            <pre class="programlisting">systemctl daemon-reload
systemctl enable --now recollindex@<code class=
"varname">username</code>.service</pre>
            <p>(Разумеется, вместо <code class="varname">username</code> в этом примере необходимо
            подставить настоящее имя пользователя).</p>
          </div>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INDEXING.MONITOR.START" id=
                  "RCL.INDEXING.MONITOR.START"></a><span class=
                  "application">Unix</span>-подобные системы: автоматический
                  запуск службы из сеанса рабочего стола</h4>
                </div>
              </div>
            </div>
            <p>На <span class="application">KDE</span>,
            <span class="application">Gnome</span> и некоторых других
            средах рабочего стола, служба может быть автоматически
            запущена при входе в систему во время создания файла рабочего
            стола в каталоге <code class=
            "filename">~/.config/autostart</code>. Выполнить эту настройку
            можно с помощью графического интерфейса <span class=
            "application">Recoll</span>. Перейдите в меню <span class=
            "guimenu">«Настройки»-&gt;«Расписание индексирования»</span>.</p>
            <p>В более устаревшей конфигурации <span class="application">X11</span>
            запуск службы обычно выполнялся из сценария
            сеанса пользователя.</p>
            <p>Сценарий <code class="filename">rclmon.sh</code>
            можно использовать для простого запуска и остановки службы.
            Он находится в каталоге <code class="filename">examples</code>
            (обычно <code class=
            "filename">/usr/local/[share/]recoll/examples</code>).</p>
            <p>Например, хорошо известные сеансы на основе <span class=
            "application">xdm</span> могут иметь сценарий
            <code class="filename">.xsession</code> со следующими
            строками на конце:</p>
            <pre class=
            "programlisting">recollconf=$HOME/.recoll-home
recolldata=/usr/local/share/recoll
RECOLL_CONFDIR=$recollconf $recolldata/examples/rclmon.sh start

fvwm</pre>
            <p>Запускается служба индексирования, а затем и предполагаемый сеансом
            оконный менеджер.</p>
            <p>По умолчанию служба индексирования будет отслеживать
            состояние сеанса X11 и прекратит работу при его завершении, но
            необходимости в полном отключении нет. (Отслеживание сервера
            <span class="application">X11</span> можно отключить
            с помощью параметра <code class=
            "option">-x</code> с командой <span class=
            "command"><strong>recollindex</strong></span>).</p>
            <p>Если службу планируется использовать вне всякой связи с сеансом
            <span class="application">X11</span>, необходимо добавить
            параметр <code class="option">-x</code> для отключения
            отслеживания сеанса <span class="application">X11</span>
            (в противном случае служба не запустится).</p>
          </div>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INDEXING.MONITOR.DETAILS" id=
                  "RCL.INDEXING.MONITOR.DETAILS"></a>Прочая
                  информация</h4>
                </div>
              </div>
            </div>
            <p><b>Журналирование.&nbsp;</b>По умолчанию сообщения от
            службы индексирования отправляются в тот же файл, который
            используется с интерактивными командами (<code class=
            "literal">logfilename</code>). Может возникнуть необходимость
            изменить это поведение путём настройки конфигурационных
            параметров <code class="varname">daemlogfilename</code> и <code class=
            "varname">daemloglevel</code>.
            Также обрезка файла журнала будет выполняться только при запуске
            службы. В случае постоянной работе службы файл журнала
            может вырастать до значительных размеров в зависимости от
            уровня журнала.</p>
            <p><b><span class="application">Unix</span>-подобные
            системы: увеличение ресурсов для inotify.&nbsp;</b>На
            системах Linux отслеживание большого дерева может потребовать
            увеличения ресурсов, доступных для inotify, которые
            обычно определяются в <code class=
            "filename">/etc/sysctl.conf</code>.</p>
            <pre class="programlisting">### inotify
#
# cat  /proc/sys/fs/inotify/max_queued_events   - 16384
# cat  /proc/sys/fs/inotify/max_user_instances  - 128
# cat  /proc/sys/fs/inotify/max_user_watches    - 16384
#
# -- Change to:
#
fs.inotify.max_queued_events=32768
fs.inotify.max_user_instances=256
fs.inotify.max_user_watches=32768</pre>
            <p>Усечение дерева или настройка значения параметра
            <code class="literal">max_user_watches</code>
            может быть особенно необходима, если индексирование
            завершается при выводе сообщения с кодом ошибки <code class=
            "literal">ENOSPC</code> (28) от <code class=
            "function">inotify_add_watch</code>.</p>
            <p><b>Уменьшение частоты повторной индексации для часто
            изменяющихся файлов.&nbsp;</b>При работе в режиме реального
            времени может возникнуть необходимость в индексации некоторых
            файлов, но чрезмерно частое их изменение оказывает повышенную
            нагрузку на систему. В конфигурации <span class=
            "application">Recoll</span> имеется параметр, позволяющий
            указывать минимальное время, ранее которого файл, представленный
            в виде шаблона с символами подстановки, не может быть повторно индексирован.
            См. параметр <code class="varname">mondelaypatterns</code>
            в <a class="link" href=
            "#RCL.INSTALL.CONFIG.RECOLLCONF.MISC" title=
            "Miscellaneous parameters">разделе
            конфигурации</a>.</p>
          </div>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INDEXING.NOTES" id=
              "RCL.INDEXING.NOTES"></a>2.5.&nbsp;Прочие
              заметки об индексировании</h2>
            </div>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.INDEXING.PDF" id=
                "RCL.INDEXING.PDF"></a>2.5.1.&nbsp;Обработчик входных
                файлов PDF</h3>
              </div>
            </div>
          </div>
          <p>Формат PDF очень важен для научной и технической документации,
          а также для архивирования документов. Он наделён
          широкими возможностями по хранению метаданных в составе
          документа, и эти возможности получили реальное применение на практике.</p>
          <p>Соответственно, обработчик входных файлов PDF <span class=
          "command"><strong>rclpdf.py</strong></span> отличается от других обработчиков
          наличием более широких функциональных возможностей, а также
          более тонкой настройкой. В частности,
          <span class="command"><strong>rclpdf.py</strong></span>
          способен выполнять следующие функции:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>Извлечение конкретных тегов метаданных из пакета XMP при соответствующей настройке.</p>
              </li>
              <li class="listitem">
                <p>Извлечение вложенных PDF-файлов.</p>
              </li>
              <li class="listitem">
                <p>Автоматическое распознавание символов в случае отсутствия
                текста в документе. Эта функция выполняется путём запуска внешней
                программы, которая на данный момент описана
                в <a class="link" href="#RCL.INDEXING.OCR" title=
                "2.5.2.&nbsp;Running OCR on image documents">отдельном
                разделе</a>, так как OCR-система также может
                распознавать текст в файлах изображений отдельно от формата PDF.</p>
              </li>
            </ul>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name="RCL.INDEXING.PDF.XMP"
                  id="RCL.INDEXING.PDF.XMP"></a>Извлечение полей XMP</h4>
                </div>
              </div>
            </div>
            <p>Сценарий <code class="filename">rclpdf.py</code>
            в <span class="application">Recoll</span>, начиная с версии
            1.23.2, умеет извлекать поля метаданных XMP
            с помощью команды <span class=
            "command"><strong>pdfinfo</strong></span>
            (обычно находится в составе <span class=
            "application">poppler-utils</span>). Контролируется
            переменной конфигурации <a class="link" href=
            "#RCL.INSTALL.CONFIG.RECOLLCONF.PDFEXTRAMETA">pdfextrameta</a>,
            в которой указываются извлекаемые теги и, по-возможности,
            присваиваемые им имена.</p>
            <p>В переменной <a class="link" href=
            "#RCL.INSTALL.CONFIG.RECOLLCONF.PDFEXTRAMETAFIX">pdfextrametafix</a>
            можно указать файл с кодом Python
            для изменения полей метаданных (доступно для
            <span class="application">Recoll</span> 1.23.3 и
            более поздних версий; у версии 1.23.2 эквивалентный код встроен
            в сценарий обработчика). Пример:</p>
            <pre class="programlisting">import sys
import re

class MetaFixer(object):
def __init__(self):
pass

def metafix(self, nm, txt):
if nm == 'bibtex:pages':
txt = re.sub(r'--', '-', txt)
elif nm == 'someothername':
# do something else
pass
elif nm == 'stillanother':
# etc.
pass

return txt
def wrapup(self, metaheaders):
pass</pre>
            <p>Если определён метод «metafix()», то он вызывается
            для каждого поля метаданных. Для каждого документа PDF
            cоздаётся новый объект MetaFixer (поэтому объект может
            сохранять состояние для выполнения таких операций, как
            устранение дублирующихся значений).
            Если же определён метод «wrapup()», то он вызывается только
            после завершения обработки полей XMP со всеми метаданными
            в качестве параметра, представленными в виде массива пар
            «(nm, val)». При этом сохраняется возможность применения
            альтернативного подхода для изменения или добавления/удаления
            полей.</p>
            <p>Более подробная информация по индексированию свойств XMP для файлов PDF
            доступна на <a class="ulink" href=
            "https://www.recoll.org/pages/recoll_XMP/index.html"
            target="_top">этой странице</a>.</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INDEXING.PDF.ATTACH" id=
                  "RCL.INDEXING.PDF.ATTACH"></a>Индексирование вложенных PDF-файлов</h4>
                </div>
              </div>
            </div>
            <p>При установке <span class="application">pdftk</span>,
            а также конфигурационной переменной <a class="link" href=
            "#RCL.INSTALL.CONFIG.RECOLLCONF.PDFATTACH">pdfattach</a>,
            обработчик входных PDF-файлов будет пытаться
            извлекать PDF-вложения для индексирования в виде
            поддокументов PDF-файла. Эта фукнция отключена по умолчанию
            в связи с тем, что вызывает некоторое замедление индексирования
            PDF-файлов, даже если ни одно вложение не будет обнаружено (на моём
            опыте вложения PDF-файлов встречаются достаточно редко).</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.INDEXING.OCR" id=
                "RCL.INDEXING.OCR"></a>2.5.2.&nbsp;Запуск распознавания
                символов (OCR) на файлах изображений</h3>
              </div>
            </div>
          </div>
          <p>Если обрабатываемый файл не содержит текста, то обработчик входных PDF-файлов <span class="application">Recoll</span>
          может вызвать внешнюю OCR-программу. Данные OCR сохраняются в кеше отдельных файлов
          для предотвращения внесения каких-либо изменений в оригиналы.</p>
          <p>Следует учитывать, что при возможности внесения изменений
          в файлы (или их копии), лучше всего запустить модуль
          <a class="ulink" href=
          "https://ocrmypdf.readthedocs.io/en/latest/index.html"
          target="_top">OCRmyPDF</a> (либо аналогичный), который добавляет текстовый слой в сам
          исходный PDF-файл (например, это позволяет открывать из <span class=
          "application">Recoll</span> документ в просмотрщике PDF-файлов
          непосредственно в месте найденного поискового запроса с возможностью
          выполнения вторичного поиска встроенным инструментом).</p>
          <p>Для того чтобы включить функцию распознавания символов (OCR)
          в <span class="application">Recoll</span>, необходимо установить
          OCR-приложение (<span class="application">tesseract</span>
          или <span class="application">ABBYY</span>), включить OCR в
          обработчике PDF-файлов (для чего в конфигурационном файле индекса
          переменная <code class="literal">pdfocr</code> устанавливается в значение
          <code class="literal">1</code>), затем следует указать метод работы OCR
          в <span class="application">Recoll</span> путём установки
          <a class="link" href="#RCL.INSTALL.CONFIG.RECOLLCONF.OCR"
          title="Parameters for OCR processing">переменных
          конфигурации</a>. Все параметры можно локализовать в
          подкаталогах с помощью обычного механизма основной конфигурации
          (в разделах для указания путей).</p>
          <p>Пример фрагмента конфигурационного файла <code class=
          "filename">recoll.conf</code>:</p>
          <pre class="programlisting">pdfocr = 1
ocrprogs = tesseract
pdfocrlang = eng</pre>
          <p>Основное обновление этой функции произошло в <span class=
          "application">Recoll</span> 1.26.5. В более ранних версиях
          содержался менее полный функционал без кеширования при
          запуске внешней программы OCR в обработчике PDF-файлов. Новая функция
          обладает следующими возможностями:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>Вывод OCR кешируется и сохраняется в отдельных
                файлах. Кеширование полностью основано на хэш-значении
                исходного содержимого файла, чтобы исключить привязку
                к его имени. Основываясь на путях размещения, первый слой
                обеспечивает быстрое выполнение операций
                для неизменявшихся (неперемещённых) файлов, а хэш-данные
                (которые всё ещё обрабатываются на порядок быстрее, чем OCR)
                повторно вычисляются только в случае их перемещения.
                OCR выполняется только в том случае, если файл ещё не обрабатывался или был изменён.</p>
              </li>
              <li class="listitem">
                <p>Добавлена поддержка специальной программы в виде простого модуля Python,
                благодаря чему возможна работа с любым OCR-движком для выполнения операций из командной строки.</p>
              </li>
              <li class="listitem">
                <p>Изначально содержит модули <span class=
                "application">tesseract</span> (Linux и Windows),
                и <span class="application">ABBYY
                FineReader</span> (на Linux тестировалось работа с версией 11).
                ABBYY FineReader является коммерческим продуктом с закрытым
                исходным кодом, но в ряде случаев работает лучше, чем
                tesseract.</p>
              </li>
              <li class="listitem">
                <p>OCR на данный момент вызывается только из обработчика PDF-файлов,
                но использование его для других типов изображений тоже не должно представлять никаких трудностей.</p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.INDEXING.STT" id=
                "RCL.INDEXING.STT"></a>2.5.3.&nbsp;Работа программ
                распознавания речи с аудиофайлами</h3>
              </div>
            </div>
          </div>
          <p>Если доступна программа <span class="orgname">OpenAI</span>
          <span class="application">Whisper</span> и в конфигурационных
          файлах установлены соответствующие параметры, то обработчик
          аудиофайлов <span class="application">Recoll</span> может
          запустить распознавание речи для аудиофайлов и полученный
          текст будет проиндексирован. Более подробную информацию см.
          в соответствующем <a class="ulink" href=
          "https://www.recoll.org/faqsandhowtos/IndexAudioWhisper.html"
          target="_top"> разделе «Вопросов и ответов»</a>.</p>
          <p>Результаты распознавания речи будут сохраняться в кеше
          точно также, как и результаты распознавания символов (OCR)
          изображения.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.INDEXING.REMOVABLE"
                id=
                "RCL.INDEXING.REMOVABLE"></a>2.5.4.&nbsp;Съёмные
                носители</h3>
              </div>
            </div>
          </div>
          <p>Изначально в <span class="application">Recoll</span>
          отсутствовала поддержка по индексированию съёмных устройств
          (переносных дисков, ключей USB, и т.д.). В последних версиях
          ситуация несколько улучшилась и поддержка индексирования съёмных
          устройств производится одним из двух способов:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>Путём индексирования тома в основной, фиксированный
                индекс с гарантированным завершением индексирования до удаления
                тома из системы
                (начиная с <span class="application">Recoll</span> 1.25.2).</p>
              </li>
              <li class="listitem">
                <p>Путём сохранения индекса тома на самом томе
                (начиная с <span class="application">Recoll</span>
                1.24).</p>
              </li>
            </ul>
          </div>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INDEXING.REMOVABLE.MAIN" id=
                  "RCL.INDEXING.REMOVABLE.MAIN"></a>Индексирование
                  съёмных носителей в основной индекс</h4>
                </div>
              </div>
            </div>
            <p>Начиная с версии 1.25.2, <span class=
            "application">Recoll</span> использует простой способ,
            гарантирующий, что данные индекса отсутствующего тома
            не будут удалены. Это обеспечивается при соблюдении двух условий:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style=
              "list-style-type: disc;">
                <li class="listitem">
                  <p>Точка монтирования тома должна входить в список
                  <code class="literal">topdirs</code>.</p>
                </li>
                <li class="listitem">
                  <p>Каталог для монтирования тома должен быть пустым (когда
                  том не смонтирован).</p>
                </li>
              </ul>
            </div>
            <p>Если <span class=
            "command"><strong>recollindex</strong></span> при запуске
            обнаружит, что один из каталогов в составе <code class="literal">topdirs</code>
            не содержит данных, все существующие для этого дерева данные при обходе
            индексирования будут сохранены (данные для этой области не будут очищены).</p>
          </div>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INDEXING.REMOVABLE.SELF" id=
                  "RCL.INDEXING.REMOVABLE.SELF"></a>Автономные
                  тома</h4>
                </div>
              </div>
            </div>
            <p>Начиная с <span class="application">Recoll</span> 1.24,
            появилась возможность построения автономных наборов данных,
            включая конфигурационный каталог <span class="application">Recoll</span>
            и индекс вместе с индексируемыми документами, а также перемещение
            такого набора данных (например, копирование его на USB-диск) без
            необходимости настройки конфигурации для обращения к индексу.</p>
            <div class="note" style=
            "margin-left: 0.5in; margin-right: 0.5in;">
              <h3 class="title">Примечание</h3>
              <p>Эта функция предназначена только для выполнения запроса. Обновление
              индекса может осуществляться только в его исходном местоположении.
              Если обновление необходимо выполнить из другого расположения,
              то индекс должен быть построен заново.</p>
            </div>
            <p>Принцип действия заключается в том, что в конфигурации
            сохраняется расположение исходного конфигурационного каталога,
            который должен находится на съёмном носителе. Если в дальнейшем
            том будет смонтирован в любом другом месте, <span class=
            "application">Recoll</span> настроит пути, сохранённые
            в индексе, по разнице между исходным и текущим расположениями
            конфигурационного каталога.</p>
            <p>Ниже приведён сценарий, предназначение которого вкратце можно
            охарактеризовать как создание конфигурации и индекса <span class="application">Recoll</span>
            в заданном каталоге (передаётся в одном параметре).
            Итоговый набор данных (файлы +
            каталог recoll) позднее можно переместить на CDROM или
            флешк-диск. Более подробное объяснение следует ниже
            сценария.</p>
            <pre class="programlisting">#!/bin/sh

fatal()
{
echo $*;exit 1
}
usage()
{
fatal "Usage: init-recoll-volume.sh &lt;top-directory&gt;"
}

test $# = 1 || usage
topdir=$1
test -d "$topdir" || fatal $topdir should be a directory

confdir="$topdir/recoll-config"
test ! -d "$confdir" || fatal $confdir should not exist

mkdir "$confdir"
cd "$topdir"
topdir=`pwd`
cd "$confdir"
confdir=`pwd`

(echo topdirs = '"'$topdir'"'; \
echo orgidxconfdir = $topdir/recoll-config) &gt; "$confdir/recoll.conf"

recollindex -c "$confdir"</pre>
            <p>Приведённые ниже примеры предполагают наличие
            набора данных в <code class=
            "filename">/home/me/mydata/</code>, индекс конфигурации
            и данные которого находятся в <code class=
            "filename">/home/me/mydata/recoll-confdir</code>.</p>
            <p>Для выполнения запросов после перемещения набора данных,
            необходимо выполнить следующие действия:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style=
              "list-style-type: disc;">
                <li class="listitem">
                  <p>В главном конфигурационном файле переменная
                  <a class="link" href=
                  "#RCL.INSTALL.CONFIG.RECOLLCONF.ORGIDXCONFDIR">orgidxconfdir</a>
                  должна определять исходное расположение конфигурационного каталога
                  (соответственно, переменная <code class=
                  "filename">orgidxconfdir=/home/me/mydata/recoll-confdir</code>
                  должна быть определена в файле <code class=
                  "filename">/home/me/mydata/recoll-confdir/recoll.conf</code>
                  в примере выше).</p>
                </li>
                <li class="listitem">
                  <p>В перемещаемом каталоге с документами должен находиться конфигурационный каталог.
                  Например, при перемещении каталога <code class="filename">/home/me/mydata</code>,
                  конфигурационный каталог должен располагаться где-то в подкаталоге, например
                  <code class="filename">/home/me/mydata/recoll-confdir</code>
                  или <code class="filename">/home/me/mydata/sub/recoll-confdir</code>.</p>
                </li>
                <li class="listitem">
                  <p>Исходное расположение должно сохраняться для
                  элементов индекса, имеющих связь с конфигурационным каталогом по умолчанию
                  (преимущественно, <code class="literal">dbdir</code>). Абсолютными
                  должны быть только пути, ссылающиеся на сами документы
                  (например, значения переменной <code class="literal">topdirs</code>,
                  которые используются только при выполнении индексирования).</p>
                </li>
              </ul>
            </div>
            <p>Непосредственного участия пользователя требует только
            первый пункт, настройка значений по умолчанию в
            <span class="application">Recoll</span> совместима
            с третьим пунктом, а второй пункт не содержит ничего особенно нового.</p>
            <p>Если после перемещения необходимо будет скопировать
            конфигурационный каталог из набора данных (например,
            по причине медленной работы флеш-диска), то может потребоваться установка
            значения переменной <a class="link" href=
            "#RCL.INSTALL.CONFIG.RECOLLCONF.CURIDXCONFDIR">curidxconfdir</a>
            в копируемой конфигурации для указания размещения после копирования.
            Например, если <code class=
            "filename">/home/me/mydata</code> смонтирован на
            <code class="filename">/media/me/somelabel</code>, но
            конфигурационный каталог и индекс были скопированы
            в <code class="filename">/tmp/tempconfig</code>, то
            переменной <code class="literal">curidxconfdir</code> в файле
            <code class="filename">/tmp/tempconfig/recoll.conf</code> 
            необходимо присвоить значение <code class=
            "filename">/media/me/somelabel/recoll-confdir</code>.
            При этом <code class="literal">orgidxconfdir</code> сохранит
            прежнее значение <code class=
            "filename">/home/me/mydata/recoll-confdir</code> как в исходной
            версии, так и в копии.</p>
            <p>Если копирование конфигурации во внешний каталог осуществляется
            на постоянной основе, то удобнее будет написать сценарий для
            автоматизации этой процедуры. Однако обилие возможных
            вариантов не позволяет выполнять такую настройку
            непосредственно из <span class="application">Recoll</span>. В качестве
            примера можно привести вариант с копированием конфигурации, чтобы
            сделать её доступной для записи, оставляя при этом данные индекса
            на носителе вследствие слишком большого размера. Здесь в копируемой
            конфигурации необходимо будет задать переменную
            <code class="literal">dbdir</code>.</p>
            <p>При выполнении тех же манипуляций (<span class=
            "application">Recoll</span> 1.24) возникает возможность
            выполнения запросов из конфигурационного каталога с правами только для
            чтения (разумеется, функционал будет слегка урезан,
            например, в части пополнения истории запросов).</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.INDEXING.WEBQUEUE"
                id=
                "RCL.INDEXING.WEBQUEUE"></a>2.5.5.&nbsp;<span class="application">Unix</span>-подобные
                системы: индексирование истории веб-поиска</h3>
              </div>
            </div>
          </div>
          <p>С помощью расширения <span class="application">Firefox</span>,
          <span class="application">Recoll</span> может индексировать
          посещаемые пользователем веб-странички. Расширение имеет долгую историю:
          изначально оно было разработано для индексатора <span class=
          "application">Beagle</span>, потом было добавлено в
          <span class="application">Recoll</span>, а затем и в
          <span class="application">Firefox</span> <span class=
          "application">XUL</span> API. Настоящая версия расширения,
          размещённая в <a class="ulink" href=
          "https://addons.mozilla.org/en-US/firefox/addon/recoll-we/"
          target="_top">репозитории расширений Mozilla</a>, использует
          <span class="application">WebExtensions</span> API и
          работает с текущими версиями <span class=
          "application">Firefox</span>.</p>
          <p>Расширение работает путём копирования посещаемых веб-страниц
          в каталог очереди индексирования, после чего <span class=
          "application">Recoll</span> их обрабатывает, сохраняя данные
          в локальный кеш с последующей индексацией, а затем
          удаляет файлы из очереди.</p>
          <div class="note" style=
          "margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Локальный кеш не является архивом</h3>
            <p>Как уже упоминалось выше, Recoll сохраняет копии
            индексированных веб-страниц в локальный кеш (из которого данные берутся
            для предварительного просмотра или при сбросе индекса).
            При сбросе индекса кеш не изменяется, а используется
            для индексирования. Минимальный размер кеша задаётся
            в диалоговом окне <span class="guilabel">«Настройки
            индекса»</span> / <span class="guilabel">«История в веб»
            </span> (параметр <code class=
            "literal">webcachemaxmbs</code> в
            <code class="filename">recoll.conf</code>). При достижении
            минимального размера старые страницы начинают удаляться,
            чтобы очистить место для новых. Страницы, подлежащие хранению
            на неопределённое время, необходимо архивировать отдельно в другом месте.
            Во избежание удаления данных можно установить очень большой размер
            кеша, но сначала рекомендуется изучить соответствующую страницу «Практического
            руководства» для ознакомления с дополнительной информацией и возможными трудностями.</p>
          </div>
          <p>Функцию индексирования веб-поиска можно включить
          из графического интерфейса <span class="application">Recoll</span>
          в диалоговом окне <span class="guilabel">«Настройка индекса»</span>
          или путём редактирования конфигурационного файла (необходимо установить
          переменую <code class="varname">processwebqueue</code> в значение 1).</p>
          <p>Графический интрфейс <span class="application">Recoll</span> имеет
          инструмент для вывода и редактирования содержимого веб-кеша.
          (<span class="guimenu">«Инструменты»</span> → <span class=
          "guimenuitem">«Редактор веб-кэша»</span>)</p>
          <p>Команда <span class=
          "command"><strong>recollindex</strong></span> имеет два
          параметра для работы с веб-кешем:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem"><code class=
              "option">--webcache-compact</code> освобождает пространство
              от удалённых элементов. Может потребовать в два раза больше места,
              чем занимает веб-кеш.</li>
              <li class="listitem"><code class=
              "option">--webcache-burst <em class=
              "replaceable"><code>destdir</code></em></code> разбивает
              все имеющиеся элементы на пары файлов метаданных и данных,
              которые создаются внутри каталога <em class=
              "replaceable"><code>destdir</code></em></li>
            </ul>
          </div>
          <p>Более подробная информация по веб-индексирванию, его использованию
          и настройке конфигурации доступна в <a class="ulink" href=
          "https://www.recoll.org/faqsandhowtos/IndexWebHistory"
          target="_top">соответствующем разделе «Практического руководства» Recoll</a>.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.INDEXING.EXTATTR"
                id="RCL.INDEXING.EXTATTR"></a>2.5.6.&nbsp;<span class="application">Unix</span>-подобные
                системы и <span class="application">Mac
                OS</span>-подобные системы: использование расширенных
                атрибутов</h3>
              </div>
            </div>
          </div>
          <p>Пользовательские расширенные атрибуты представляют собой элементы информации,
          которые могут присваиваться любому файлу в наиболее современных файловых системах.</p>
          <p>Все расширенные атрибуты <span class="application">Recoll</span> обрабатывает
          как поля документов. При этом необходимо понимать, что большинство полей по умолчанию
          не индексируются. Активировать их индексацию можно путём установки префикса в конфигурационном файле
          <a class="link" href="#RCL.INSTALL.CONFIG.FIELDS" title=
          "5.4.3.&nbsp;The fields file"><code class=
          "filename">fields</code></a>.</p>
          <p>В <a class="ulink" href=
          "https://www.freedesktop.org/wiki/CommonExtendedAttributes"
          target="_top">стандартах freedesktop</a> определяется несколько
          специальных атрибутов, которые обрабатывает <span class="application">Recoll</span>:</p>
          <div class="variablelist">
            <dl class="variablelist">
              <dt><span class="term">mime_type</span></dt>
              <dd>
                <p>С помощью этого параметра переопределяется любое другое определение
                MIME-типа файла.</p>
              </dd>
              <dt><span class="term">charset</span></dt>
              <dd>
                <p>С помощью этого параметра определяется кодировка файла
                (главным образом, актуально для простых текстовых файлов).</p>
              </dd>
            </dl>
          </div>
          <p>Остальные атрибуты по умолчанию обрабатываются в виде полей
          <span class="application">Recoll</span> с тем же именем.</p>
          <p>В Linux префикс <code class="literal">user</code>
          удаляется из имени.</p>
          <p>Точнее настроить преобразование имени можно
          с помощью соответствующих <a class="link" href=
          "#RCL.INSTALL.CONFIG.FIELDS.XATTR" title=
          "Extended attributes in the fields file"><code class=
          "filename">полей</code> конфигурационного файла</a>.</p>
          <div class="note" style=
          "margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Установка даты изменения/создания
            документа</h3>
            <p>Некоторые документы имеют внутренний атрибут даты
            (например, электронные письма), однако большинство
            файлов получает дату из атрибута времени последнего
            изменения файла. Присвоить документу дату,
            отличную от заданной в атрибуте файла, можно путём установки
            особого расширенного атрибута. По неким малопонятным
            причинам имя этого атрибута программно задано как
            <code class="literal">modificationdate</code>. Его
            содержимое должно включать ASCII-символы десятичных
            целочисленных значений в формате времени Unix
            (секунд с начала эпохи). Пример командной строки
            Linux для установки этого конкретного поля представлен ниже.
            Команда <span class="command"><strong>date</strong></span>
            здесь возвращает параметр даты в формате времени Unix
            (секунд с начала эпохи).</p>
            <pre class="programlisting">
setfattr -n user.modificationdate -v `date -d '2022-09-30 08:30:00' +%s` /некий/файл</pre>
Подстановка даты затем происходит автоматически без необходимости
настройки файла <code class="filename">fields</code>.
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.INDEXING.EXTTAGS"
                id="RCL.INDEXING.EXTTAGS"></a>2.5.7.&nbsp;<span class="application">Unix</span>-подобные
                системы: импорт внешних тегов</h3>
              </div>
            </div>
          </div>
          <p>В процессе индексирования можно импортировать метаданные для
          каждого файла с помощью соответствующих команд. Это позволяет, например,
          извлекать данные тегов из внешнего приложения и сохранять их
          в поле для индексирования.</p>
          <p>Синтаксис конфигурации представлен в <a class="link" href=
          "#RCL.INSTALL.CONFIG.RECOLLCONF.METADATACMDS">описании
          поля <code class="literal">metadatacmds</code>
          </a> в основной главе по настройке конфигурации.</p>
          <p>Например, если для чего-то нужно, чтобы <span class=
          "application">Recoll</span> использовал подконтрольные
          <span class="application">tmsu</span> теги
          в поле с именем <em class="replaceable"><code>tags</code></em>,
          то необходимо добавить следующие строки:</p>
          <pre class="programlisting">[/некая/область/фс]
          metadatacmds = ; <em class=
"replaceable"><code>tags</code></em> = tmsu tags %f
        </pre>
          <div class="note" style=
          "margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Примечание</h3>
            <p>В зависимости от версии <span class=
            "application">tmsu</span> может возникнуть необходимость/желание
            добавить параметры, например: <code class=
            "literal">--database=/некая/бд</code>.</p>
          </div>
          <p>Может потребоваться ограничить обработку
          неким подмножеством дерева каталогов для ускорения
          процесса индексирования (<code class=
          "literal">[некая/область/фс]</code>).</p>
          <p>Не забудьте поставить точку с запятой между значением параметра и знаком равенства.</p>
          <p>В примере выше вывод <span class=
          "command"><strong>tmsu</strong></span> используется для установки
          значения поля с именем <em class=
          "replaceable"><code>tags</code></em>. Имя поля выбирается
          произвольно и для него с одинаковым успехом можно использовать как <em class=
          "replaceable"><code>tmsu</code></em>, так и любое другое имя, например, <em class=
          "replaceable"><code>myfield</code></em>.
          Однако <em class="replaceable"><code>tags</code></em> является
          псевдонимом стандартного поля <code class=
          "literal">keywords</code> в <span class=
          "application">Recoll</span>, и вывод <span class=
          "command"><strong>tmsu</strong></span> лишь  увеличит
          размер его содержимого. Это позволит избежать необходимости расширения
          <a class="link" href="#RCL.PROGRAM.FIELDS" title=
          "4.2.&nbsp;Field data processing">конфигурации полей</a>.</p>
          <p>Как только будет выполнено повторное индексирование (необходима
          принудительная переиндексация файла — сам <span class=
          "application">Recoll</span> необходимость переиндексации определить не сможет),
          можно будет выполнять поиск на языке запроса
          с использованием любых его псевдонимов: <em class=
          "replaceable"><code>tags:некие/альтернативные/значения</code></em>
          или <em class=
          "replaceable"><code>tags:все,эти,значения</code></em>.</p>
          <p>Индексатор не сможет обнаружить изменения в тегах, если
          сам файл не изменялся. Одним из вариантов
          решения этой проблемы может быть обновление времени файла <code class=
          "literal">ctime</code> при изменении тегов, соответствующих
          по функционалу расширенным атрибутам.
          Этого можно добиться с помощью пары команд <span class=
          "command"><strong>chmod</strong></span> или команды <code class="literal">touch
          -a</code>. Также можно просто привязать обновление тега
          к <code class="literal">recollindex -e -i</code>
          <em class=
          "replaceable"><code>/путь/к/файлу</code></em>.</p>
        </div>
      </div>
    </div>
    <div class="chapter">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a name="RCL.SEARCH" id=
            "RCL.SEARCH"></a>Глава&nbsp;3.&nbsp;Поиск</h1>
          </div>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.SEARCH.INTRODUCTION" id=
              "RCL.SEARCH.INTRODUCTION"></a>3.1.&nbsp;Введение</h2>
            </div>
          </div>
        </div>
        <p>Бесспорно, основной функцией <span class="application">Recoll</span>
        является получение результатов на конкретные запросы поиска. Для этого предусмотрено несколько
        интерфейсов, которые хорошо понимают простые запросы, состоящие
        из одного или нескольких слов, и в большинстве случаев возвращают
        соответствующие результаты.</p>
        <p>Однако для полноценного использования возможностей <span class=
        "application">Recoll</span> рекомендуется
        разобраться с процессом обработки запросов пользователя.
        Существует пять различных режимов поиска:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p>В режиме <code class="literal">«Все слова»</code>
              <span class="application">Recoll</span> ищет документы,
              содержащие все слова в запросе.</p>
            </li>
            <li class="listitem">
              <p>В режиме <code class="literal">«Язык запроса»</code> при отсутствии специального ввода
              поиск выполняется почти как в режиме <code class="literal">«Все
              слова»</code>, но на самом деле в нём скрыты большие возможности. Он позволяет
              наиболее полно использовать способности <span class="application">Recoll</span>.
              Может применяться из всех возможных интерфейсов (графическая оболочка, командная строка, веб-интерфейс, …)
              и <a class="link" href="#RCL.SEARCH.LANG" title=
              "3.5.&nbsp;The query language">подробно описан здесь</a>.</p>
            </li>
            <li class="listitem">
              <p>В режиме <code class="literal">«Любое слово»</code>
              <span class="application">Recoll</span> выполняет поиск
              документов, содержащих любое слово из состава имеющихся в поисковом
              запросе, предпочитая те документы, в которых этих слов содержится больше всего.</p>
            </li>
            <li class="listitem">
              <p>В режиме <code class="literal">«Имя файла»</code>
              <span class="application">Recoll</span> будет искать
              совпадения только с именами файлов, игнорируя их содержимое.
              Поскольку в данном случае набор индекса будет небольшим, то возможно применение
              таких средств, как левосторонние знаки подстановки,
              не опасаясь проблем с производительностью, что иногда
              может быть полезно.</p>
            </li>
            <li class="listitem">
              <p>Режим <code class="literal">«Сложный
              поиск»</code> в графическом интерфейсе не имеет никаких практических
              преимуществ перед использованием языка запросов,
              но позволяет пользователю строить сложные запросы без необходимости
              владения этим языком, а также избегать неоднозначностей
              толкования, поскольку обработка ввода перенаправляется пользователю.</p>
            </li>
          </ul>
        </div>
        <p>Все эти пять режимов ввода поддерживаются различными интерфейсами пользователя,
        которые описаны в следующих разделах.</p>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.SEARCH.GUI" id=
              "RCL.SEARCH.GUI"></a>3.2.&nbsp;Поиск с помощью
              графического интерфейса пользователя на основе библиотеки Qt</h2>
            </div>
          </div>
        </div>
        <p>Главный пользовательский интерфейс поиска программы <span class="command"><strong>recoll</strong></span>
        основан на библиотеке <span class="application">Qt</span>.</p>
        <p>Этот интерфейс имеет два варианта:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p>Простой поиск (по умолчанию, на основном экране)
              имеет одно поле для ввода нескольких слов или
              запроса на языке запросов.</p>
            </li>
            <li class="listitem">
              <p>Сложный поиск (соответствующее окно можно открыть либо в меню
              <span class="guilabel">«Инструменты»</span>, либо
              щелчком по значку на одноимённой панели инструментов)
              снабжён несколькими полями ввода, которые позволяют
              выстраивать логические условия, с дополнительным
              фильтрованием по типу файлов, расположению их в
              файловой системе, дате изменения и размеру.</p>
            </li>
          </ul>
        </div>
        <p>Инструмент <span class="guilabel">«Сложный поиск»</span>
        легче в использовании, но в действительности нисколько не мощнее варианта
        <span class="guilabel">«Простой поиск»</span>, когда он используется
        в режиме языка запросов. Данное имя сложилось исторически, хотя суть
        выполняемых процессов, вероятно, лучше передавало бы имя <span class=
        "guilabel">«Автоматизированный поиск»</span>.</p>
        <p>В большинстве текстовых полей, можно вводить запросы
        в их исходном виде, даже если они
        содержат знаки пунктуации или другие нетекстовые символы
        (например, <span class="application">Recoll</span> способен
        обрабатывать такие специфические строки, как адреса электронной
        почты).</p>
        <p>Расположение текста в порядке, отличном от привычного, может потребоваться, главным образом,
        для восточноазиатских языков (китайского, японского, корейского). Слова, состоящие из одного
        или нескольких символов, в этом случае необходимо разделять
        пробелом (обычно они пишутся без пробела).</p>
        <p>В некоторых случаях запрос может оказаться таким сложным,
        что может возникать потребность его повторного использования
        с возможностью внесения некоторых изменений. <span class=
        "application">Recoll</span> способен сохранять и восстанавливать такие запросы.
        См. <a class="link" href="#RCL.SEARCH.SAVING" title=
        "3.2.16.&nbsp;Saving and restoring queries">Сохранение и
        восстановление запросов</a>.</p>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.GUI.SIMPLE"
                id="RCL.SEARCH.GUI.SIMPLE"></a>3.2.1.&nbsp;Простой
                поиск</h3>
              </div>
            </div>
          </div>
          <div class="procedure">
            <ol class="procedure" type="1">
              <li class="step">
                <p>Запустите программу <span class=
                "command"><strong>recoll</strong></span>.</p>
              </li>
              <li class="step">
                <p>При необходимости выберите режим поиска: <span class=
                "guilabel">«Любое слово»</span>, <span class=
                "guilabel">«Все слова»</span>, <span class=
                "guilabel">«Имя файла»</span> или <span class=
                "guilabel">«Язык запросов»</span>.</p>
              </li>
              <li class="step">
                <p>Введите слово или слова запроса в текстовом поле в верхней части окна.</p>
              </li>
              <li class="step">
                <p>Щёлкните по кнопке <span class="guilabel">«Поиск»</span>
                или нажмите клавишу <span class=
                "keycap"><strong>Enter</strong></span> для запуска поиска.</p>
              </li>
            </ol>
          </div>
          <p>В качестве режима поиска по умолчанию используется <a class="link"
          href="#RCL.SEARCH.LANG" title=
          "3.5.&nbsp;The query language"><span class=
          "guilabel">«Язык запросов»</span></a>. Без специальных
          указаний выполняется лишь поиск документов, содержащих все
          слова поискового запроса (чем больше слов, тем лучше будут
          результаты поиска), практически также, как в режиме <span class="guilabel">«Все
          слова»</span>.</p>
          <p>В режиме <span class="guilabel">«Любое слово»</span> выполняется поиск
          документов, содержащих хотя бы одно из имеющихся слов.</p>
          <p>В режиме <span class="guilabel">«Имя файла»</span> выполняется
          поиск только по именам файлов, а не по их содержимому.</p>
          <p>Во всех режимах поиска можно расширить элемент поиска с помощью
          знаков подстановки (<code class="literal">*</code>,
          <code class="literal">?</code>, <code class=
          "literal">[]</code>). См. более подробную информацию в
          <a class="link" href="#RCL.SEARCH.WILDCARDS" title=
          "3.6.1.&nbsp;Wildcards">разделе о знаках подстановки</a>.</p>
          <p>Во всех режимах, за исключением <span class="guilabel">«Имя
          файла»</span>, можно выполнять поиск точных фраз (смежных
          слов в заданном порядке) путём заключения ввода в двойные
          кавычки. Например: <code class="literal">"virtual
          reality"</code>.</p>
          <p>Функции <span class="guilabel">Языка запросов</span>
          описаны в <a class="link" href=
          "#RCL.SEARCH.LANG" title="3.5.&nbsp;The query language">
          отдельном разделе</a>.</p>
          <p>При использовании урезанного индекса (по умолчанию),
          регистр символов не оказывает влияния на результаты поиска,
          за тем исключением, что можно отключить поиск по однокоренным
          словам для любого элемента поиска при вводе его текста с прописной буквы.
          Например: при вводе слова <code class="literal">floor</code>
          обычно поиск будет выполняться по словам <code class=
          "literal">flooring</code>, <code class=
          "literal">floored</code>, и т.д, но поиск по слову
          <code class="literal">Floor</code> будет включать только слово
          <code class="literal">floor</code> в любом регистре.
          При необходимости поиск по словоформам можно также полностью отключить в настройках.
          При использовании неурезанного индекса <a class="link"
          href="#RCL.SEARCH.CASEDIAC" title=
          "3.9.&nbsp;Search case and diacritics sensitivity">правила
          будут ещё немного сложнее</a>.</p>
          <p><span class="application">Recoll</span> запоминает
          несколько последних запросов, выполнявшихся пользователем.
          Непосредственно обратиться к истории запросов
          можно нажатием на кнопку с изображением часов справа от поля ввода
          запроса при отсутствии в нём текста.
          В противном случае история запросов используется для вставки завершения
          запроса (см. далее). Запоминаются только тексты запросов,
          но не использовавшиеся с ними режимы («все слова»/«любое слово»/«имя файла»).</p>
          <p>При вводе текста область поиска <span class=
          "command"><strong>recoll</strong></span> будет отображать
          возможные варианты завершения строки, фильтруемые из истории
          и элементов поиска в индексе. Отключить автодополнение можно с помощью
          соответствующего параметра настройки.</p>
          <p>Двойной щелчок по слову в списке результатов или
          в окне просмотра добавляет его в простое поле ввода.</p>
          <p>В режиме поиска <span class=
          "guilabel">«Все слова»</span> или <span class="guilabel">«Любое
          слово»</span> в поле ввода можно вставить любой скопированный
          текст со всеми знаками пунктуации, переносами строк и прочими символами,
          за исключением символов подстановки (допускаются лишь одиночные символы <code class=
          "literal">?</code>). <span class=
          "application">Recoll</span> будет обрабатывать эти слова и выполнять
          осмысленный поиск. В этом заключается самое серьёзное отличие
          указанных режимов от режима <span class="guilabel">«Язык
          запросов»</span>, где необходимо соблюдать правила синтаксиса.</p>
          <p>Режим поиска <span class="guilabel">«Имя файла»</span>
          будет осуществлять поиск только по именам файлов. Смысл
          в наличии отдельного режима для поиска по именам файлов заключается
          в более эффективном использовании символов подстановки
          с индексом небольшого размера (использование символов
          подстановки с левой стороны элемента поиска будет не так затратно).
          При этом необходимо запомнить следующие особенности:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>Пробел при вводе должен соответствовать пробелу
                в имени файла, так как специальной обработке подвергаться не будет.</p>
              </li>
              <li class="listitem">
                <p>Поиск не учитывает регистр символов и
                диакритические знаки независимо от типа индекса.</p>
              </li>
              <li class="listitem">
                <p>Ввод без символов подстановки и без символов в верхнем регистре
                будет предваряться и завершаться символом «*»
                (e.g.: <em class=
                "replaceable"><code>etc</code></em> -&gt;
                <em class="replaceable"><code>*etc*</code></em>,
                but <em class="replaceable"><code>Etc</code></em>
                -&gt; <em class=
                "replaceable"><code>etc</code></em>).</p>
              </li>
              <li class="listitem">
                <p>Если индекс имеет значительные размеры (много файлов),
                чрезмерное обобщение фрагментов может привести к
                низкой эффективности поиска.</p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.GUI.RESLIST"
                id="RCL.SEARCH.GUI.RESLIST"></a>3.2.2.&nbsp;Список
                результатов</h3>
              </div>
            </div>
          </div>
          <p>После запуска поиска в главном окне постоянно отображается
          список результатов поиска.</p>
          <p>По умолчанию список документов представлен в порядке
          степени соответствия (насколько хорошо приложение оценивает
          соответствие документа запросу). Результаты можно отсортировать
          в порядке убывания или возрастания даты с помощью
          вертикальных стрелочек на панели управления.</p>
          <p>Каждый результат отображается в виде абзаца структурированного текста.
          Стандартный формат обычно вполне удовлетворяет необходимым требованиям,
          но способен учитывать и пожелания более взыскательной
          публики, обладая <a class="link" href="#RCL.SEARCH.GUI.CUSTOM.RESLIST" title=
          "The result list format">широкими возможностями настройки</a>.</p>
          <p>Большая часть результатов будет содержать интерактивные ссылки
          <code class="literal">«Просмотр»</code> и <code class=
          "literal">«Открыть»</code>.</p>
          <p>Щелчок по ссылке <code class="literal">«Просмотр»</code>
          открывает внутреннее окно просмотра документа.
          Дальнейшие переходы по ссылкам <code class="literal">«Просмотр»</code>
          из того же списка результатов поиска открываются в виде вкладок на уже открытом
          окне просмотра. Принудительно открыть ссылку в новом окне
          просмотра можно при нажатии клавиши <span class="keycap"><strong>Shift</strong>
          </span>+щелчок мыши, что может быть полезно при параллельном просмотре документов.
          (Также можно последовательно открывать результаты поиска в одном окне просмотра
          при нажатии клавиш
          <span class=
          "keycap"><strong>Shift</strong></span>+<span class=
          "keycap"><strong>стрелка вверх/вниз</strong></span>).</p>
          <p>Щелчок по ссылке <code class="literal">«Открыть»</code> запускает внешний
          просмотрщик документа. По умолчанию при выборе соответствующего приложения
          для просмотра большинства типов документов <span class="application">Recoll</span>
          использует настройки рабочего стола. См. <a class="link" href=
          "#RCL.SEARCH.GUI.RESLIST.APPLICATIONS" title=
          "Customising the viewers">далее</a> о настройке
          приложений.</p>
          <p>Ссылки <code class="literal">«Просмотр»</code> и
          <code class="literal">«Открыть»</code> на некоторых
          фрагментах могут отсутствовать. Они доступны только для документов с MIME-типами,
          из которых <span class="application">Recoll</span> умеет извлекать текст,
          а также для документов, которым в конфигурации задан соответствующий просмотрщик.
          Однако при настройке конфигурации в это поведение можно внести некоторые изменения. Более подробно:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>Ссылка <code class="literal">«Просмотр»</code>
                появляется для документов, MIME-тип которых присутствует
                в разделе <code class="literal">[index]</code>
                файла <a class="link" href=
                "#RCL.INSTALL.CONFIG.MIMECONF" title=
                "5.4.5.&nbsp;The mimeconf file"><code class=
                "filename">mimeconf</code></a>, и только в случае
                установки переменной конфигурации
                <code class="literal">textunknownasplain</code> —
                для всех типов, идентифицированных в качестве подтипа для <code class=
                "literal">text</code> (<code class=
                "literal">text/*</code>).</p>
              </li>
              <li class="listitem">
                <p>Ссылка <code class="literal">«Открыть»</code> появляется
                для документов, MIME-тип которых присутствует в
                разделе <code class="literal">[view]</code>
                конфигурационного файла <a class="link" href=
                "#RCL.INSTALL.CONFIG.MIMEVIEW" title=
                "5.4.6.&nbsp;The mimeview file"><code class=
                "filename">mimeview</code></a>.
                Если задана переменная <code class="literal">textunknownasplain</code>,
                но не установлена специальная программа для просмотра
                данного подтипа <code class="literal">text</code>,
                будет использован просмотрщик для <code class="literal">text/plain</code>.</p>
              </li>
            </ul>
          </div>
          <p>Для просмотра
          фактического запроса <span class="application">Xapian</span>, полученного
          по итогам реализации поиска по словоформам и другой обработки,
          можно щёлкнуть по ссылке <code class="literal">«показать
            запрос»</code> в верхней части страницы результатов.</p>
          <p>Двойной щелчок по любому слову внутри списка результатов или
          окна просмотра приведёт к его вставке в поле простого поиска.</p>
          <p>Список результатов разбивается на страницы. Размер страницы
          можно поменять в настройках. Для навигации по списку результатов
          можно использовать кнопки со стрелками на панели управления
          или ссылки в нижней части страницы.</p>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.GUI.RESLIST.APPLICATIONS" id=
                  "RCL.SEARCH.GUI.RESLIST.APPLICATIONS"></a>Настройка
                  просмотрщиков</h4>
                </div>
              </div>
            </div>
            <p>По умолчанию при выборе приложения для открытия
            данного документа <span class="application">Recoll</span>
            использует настройки рабочего стола с некоторыми исключениями.</p>
            <p>Более тонко настроить это поведение можно
            в диалоговом окне меню <span class="guimenu">«Настройки»</span> →
            <span class="guimenuitem">«Настройка интерфейса»</span> →
            <span class="guimenuitem">«Интерфейс пользователя»</span> →
            <span class="guimenuitem">«Выбор приложений-редакторов»
            </span> или путём внесения изменений в конфигурационный
            файл <a class="link" href="#RCL.INSTALL.CONFIG.MIMEVIEW" title=
            "5.4.6.&nbsp;The mimeview file"><code class=
            "filename">mimeview</code>.</a></p>
            <p>Если в верхней части диалогового окна установлен флажок
            <span class="guilabel">«Использовать настройки
            окружения по умолчанию»</span>, то обычно используются настройки
            рабочего стола по умолчанию. Однако имеется небольшой стандартный список исключений
            для MIME-типов, для которых выбор <span class="application">Recoll</span>
            должен переопределять выбор рабочего стола. Эти приложения
            хорошо интегрированы с 
            <span class="application">Recoll</span>. Например,
            в Linux для открытия файлов PDF и Postscript используется приложение
            <span class="application">evince</span>, поскольку оно
            поддерживает открытие документа на определённой странице
            и передачу строки поиска в качестве параметра командной строки.
            В этом диалоговом окне можно добавлять и удалять типы документов
            в списке исключений.</p>
            <p>Если предполагается полностью перестроить конфигурацию
            выбора приложений, то можно снять флажок <span class=
            "guilabel">«Использовать настройки окружения по умолчанию»</span>.
            В этом случае <span class="application">Recoll</span>
            будет использовать предустановленные приложения, которые
            могут изменяться для каждого типа документа. В большинстве
            случаев этот подход может оказаться не самым удобным.</p>
            <p>Так или иначе, в диалоговом окне выбора приложений-редакторов
            можно выбрать несколько MIME-типов в верхней части окна
            и определить для них обработчика в нижней части. В большинстве
            случаев <code class="literal">%f</code> будет использоваться
            в качестве заполнителя и заменяется именем файла в командной
            строке при запуске приложения.</p>
            <p>Приложения-редакторы можно также изменять путём
            изменения конфигурационного файла <a class="link" href=
            "#RCL.INSTALL.CONFIG.MIMEVIEW" title=
            "5.4.6.&nbsp;The mimeview file"><code class=
            "filename">mimeview</code></a>, если этот вариант окажется более удобным.</p>
            <p>В <span class="application">Unix</span>-подобных системах
            на каждом элементе списка результатов поиска также можно открыть контекстное меню,
            в котором имеется элемент <span class="guilabel">«Открыть с помощью»</span>.
            Это позволяет выбирать приложение из списка зарегистрированных
            в рабочем столе приложений для MIME-типа данного документа в индивидуальном порядке.</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.GUI.RESLIST.SUGGS" id=
                  "RCL.SEARCH.GUI.RESLIST.SUGGS"></a>Поиск не дал результатов:
                  варианты правописания</h4>
                </div>
              </div>
            </div>
            <p>При отсутствии результатов поиска, если выполнена настройка словаря
            <span class="application">aspell</span>,
            <span class="application">Recoll</span>
            инициирует проверку слов поискового запроса на ошибки
            с предложением списков на замену. Щелчком по
            одному из предлагаемых слов можно заменить слово и
            перезапустить поиск. При этом необходимо удерживать любую
            из клавиш-модификаторов (Ctrl, Shift и т.д.), чтобы
            остаться в окне предложений слов на замену, если меняется
            сразу нескольких слов.</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.GUI.RESULTLIST.MENU" id=
                  "RCL.SEARCH.GUI.RESULTLIST.MENU"></a>Контекстное меню
                  списка результатов</h4>
                </div>
              </div>
            </div>
            <p>Помимо ссылок для просмотра и изменения файлов имеется
            выпадающее меню, которое можно открыть щелчком правой клавиши
            мыши по абзацу в списке результатов. Это меню включает
            следующие элементы:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style=
              "list-style-type: disc;">
                <li class="listitem">
                  <p><span class="guilabel">Просмотр</span></p>
                </li>
                <li class="listitem">
                  <p><span class="guilabel">Открыть</span></p>
                </li>
                <li class="listitem">
                  <p><span class="guilabel">Открыть с помощью</span></p>
                </li>
                <li class="listitem">
                  <p><span class="guilabel">Запустить выполнение сценария</span></p>
                </li>
                <li class="listitem">
                  <p><span class="guilabel">Копировать имя
                  файла</span></p>
                </li>
                <li class="listitem">
                  <p><span class="guilabel">Копировать URL</span></p>
                </li>
                <li class="listitem">
                  <p><span class="guilabel">Сохранить в файл</span></p>
                </li>
                <li class="listitem">
                  <p><span class="guilabel">Найти похожие документы</span></p>
                </li>
                <li class="listitem">
                  <p><span class="guilabel">Просмотр родительского
                  документа</span></p>
                </li>
                <li class="listitem">
                  <p><span class="guilabel">Открыть родительский 
                  документ</span></p>
                </li>
                <li class="listitem">
                  <p><span class="guilabel">Открыть окно 
                  выдержек</span></p>
                </li>
              </ul>
            </div>
            <p>Элементы <span class="guilabel">«Просмотр»</span> и
            <span class="guilabel">«Открыть»</span> выполняют те же
            действия, что и соответствующие ссылки.</p>
            <p><span class="guilabel">«Открыть с помощью»</span>
            (<span class="application">Unix</span>-подобные системы)
            позволяет открыть документ с помощью одного из приложений
            предположительно способных работать с файлами этого MIME-типа
            (согласно информации файлов <code class=
            "literal">.desktop</code> в <code class=
            "filename">/usr/share/applications</code>).</p>
            <p><span class="guilabel">«Запустить выполнение сценария»</span>
            позволяет запустить произвольную команду для обработки файла,
            представленного в результатах поиска. Этот элемент меню появляется только для
            результатов, относящихся к файлам верхнего уровня.
            См. более подробное соответствующее описание <a class="link" href="#RCL.SEARCH.GUI.RUNSCRIPT"
            title=
            "3.2.5.&nbsp;Running arbitrary commands on result files">
            ниже</a>.</p>
            <p>Элементы меню <span class="guilabel">«Копировать имя файла»</span> и
            <span class="guilabel">«Копировать URL»</span> выполняют
            копирование соответствующих данных в буфер обмена
            для последующей вставки.</p>
            <p>Элемент меню <span class="guilabel">«Сохранить в файл»</span> 
            позволяет сохранять содержимое документа из результатов поиска
            в выбранный файл. Этот элемент появляется только в случае
            отсутствия собственного файла для данного документа,
            когда он является поддокументом внутри другого файла (например:
            вложение электронной почты). Это особенно полезно, так как позволяет
            извлекать вложения, для которых не задано приложение-редактор.</p>
            <p>Элемент меню <span class="guilabel">«Открыть родительский
            документ»/«Просмотр родительского документа»</span>
            позволяют работать с документом верхнего уровня (например:
            с письмом электронной почты, в которое вложен данный документ).
            <span class="application">Recoll</span> не всегда абсолютно
            точен на предмет того, что он может или не может делать в этой области.
            Например, те же <span class="guilabel">Родительские</span> элементы меню
            появятся и для электронной почты, которая является частью файла папки mbox,
            но при этом нельзя открыть mbox для просмотра (попытка просмотра
            вызовет появление ошибки).</p>
            <p>Если документ является файлом верхнего уровня, при выборе элемента меню <span class=
            "guilabel">«Открыть родительский документ»</span> откроется
            менеджер файлов с каталогом файловой системы, в котором находится данный файл.</p>
            <p>Элемент меню <span class="guilabel">«Найти похожие документы»</span>
            позволяет выбрать несколько соответствующих слов из текущего документа
            и вставить их в поле простого поиска.
            Это позволяет выполнить простой поиск, имея все шансы
            найти документы, имеющие отношение к текущему результату поиска.
            Не могу однако припомнить ни одного случая, где бы эта функция
            принесла мне реальную пользу…</p>
            <p><a name="RCL.SEARCH.GUI.RESULTLIST.MENU.SNIPPETS"
            id="RCL.SEARCH.GUI.RESULTLIST.MENU.SNIPPETS"></a>Элемент меню
            <span class="guilabel">«Открыть окно выдержек»</span>
            появляется только для документов, которые поддерживают
            разрывы страниц (обычно PDF, Postscript, DVI). Окно выдержек
            содержит фрагменты документа, имеющие совпадение
            с поисковым запросом, вместе с соответствующими
            номерами страниц в виде ссылок, которые позволяют открыть
            приложение-просмотрщик на соответствующей странице. Если
            просмотрщик поддерживает эту функцию, то его система поиска
            также будет задействована для нахождения одного из элементов поиска.</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.GUI.RESTABLE"
                id="RCL.SEARCH.GUI.RESTABLE"></a>3.2.3.&nbsp;Таблица
                результатов поиска</h3>
              </div>
            </div>
          </div>
          <p>Результаты поиска могут быть представлены не только в виде
          списка, но и в виде электронной таблицы.
          Переключиться на этот вид представления можно
          нажатием на значок с изображением таблицы на панели управления
          (значок работает как тумблер, и чтобы перейти обратно к представлению
          в виде списка необходимо щёлкнуть его же).</p>
          <p>Щелчком по заголовку столбца можно отсортировать содержимое таблицы
          по значениям данного столбца. Повторное нажатие изменяет
          порядок сортировки на обратный, а в контекстном меню
          шапки таблицы можно сбросить сортировку по столбцу на сортировку по умолчанию
          (также можно использовать стрелочки «сортировать по дате»).</p>
          <p>Как список, так и таблица, отображают результаты одного
          и того же поиска. Настройка сортировки таблицы остаётся
          активной при переключению обратно к списку поиска. Для сброса
          сортировки в этом случае необходимо дважды нажать на стрелочку сортировки по дате.</p>
          <p>Контекстное меню заголовка таблицы позволяет добавлять или удалять
          столбцы. Размер столбцов можно менять, как и порядок их расположения
          (перетаскиванием). При завершении
          работы в <span class=
          "command"><strong>recoll</strong></span> все эти изменения запоминаются.</p>
          <p>При наведении курсора на строки таблицы происходит обновление
          области подробной информации в нижней части окна на соответствующие
          значения. Для фиксации значения можно щёлкнуть по строке.
          Отображение в нижней части окна соответствует абзацу списка
          результатов поиска со ссылками для просмотра или открытия документа
          в приложении-редакторе, а также с соответствующим контекстным меню. Нажатие
          на клавишу <span class="keycap"><strong>Esc</strong></span> снимает фиксацию этой области экрана.</p>
          <p>При щелчке левой клавишей мыши совместно с клавишей Shift вместо
          дополнительной информации отображается извлечённый из документа текст
          (подобно окну просмотра). Однако функции щелчка, как и щелчка совместно с клавишей Shift,
          могут быть зарезервированы в настройках графического интерфейса.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.SEARCH.GUI.SIDEFILTERS" id=
                "RCL.SEARCH.GUI.SIDEFILTERS"></a>3.2.4.&nbsp;Панель
                фильтров</h3>
              </div>
            </div>
          </div>
          <p>По умолчанию графический интерфейс отображает панель фильтров
          слева от области отображения результатов. Эта панель появилась в версии 1.32.
          Ширина панели может настраиваться, либо полностью
          сжиматься, и запоминается до следующего сеанса.</p>
          <p>В панели имеется две области для фильтрации результатов
          либо по датам, либо по расположению в файловой системе.</p>
          <p>Панель активна только в режиме поиска <span class=
          "guilabel">«Язык запроса»</span> и эффект её заключается
          в добавлении выражений <code class="literal">date:</code> и
          <code class="literal">dir:</code> к текущему поиску.</p>
          <p>Фильтр по датам включается установкой соответствующего флажка.
          В нём имеется два виджета автоматизации ввода даты для
          минимальной и максимальной даты периода поиска.</p>
          <p>Фильтр каталога отображает набор каталогов файловой системы,
          ограничивающих индексируемую область согласно списку
          <code class="literal">topdirs</code> и параметров исключения
          имени. Можно включать и исключать каталоги путём установки
          и снятия флажков. При этом выбор каталога включает поиск
          по всему поддереву. Необходимости специально включать подкаталоги
          нет, а некоторые из них даже и невозможно исключить из списка (используйте
          выражения <a class="link" href="#RCL.SEARCH.LANG" title=
          "3.5.&nbsp;The query language"><span class=
          "guilabel">Языка запросов</span></a> <code class=
          "literal">dir:</code>, если это необходимо).</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.SEARCH.GUI.RUNSCRIPT" id=
                "RCL.SEARCH.GUI.RUNSCRIPT"></a>3.2.5.&nbsp;Выполнение
                произвольных команд для обработки файлов из результатов поиска</h3>
              </div>
            </div>
          </div>
          <p>Помимо операций <span class="guilabel">«Открыть»</span> и
          <span class="guilabel">«Открыть с помощью»</span>, которые
          позволяют запустить приложение для открытия документа из результатов поиска
          (или временной копии) на основе его MIME-типа, также возможно
          выполнение произвольных команд для работы с файлами верхнего уровня в списке результатов
          с помощью элемента контекстного меню <span class="guilabel">«Запустить выполнение сценария»</span>.</p>
          <p>Команды, которые появятся в подменю <span class=
          "guilabel">«Запустить выполнение сценария»</span>, определяются файлами
          <code class="literal">.desktop</code> внутри подкаталога
          <code class="filename">scripts</code> текущего конфигурационного каталога.</p>
          <p>Ниже следует пример файла <code class=
          "literal">.desktop</code>, который может быть назван, например, <code class=
          "filename">~/.recoll/scripts/myscript.desktop</code> (конкретное
          имя файла внутри этого каталога не имеет определющего значения):</p>
          <pre class="programlisting">
          [Desktop Entry]
          Type=Application
          Name=MyFirstScript
          Exec=/home/me/bin/tryscript %F
          MimeType=*/*
        </pre>
          <p>Атрибут <code class="literal">Name</code> определяет
          надпись, которая появится внутри меню
          <span class="guilabel">«Запустить выполнение сценария»</span>. Атрибут
          <code class="literal">Exec</code> определяет запускаемую программу,
          которая совсем необязательно должна быть сценарием. Атрибут <code class=
          "literal">MimeType</code> не используется, но должен присутствовать.</p>
          <p>Определяемые таким образом команды также могут быть использованы
          по ссылкам внутри <a class="link" href=
          "#RCL.SEARCH.GUI.CUSTOM.RESLIST.PARA" title=
          "The paragraph format">абзаца результатов поиска</a>.</p>
          <p>Например, может иметь смысл написать сценарий,
          который будет перемещать документ в корзину и удалять его
          из индекса <span class="application">Recoll</span>.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.SEARCH.GUI.THUMBNAILS" id=
                "RCL.SEARCH.GUI.THUMBNAILS"></a>3.2.6.&nbsp;<span class="application">Unix</span>-подобные
                системы: отображение миниатюр</h3>
              </div>
            </div>
          </div>
          <p>В формате отображения элементов списка результатов поиска по умолчанию,
          а также в области подробной информации при отображении таблицы
          результатов поиска каждый документ обозначается определённым значком.
          Это либо общий значок для соответствующего MIME-типа, либо
          миниатюра внешнего  вида документа. Миниатюры отображаются только
          в том случае, когда соответствующие файлы расположены в стандартных
          каталогах для <span class="application">freedesktop</span>, где они
          обычно создаются менеджером файлов.</p>
          <p>Recoll не обладает функциональной возможностью создания миниатюр.
          Для этого используется относительно простой трюк в виде элемента контекстного
          меню <span class="guilabel">«Открыть родительский документ/каталог»</span>
          списка результатов поиска, при выборе которого должно открыться окно
          менеджера файлов с содержимым соответствующего каталога, в котором
          уже будут созданы миниатюры (в зависимости от настройки менеджера файлов).
          После чего при перезапуске поиска уже должны появиться миниатюры.</p>
          <p>См. также <a class="ulink" href=
          "https://www.recoll.org/faqsandhowtos/ResultsThumbnails.html"
          target="_top">несколько советов по созданию миниатюр</a> в «Вопросах и ответах» программы <span class=
          "application">Recoll</span>.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.GUI.PREVIEW"
                id="RCL.SEARCH.GUI.PREVIEW"></a>3.2.7.&nbsp;Окно
                просмотра</h3>
              </div>
            </div>
          </div>
          <p>Окно просмотра сначала открывается при щелчке по ссылке
          <code class="literal">Просмотр</code> внутри списка результатов поиска.</p>
          <p>Последующие переходы по этой ссылке в том же списке результатов поиска
          открываются в новых вкладках уже открытого окна (если при этом не была нажата клавиша
          <span class="keycap"><strong>Shift</strong></span>, в каковом случае будет открыто новое
          окно для параллельного просмотра).</p>
          <p>После выполнения другого поиска и перехода по ссылке просмотра
          будет открыто новое окно просмотра. При этом старое окно остаётся открытым пока
          оно не будет закрыто пользователем.</p>
          <p>Закрытие вкладки в окне просмотра выполняется с помощью комбинации клавиш <span class=
          "keycap"><strong>Ctrl-W</strong></span> (<span class=
          "keycap"><strong>Ctrl</strong></span> + <span class=
          "keycap"><strong>W</strong></span>).
          При закрытии последней вкладки или нажатии соответствующей кнопки оконного менеджера
          в верхней части рамки окно также будет закрыто.</p>
          <p>Можно отображать последующие или предыдущие документы из
          списка результатов поиска внутри вкладки просмотра нажатием клавиш
          <span class=
          "keycap"><strong>Shift</strong></span>+<span class=
          "keycap"><strong>Вниз</strong></span> или <span class=
          "keycap"><strong>Shift</strong></span>+<span class=
          "keycap"><strong>Вверх</strong></span> (<span class=
          "keycap"><strong>Вниз</strong></span> и <span class=
          "keycap"><strong>Вверх</strong></span> представляют собой клавиши со стрелками).</p>
          <p>Контекстное меню в области текста позволяет переключаться
          между отображением основного текста и содержимым полей,
          связанных с документом (например: author, abtract,
          и т.д.). Это особенно полезно в случаях, когда совпадение
          элемента поиска произошло не по основному тексту, но по одному
          из полей. В случае с изображениями можно переключаться
          между тремя видами: само изображение, метаданные изображения,
          извлечённые с помощью <span class=
          "command"><strong>exiftool</strong></span>, и поля в виде
          метаданных, сохранённых в индексе.</p>
          <p>Содержимое текущего окна просмотра можно вывести на печать
          нажатием клавиш <span class=
          "keycap"><strong>Ctrl-P</strong></span> (<span class=
          "keycap"><strong>Ctrl</strong></span> + <span class=
          "keycap"><strong>P</strong></span>) в окне просмотра текста.</p>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.GUI.PREVIEW.SEARCH" id=
                  "RCL.SEARCH.GUI.PREVIEW.SEARCH"></a>Поиск
                  в окне просмотра</h4>
                </div>
              </div>
            </div>
            <p>Окно просмотра также имеет встроенную возможность поиска,
            управление которым осуществляется на панели в нижней части окна.
            Этот поиск работает в двух режимах: в виде классического
            последовательного поиска, реализуемого в большинстве редакторов,
            в которых имеется функция поиска текста, набираемого в области ввода,
            либо в виде перебора совпадений документа и поискового запроса,
            обнаруженных программой <span class="application">Recoll</span>.</p>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><span class="term">Последовательный поиск текста</span></dt>
                <dd>
                  <p>Вкладки просмотра снабжены функцией последовательного
                  внутреннего поиcка. Ввод строки поиска выполняется либо после нажатия клавиши
                  <span class=
                  "keycap"><strong>/</strong></span> (косая черта), либо
                  <span class=
                  "keycap"><strong>CTL-F</strong></span> при нахождении внутри
                  области текста, либо щелчком по полю с текстом <span class=
                  "guilabel">«Искать:»</span>. При этом
                  для поиска следующего/предыдущего совпадения
                  можно использовать кнопки <span class="guilabel">«Следующий»</span> и
                  <span class="guilabel">«Предыдущий»</span>. Также для перехода к следующему совпадению внутри текстовой
                  области можно нажимать клавишу <span class=
                  "keycap"><strong>F3</strong></span>.</p>
                  <p>После ввода строки поиска при использовании клавиш Ctrl-Вверх/Ctrl-Вниз
                  выполняется поиск для каждого последующего документа списка результатов.
                  В случае наличия результатов поиска курсор располагается на первом совпадении искомой строки.</p>
                </dd>
                <dt><span class="term">Переход по списку совпадений</span></dt>
                <dd>
                  <p>Если область ввода поиска при нажатии клавиши
                  <span class="guilabel">«Следующий»</span> или
                  <span class="guilabel">«Предыдущий»</span> пуста,
                  текст прокручивается для отображения следующего
                  совпадения с любым элементом поиска (следующая выделенная
                  область). При выборе группы поиска из выпадающего списка
                  щелчок по кнопке <span class=
                  "guilabel">«Следующий»</span> или <span class=
                  "guilabel">«Предыдущий»</span> выполняет переход
                  по списку совпадений для этой группы. Такой поиск выполняется иначе, чем
                  поиск по тексту, с учётом
                  неточных совпадений (при использовании словоформ
                  и символов подстановки). Поиск вернётся в текстовый режим
                  как только в поле поиска будет введён текст.</p>
                </dd>
              </dl>
            </div>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.GUI.FRAGBUTS"
                id="RCL.SEARCH.GUI.FRAGBUTS"></a>3.2.8.&nbsp;Окно
                «Фрагменты запроса»</h3>
              </div>
            </div>
          </div>
          <p>Окно «Фрагменты запроса» можно использовать для управления
          фильтрованием элементов языка запроса путём изменения текущего
          запроса одним нажатием кнопки. Эта функция позволяет уменьшить
          размер ввода и необходимость запоминания простых выражений общего
          назначения (например, для выбора только отдельных документов
          или вложений, для фильтрации результатов веб-поиска, для выбора
          поддерева файловой системы, типа файла и так далее).</p>
          <p>При выборе элемента меню <span class="guimenu">«Инструменты»</span> →
          <span class="guimenuitem">«Фрагменты запроса»</span>
          откроется диалоговое окно.</p>
          <p>Конфигурация содержимого окна полностью настраивается,
          и определяется по содержимому текстового XML-файла с именем
          <code class="filename">fragment-buttons.xml</code>, который
          должен находиться в конфигурационном каталоге текущего индекса.
          Образец файла, распространяемый с дистрибутивом
          <span class="application">Recoll</span> содержит несколько
          примеров фильтров. Эти фильтры будут автоматически скопированы
          в конфигурационный каталог при отсутствии в нём данного файла
          (например, <code class=
          "filename">~/.recoll/fragment-buttons.xml</code> на
          Linux и Mac OS, <code class=
          "filename">$HOME/AppData/Local/Recoll/fragment-buttons.xml</code>
          на Windows). Внесение изменений в этот файл позволит настроить
          инструмент под потребности пользователя .</p>
          <div class="note" style=
          "margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Примечание</h3>
            <p>Файл <code class=
            "filename">fragment-buttons.xml</code> до <span class="application">Recoll</span>
            версии 1.31.0 назывался <code class="filename">fragbuts.xml</code> .
            Для носителей английского языка это имя звучало настолько
            неприлично, что его в итоге пришлось сменить. Однако при отсутствии файла <code class=
            "filename">fragment-buttons.xml</code> использование файла
            <code class="filename">fragbuts.xml</code> допускается. Автоматическое переименование файла не предусмотрено.</p>
          </div>
          <p>Ниже следует иллюстрация внешнего вида диалогового окна:</p>
          <p><img src="frag-sample.png"></p>
          <p>А также соответствующий конфигурационный файл:</p>
          <pre class="programlisting">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;fragbuttons version="1.0"&gt;

  &lt;radiobuttons&gt;
    &lt;!-- Toggle WEB queue results inclusion --&gt;
    &lt;fragbutton&gt;
      &lt;label&gt;Include Web Results&lt;/label&gt;
      &lt;frag&gt;&lt;/frag&gt;
    &lt;/fragbutton&gt;
    &lt;fragbutton&gt;
      &lt;label&gt;Exclude Web Results&lt;/label&gt;
      &lt;frag&gt;-rclbes:BGL&lt;/frag&gt;
    &lt;/fragbutton&gt;
    &lt;fragbutton&gt;
      &lt;label&gt;Only Web Results&lt;/label&gt;
      &lt;frag&gt;rclbes:BGL&lt;/frag&gt;
    &lt;/fragbutton&gt;
  &lt;/radiobuttons&gt;

  &lt;radiobuttons&gt;
    &lt;!-- Standalone vs embedded switch --&gt;
    &lt;fragbutton&gt;
      &lt;label&gt;Include embedded documents&lt;/label&gt;
      &lt;frag&gt;&lt;/frag&gt;
    &lt;/fragbutton&gt;
    &lt;fragbutton&gt;
      &lt;label&gt;Only standalone documents&lt;/label&gt;
      &lt;frag&gt;issub:0&lt;/frag&gt;
    &lt;/fragbutton&gt;
    &lt;fragbutton&gt;
      &lt;label&gt;Only embedded documents&lt;/label&gt;
      &lt;frag&gt;issub:1&lt;/frag&gt;
    &lt;/fragbutton&gt;
  &lt;/radiobuttons&gt;

  &lt;buttons&gt;
    &lt;fragbutton&gt;
      &lt;label&gt;Example: Year 2010&lt;/label&gt;
      &lt;frag&gt;date:2010-01-01/2010-12-31&lt;/frag&gt;
    &lt;/fragbutton&gt;
    &lt;fragbutton&gt;
      &lt;label&gt;Example: c++ files&lt;/label&gt;
      &lt;frag&gt;ext:cpp OR ext:cxx&lt;/frag&gt;
    &lt;/fragbutton&gt;
    &lt;fragbutton&gt;
      &lt;label&gt;Example: My Great Directory&lt;/label&gt;
      &lt;frag&gt;dir:/my/great/directory&lt;/frag&gt;
    &lt;/fragbutton&gt;
  &lt;/buttons&gt;
&lt;/fragbuttons&gt;
        </pre>
          <p>Присутствует два типа группирования <code class=
          "literal">переключатели</code> и <code class=
          "literal">кнопки</code>, каждое из которых определяет
          ряд флажков или переключателей внутри окна. При этом можно
          выбрать любое количество <code class="literal">кнопок</code>,
          но из ряда <code class="literal">переключателей</code>
          выбирается только один.</p>
          <p>Кнопки определяются в разделе <code class=
          "literal">fragbutton</code>, где указывается
          надпись для кнопки и фрагмент <code class="literal">Языка
          запроса</code>, добавляемого (в виде фильтра AND)
          перед выполнением поиска, если кнопка активна.</p>
          <pre class="programlisting">
    &lt;fragbutton&gt;
      &lt;label&gt;Пример: Мой замечательный каталог&lt;/label&gt;
      &lt;frag&gt;dir:/мой/замечательный/каталог&lt;/frag&gt;
    &lt;/fragbutton&gt;
  </pre>
          <p>Также внутрь группы можно добавлять элементы <code class=
          "literal">message</code> для описания поведения. Элементы <code class=
          "literal">message</code> имеют <code class=
          "literal">label</code>, но элемент <code class=
          "literal">frag</code> у них отсутствует. Пример:</p>
          <pre class="programlisting">
  &lt;buttons&gt;
    &lt;message&gt;
      &lt;label&gt;Это — сообщение&lt;/label&gt; 
    &lt;/message&gt;
  &lt;/buttons&gt;
  </pre>
          <p>Содержимое элемента <code class="literal">label</code>
          интерпретируется как HTML. Но при использовании в нём тегов символы открывающего тега
          <code class="literal">&lt;</code> должны быть представлены в виде кодов
          <code class="literal">&amp;lt;</code>.</p>
          <p>Всё что нужно знать об XML при внесении изменений
          в этот файл — это то, что любой открывающий тег, такой как <em class=
          "replaceable"><code>&lt;label&gt;</code></em>, должен иметь
          парный закрывающий тег после соответствующего значения: <em class=
          "replaceable"><code>&lt;/label&gt;</code></em>.</p>
          <p>Как правило, файл редактируется в обычном текстовом редакторе, например, <span class=
          "command"><strong>vi</strong></span> или <span class=
          "command"><strong>notepad</strong></span>.
          Причём двойной щелчок по файлу в менеджере файлов не обязательно приведёт к нужному результату,
          поскольку файл при этом обычно открывается в веб-браузере, который
          не позволяет изменять содержимое.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.GUI.COMPLEX"
                id=
                "RCL.SEARCH.GUI.COMPLEX"></a>3.2.9.&nbsp;Автоматизированный
                сложный поиск (также называется «Сложным поиском»)</h3>
              </div>
            </div>
          </div>
          <p>Диалоговое окно сложного поиска позволяет выполнять
          более сложные запросы без необходимости запоминания конструкций
          языка запросов. Оно открывается из меню <span class=
          "guilabel">«Инструменты»</span> или щелчком по значку на панели инструментов.</p>
          <p><span class="application">Recoll</span> сохраняет
          историю поиска. См. <a class="link" href=
          "#RCL.SEARCH.GUI.COMPLEX.HISTORY" title=
          "Advanced search history">Историю сложного
          поиска</a>.</p>
          <p>В диалоговом окне доступны две вкладки:</p>
          <div class="orderedlist">
            <ol class="orderedlist" type="1">
              <li class="listitem">
                <p>Первая вкладка позволяет указать элемент поиска,
                а также определить несколько выражений, которые
                объединяются для построения запроса.</p>
              </li>
              <li class="listitem">
                <p>Вторая вкладка позволяет фильтровать результаты
                по размеру файла, дате изменения, MIME-типу или расположению.</p>
              </li>
            </ol>
          </div>
          <p>Для начала поиска щёлкните по кнопке <span class="guilabel">«Начать
          поиск»</span> в диалоговом окне сложного поиска или
          нажмите кнопку <span class="keycap"><strong>Enter</strong></span>
          в любом текстовом поле. Кнопка в главном окне всегда запускает простой поиск.</p>
          <p>Для просмотра охвата поиска щёлкните по ссылке <code class="literal">«Показать сведения
          о запросе»</code> в верхней части страницы результатов поиска.</p>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.GUI.COMPLEX.TERMS" id=
                  "RCL.SEARCH.GUI.COMPLEX.TERMS"></a>Сложный
                  поиск: вкладка «Найти»</h4>
                </div>
              </div>
            </div>
            <p>Эта часть диалогового окна позволяет конструировать
            запрос объединением нескольких выражений различных типов.
            Каждое поле можно настраивать на следующие режимы:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style=
              "list-style-type: disc;">
                <li class="listitem">
                  <p>Все слова.</p>
                </li>
                <li class="listitem">
                  <p>Любое слово.</p>
                </li>
                <li class="listitem">
                  <p>Ни одного из слов.</p>
                </li>
                <li class="listitem">
                  <p>Фраза (точные формы слов в заданном порядке в настраиваемом окне).</p>
                </li>
                <li class="listitem">
                  <p>Близость (слова в любом порядке в настраиваемом окне).</p>
                </li>
                <li class="listitem">
                  <p>Поиск имени файла.</p>
                </li>
              </ul>
            </div>
            <p>Можно создавать дополнительные поля ввода щелчком
            по кнопке <span class="guilabel">«Добавить выражение»</span>.</p>
            <p>При поиске непустые выражения будут объединены либо
            с помощью логической операции И, либо ИЛИ,
            в зависимости от выбора элемента слева (<span class=
            "guilabel">«Все условия»</span> или <span class=
            "guilabel">«Любое условие»</span>).</p>
            <p>Элементы всех типов, за исключением «Фраза» и «Близость»
            принимают смесь отдельных слов и фраз, заключённых в
            двойные кавычки. Поиск с использованием словоформ
            и символов подстановки в этом случае выполняется также,
            как это происходит при простом поиске.</p>
            <div class="sect4">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title"><a name=
                    "RCL.SEARCH.GUI.COMPLEX.PHRASEANDPROX" id=
                    "RCL.SEARCH.GUI.COMPLEX.PHRASEANDPROX"></a>Поиск
                    с использованием выражений типа «Фраза» и «Близость»</h5>
                  </div>
                </div>
              </div>
              <p>В обоих типах выражений поиск группы слов выполняется в
              соответствии с указанием их относительного расположения.
              Разница лишь в том, что порядок следования слов чётко определяется
              лишь для выражений типа <code class="literal">«Фраза»</code>,
              и не имеет жёсткой фиксации в выражениях типа <code class="literal">«Близость»</code>.
              Однако в обоих случаях между словами можно допустить наличие некоторого числа
              (допуск) несовпадающих с поиском слов. Для элементов поиска типа <code class=
              "literal">«Фраза»</code> число таких слов по умолчанию
              равно нулю (точное совпадение). Для элементов поиска типа <code class=
              "literal">«Близость»</code> это число равно десяти
              (значит совпадение будет зафиксировано, если поисковые слова
              будут найдены в окне из двенадцати слов).</p>
              <p>Примеры: поиск по фразе <code class=
              "literal">«quick fox» </code> с допуском 0 совпадёт
              с фразой <code class="literal">«quick fox»</code>, но не совпадёт
              с фразой <code class="literal">«quick brown fox»</code>. Поиск с
              допуском 1 уже зафиксирует совпадение в предыдущей фразе,
              но не с фразой <code class="literal">«fox quick»</code>. Поиск по близости
              найдёт совпадение с фразой <code class="literal">«quick fox»</code>
              с допуском по умолчанию, а также с фразой <code class="literal">«a fox is a cunning and
              quick animal»</code>.</p>
              <p>Допуск можно настраивать с помощью поля счётчика слева от поля ввода</p>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.GUI.COMPLEX.FILTER" id=
                  "RCL.SEARCH.GUI.COMPLEX.FILTER"></a>Сложный
                  поиск: вкладка «Фильтр»</h4>
                </div>
              </div>
            </div>
            <p>Эта вкладка диалогового окна разделена на несколько частей,
            которые позволяют фильтровать результаты поиска в соответствии с
            несколькими критериями</p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style=
              "list-style-type: disc;">
                <li class="listitem">
                  <p>Первая часть позволяет настроить фильтр результатов по
                  дате последнего изменения. Можно указывать как минимальную,
                  так и максимальную дату. Исходные значения заданы
                  по самому старому и самому новому документу
                  в индексе.</p>
                </li>
                <li class="listitem">
                  <p>Вторая часть позволяет фильтровать результаты
                  по размеру файла. Имеется два поля для ввода минимального
                  и максимального значения. Введите десятичное число. Можно
                  использовать следующие суффиксы в качестве множителей: <code class=
                  "literal">k/K</code>, <code class=
                  "literal">m/M</code>, <code class=
                  "literal">g/G</code>, <code class=
                  "literal">t/T</code> для 10E3, 10E6, 10E9, 10E12, соответственно.</p>
                </li>
                <li class="listitem">
                  <p>Третья часть позволяет фильтровать результаты поиска
                  по их MIME-типам или MIME-категориям (например:
                  медиа/текст/сообщение/и т.д.).</p>
                  <p>Типы можно перемещать между двумя полями
                  для указания какие из них необходимо включить
                  или исключить из поиска.</p>
                  <p>Состояние выбора типа файлов можно сохранить
                  в качестве значения по умолчанию (фильтр типа файлов
                  не будет активироваться при запуске программы, но
                  списки будут доступны для восстановления состояния).</p>
                </li>
                <li class="listitem">
                  <p>Нижняя часть позволяет ограничить результаты поиска
                  поддеревом индексируемой области.
                  Можно установить флажок <span class=
                  "guilabel">«Обратить»</span>, чтобы поиск выполнялся
                  по файлам не входящим в указанное
                  поддерево. Если фильтр по каталогам часто используется
                  для поиска по большим поддеревьям файловой системы,
                  то имеет смысл настроить несколько индексов для
                  обеспечения лучшей производительности.</p>
                  <p>Для фильтрации можно использовать относительные/частичные пути.
                  Например, при вводе <code class=
                  "literal">dirA/dirB</code> поиск будет выполнятся как для
                  <code class=
                  "filename">/dir1/dirA/dirB/myfile1</code>, так и для
                  <code class=
                  "filename">/dir2/dirA/dirB/someother/myfile2</code>.</p>
                </li>
              </ul>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.GUI.COMPLEX.HISTORY" id=
                  "RCL.SEARCH.GUI.COMPLEX.HISTORY"></a>История
                  сложного поиска</h4>
                </div>
              </div>
            </div>
            <p>При выполнении сложного поиска запоминаются последние 100
            выполненных поисковых запросов. По сохранённым поисковым запросам
            можно переходить с помощью клавиш со стрелками вверх и вниз, когда
            курсор находится на диалоговом окне сложного поиска.</p>
            <p>Историю сложного поиска можно удалить вместе с
            историей простого поиска выбором элемента меню
            <span class="guimenu">«Файл»</span> → <span class=
            "guimenuitem">«Стереть историю поиска»</span>.</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.SEARCH.GUI.TERMEXPLORER" id=
                "RCL.SEARCH.GUI.TERMEXPLORER"></a>3.2.10.&nbsp;
                Инструмент обзора терминов</h3>
              </div>
            </div>
          </div>
          <p><span class="application">Recoll</span> автоматически
          управляет дополнением слов поискового запроса их производными
          словоформами (например: формами множественного/единственного
          числа, формами спряжения глагола).
          Но существуют случаи, когда точный элемент поиска неизвестен  .
          Например, пользователь может забыть орфографию слова или
          может помнить только начало имени.</p>
          <p>Если в документах не будет обнаружено совпадений, поиск будет
          предлагать слова для замены с различными орфографическими
          вариантами. В некоторых случаях в индексе
          могут присутствовать варианты слов с правильной и неправильной
          орфографией, и поиск именно по этим вариантам может представлять
          отдельный интерес.</p>
          <p>Инструмент обзора терминов (запускается щелчком по значку на панели
          инструментов или из элемента <span class="guilabel">«Обозреватель терминов»</span>
          меню <span class="guilabel">«Инструменты»</span>)
          может использоваться для поиска по всему списку слов индекса или
          (более позднее добавление) отображать некоторые статистические данные,
          а также другую информацию по индексу. Он имеет несколько режимов работы:</p>
          <div class="variablelist">
            <dl class="variablelist">
              <dt><span class="term">«Маски»</span></dt>
              <dd>
                <p>В этом режиме работы можно вводить
                строку поиска с символами подстановки, подобными
                использующимся в консоли (*, ?, []).
                Например: <em class=
                "replaceable"><code>xapi*</code></em> отобразит
                все элементы поиска из индекса, которые начинаются с <em class=
                "replaceable"><code>xapi</code></em>. (С более подробной информацией
                по символам подстановки можно ознакомиться <a class="link" href=
                "#RCL.SEARCH.WILDCARDS" title=
                "3.6.1.&nbsp;Wildcards">здесь</a>).</p>
              </dd>
              <dt><span class="term">«Регулярные выражения»</span></dt>
              <dd>
                <p>В этом режиме в качестве ввода принимаются регулярные
                выражения. Пример: <em class=
                "replaceable"><code>word[0-9]+</code></em>. В выражении
                задано начало строки.
                Например: при указании слова <em class=
                "replaceable"><code>press</code></em> с поисковым запросом
                совпадёт слово <em class="replaceable"><code>pression</code></em>,
                но не <em class=
                "replaceable"><code>expression</code></em>. Для
                совпадения с этим вариантом можно использовать поисковый запрос <em class=
                "replaceable"><code>.*press</code></em>, но нужно понимать,
                что это приведёт к полному сканированию слов индекса,
                что может занять немало времени.</p>
              </dd>
              <dt><span class="term">«Однокоренные слова»</span></dt>
              <dd>
                <p>В этом режиме выполняется стандартный поиск по
                вариантам различных словоформ, реализуемый при обработке
                ввода пользователя, в связи с чем именно демонстрация данного процесса
                представляет наибольшую пользу.</p>
              </dd>
              <dt><span class="term">«Написание/произношение»</span></dt>
              <dd>
                <p>В этом режиме слово вводится в предполагаемой пользователем
                орфографии, а затем <span class=
                "application">Recoll</span> пытается подобрать к нему наиболее подходящие слова в индексе.
                Здесь применяется приложение проверки орфографии
                <span class="application">Aspell</span>, которое для работы
                этого механизма необходимо установить в системе
                (если документ содержит не ascii-символы, то для работы
                с поддержкой UTF-8 в <span class="application">Recoll</span>
                потребуется версия aspell не ниже 0.60). Для построения
                словаря из слов индекса (операция выполняется на заключительном этапе прохода
                индексирования) используется язык, указанный в локали.
                Можно лишь догадываться какой букет невероятных приключений
                ожидает пользователя, если ему доведётся перепутать языки.</p>
              </dd>
              <dt><span class="term">«Показать статистику индекса»</span></dt>
              <dd>
                <p>Отображает длинный список скучных числовых характеристик индекса</p>
              </dd>
              <dt><span class="term">«Показать непроиндексировавшиеся файлы»</span></dt>
              <dd>
                <p>Выводит файлы, при индексировании которых произошла ошибка.
                Обычно ошибка происходит, когда <span class=
                "command"><strong>recollindex</strong></span> не может преобразовать
                эти файлы в текстовый формат.</p>
              </dd>
            </dl>
          </div>
          <p>Важно понимать, что в тех случаях, когда в запросе <span class=
          "application">Recoll</span> не определено начало строки поиска
          (например, в выражениях с символами подстановки в виде
           <em class="replaceable"><code>*coll</code></em>),
          поиск по словоформам может занимать значительное
          время, поскольку предполагает поиск по полному
          списку словоформ. В настоящее время поиск по словоформам
          ограничен 10000 результатами для поиска с применением символов подстановки
          и регулярных выражений. Это огнаничение можно изменить
          в конфигурационном файле.</p>
          <p>Двойной щелчок по слову в списке результатов добавляет
          его в поле простого поиска. Также можно использовать
          функции копирования/вставки текста между списком результатов
          и любым из полей ввода (при этом выполняется соответствующая
          обработка переводов строк).</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.GUI.MULTIDB"
                id=
                "RCL.SEARCH.GUI.MULTIDB"></a>3.2.11.&nbsp;Несколько
                индексов</h3>
              </div>
            </div>
          </div>
          <p>В соответствующем разделе выше можно ознакомиться с общими положениями,
          касающимися <a class="link" href=
          "#RCL.INDEXING.CONFIG.MULTIPLE" title=
          "2.3.2.&nbsp;Multiple indexes">использования нескольких
          индексов</a>. Здесь будут описаны только аспекты, касающиеся
          графического интерфейса <span class="command"><strong>recoll</strong></span>.</p>
          <p>Экземпляр программы <span class="command"><strong>recoll</strong></span>
          всегда привязан к главному индексу, который обновляется при выполнении
          соответствующей команды в меню <span class="guimenu">«Файл»</span>,
          но может использовать любое количество внешних индексов <span class=
          "application">Recoll</span> для поиска. Внешние индексы
          можно выбрать на вкладке <span class=
          "guilabel">«Внешние индексы»</span> в диалоговом окне «Настройки»,
          которое открывается либо через: <span class=
          "guimenu">«Настройки»</span> → <span class=
          "guimenuitem">«Настройки интерфейса»</span> → <span class=
          "guimenuitem">«Настройка внешнего индекса»</span>, либо через
          <span class="guimenu">«Запрос»</span> → <span class=
          "guimenuitem">«Настройка внешнего индекса»</span>.</p>
          <p>Выбор индекса осуществляется в два этапа. Сначала необходимо
          определить все используемые индексы, а затем набор индексов,
          используемых для поиска. Эти параметры сохраняются при всяком
          выполнении программы (хранятся отдельно для каждой конфигурации
          <span class="application">Recoll</span>). Общий набор
          индексов обычно довольно стабилен, хотя список активных
          индексов может меняться относительно часто.</p>
          <p>Основной индекс (определяемый в <code class=
          "envar">RECOLL_CONFDIR</code>) активен всегда. Если это
          нежелательно, можно построить основную конфигурацию на
          базе пустого каталога и индексировать его.</p>
          <p>Когда в набор добавляется новый индекс, можно выбрать
          либо конфигурационный каталог <span class="application">Recoll</span>,
          либо каталог индекса <span class=
          "application">Xapian</span>. В первом случае,
          каталог индекса <span class="application">Xapian</span>
          будет получен из выбранной конфигурации.</p>
          <p>Если внешний индекс фактически расположен в томе,
          смонтированном с другого компьютера, и ссылается
          на удалённые файлы, то может возникнуть необходимость в настройке
          путей, чтобы они совпадали с локальными файлами (для открытия документов).
          Это можно сделать с помощью <a class="link"
          href="#RCL.SEARCH.PTRANS" title=
          "3.8.&nbsp;Path translations">средства корректировки путей</a>.</p>
          <p>Поскольку построение набора всех индексов при работе в графическом
          интерфейсе может оказаться весьма утомительно,
          для построения исходного набора можно использовать переменную окружения
          <code class="envar">RECOLL_EXTRA_DBS</code>. Обычно эта задача выполняется
          системным администратором, чтобы её не нужно было выполнять каждому пользователю.
          Эта переменная должна определять список каталогов индекса, разделённых двоеточиями,
          например:</p>
          <pre class=
          "screen">export RECOLL_EXTRA_DBS=/некий/путь/xapiandb:/некая/другая/бд</pre>
          <p>На ОС Windows, в качестве разделителей вместо двоеточий нужно использовать точку с запятой (<code class=
          "literal">;</code>).</p>
          <p>Имеется другая переменная окружения, <code class=
          "envar">RECOLL_ACTIVE_EXTRA_DBS</code>, которая позволяет добавлять индексы
          к списку активных индексов. Эта переменная была предложена и реализована
          пользователем <span class="application">Recoll</span>. Главным образом, полезна
          при использовании сценариев монтирования внешних томов с индексами
          <span class="application">Recoll</span>. При использования
          <code class="envar">RECOLL_EXTRA_DBS</code> и
          <code class="envar">RECOLL_ACTIVE_EXTRA_DBS</code> можно
          добавлять и активировать индексы для монтируемых томов
          при запуске <span class=
          "command"><strong>recoll</strong></span>. Недоступные
          индексы при запуске будут автоматически деактивированы.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.GUI.HISTORY"
                id=
                "RCL.SEARCH.GUI.HISTORY"></a>3.2.12.&nbsp;История
                документов</h3>
              </div>
            </div>
          </div>
          <p>Фактически просматриваемые документы (с помощью встроенной
          функции просмотра или внешнего инструмента) вводятся в сохраняемую
          историю документов.</p>
          <p>Отобразить список истории можно с помощью элемента меню
          <span class="guilabel">«Инструменты»/</span><span class=
          "guilabel">«История документов»</span>.</p>
          <p>Удалить документ из истории можно с помощью элемента меню
          <span class="guimenu">«Файл»</span><span class="guilabel">
          «Стереть историю документов»</span>.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.GUI.SORT" id=
                "RCL.SEARCH.GUI.SORT"></a>3.2.13.&nbsp;Сортировка
                результатов поиска и устранение дубликатов</h3>
              </div>
            </div>
          </div>
          <p>Документы в списке результатов обычно упорядочиваются 
          по соответствию. Другой порядок сортировки можно указать
          либо с помощью вертикальных стрелок в панели
          графического интерфейса для сортировки по дате, либо при
          переключении на отображение в виде электронной таблицы
          щелчком по любому её заголовку. Выбранный внутри таблицы
          результатов порядок сортировки остаётся активным и при
          переключении обратно к списку результатов, но только
          до тех пор, пока не будет нажата одна из вертикальных
          стрелок, а также и по снятии этого нажатия (происходит
          возврат к сортировке по соответствию).</p>
          <p>Параметры сортировки запоминаются между вызовами
          программы, но сортировка результата обычно всегда неактивна
          при её запуске. Существует возможность сохранения состояния
          активности сортировки между вызовами программы путём установки
          флажка <span class="guilabel">«Запомнить порядок сортировки
          результатов»</span> в параметрах.</p>
          <p>Также можно скрыть дублирующиеся элементы внутри
          списка результатов (документы с содержимым идентичным
          отображаемому). Проверка идентичности проводится на основе
          MD5-хэша контейнера документа, а не только на основе
          содержимого текста (чтобы, например, текстовый документ
          с добавлением изображения не оказался дубликатом документа
          содержащего только текст). Запрет отображения дубликатов
          контролируется с помощью соответствующего элемента управления
          в диалоговом окне <span class="guilabel">конфигурации графического интерфейса</span>,
          и по умолчанию обычно отключен.</p>
          <p>Когда документ в результатах поиска имеет скрытые дубликаты,
          на этом элементе списка результатов будет отображаться ссылка
          <code class="literal">«Дубликаты»</code>. При щелчке по этой ссылке
          будут отображены пути (URL-адреса + I-пути) к дублирующим элементам.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.SEARCH.GUI.SHORTCUTS" id=
                "RCL.SEARCH.GUI.SHORTCUTS"></a>3.2.14.&nbsp;Клавиши
                быстрого доступа</h3>
              </div>
            </div>
          </div>
          <p>Ряд стандартных действий в графическом интерфейсе
          может осуществляться с помощью клавиш быстрого доступа.
          В <span class="application">Recoll</span> 1.29, многие
          значения этих сочетаний можно настроить в диалоговом
          окне настройки интерфейса. Большая часть
          настроек относится к заданному контексту (например,
          действует в окне просмотра, в таблице результатов).</p>
          <p>Большую часть клавиш быстрого доступа можно изменить на более предпочитаемые
          последовательности с помощью редактора сочетаний клавиш в диалоге настройки
          интерфейса: <span class=
          "guimenu">«Настройки»</span> → <span class=
          "guimenuitem">«Настройка интерфейса»</span> → <span class=
          "guimenuitem">«Сочетания клавиш»</span>. Для изменения
          сочетания необходимо щёлкнуть по соответствующей ячейке
          в столбце <span class="guilabel">«Сочетание»</span>,
          и ввести желаемую последовательность.</p>
          <div class="table">
            <a name="idm1656" id="idm1656"></a>
            <p class="title"><b>Таблица&nbsp;3.1.&nbsp;Сочетания
            клавиш</b></p>
            <div class="table-contents">
              <table class="table" summary="Keyboard shortcuts"
              border="1">
                <colgroup>
                  <col align="left" class="c1">
                  <col align="left" class="c2">
                </colgroup>
                <thead>
                  <tr>
                    <th align="left">Описание</th>
                    <th align="left">Значение по умолчанию</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td colspan="2" align="left"><span class=
                    "command"><strong>Контекст: почти
                    везде</strong></span></td>
                  </tr>
                  <tr>
                    <td align="left">Выход из программы</td>
                    <td align="left">Ctrl+Q</td>
                  </tr>
                  <tr>
                    <td colspan="2" align="left"><span class=
                    "command"><strong>Контекст: сложный
                    поиск</strong></span></td>
                  </tr>
                  <tr>
                    <td align="left">Загрузка следующего элемента
                    из истории поиска</td>
                    <td align="left">Стрелка вверх</td>
                  </tr>
                  <tr>
                    <td align="left">Загрузка предыдущего элемента
                    из истории поиска</td>
                    <td align="left">Стрелка вниз</td>
                  </tr>
                  <tr>
                    <td colspan="2" align="left"><span class=
                    "command"><strong>Контекст: главное
                    окно</strong></span></td>
                  </tr>
                  <tr>
                    <td align="left">Очистить поиск. При этом
                    курсор ввода перемещается в поле ввода простого поиска
                    и удаляется текущий текст</td>
                    <td align="left">Ctrl+S</td>
                  </tr>
                  <tr>
                    <td align="left">Переместить курсор ввода
                    в область поля ввода поиска без удаления текущего текста</td>
                    <td align="left">Ctrl+L</td>
                  </tr>
                  <tr>
                    <td align="left">Переместить курсор ввода
                    в область поля поиска без удаления текущего текста</td>
                    <td align="left">Ctrl+Shift+S</td>
                  </tr>
                  <tr>
                    <td align="left">Переключить вывод текущего
                    результата поиска на отображение в виде таблицы или списка</td>
                    <td align="left">Ctrl+T</td>
                  </tr>
                  <tr>
                    <td colspan="2" align="left"><span class=
                    "command"><strong>Контекст: основное окно при
                    отображении результатов в виде таблицы</strong></span></td>
                  </tr>
                  <tr>
                    <td align="left">Переместить курсор ввода на
                    выделенную строку в таблице, либо на первую строку,
                    если ни одна из них не выделена</td>
                    <td align="left">Ctrl+R</td>
                  </tr>
                  <tr>
                    <td align="left">Перейдите на строку 0-9 или a-z в таблице</td>
                    <td align="left">Ctrl+[0-9] или
                    Ctrl+Shift+[a-z]</td>
                  </tr>
                  <tr>
                    <td align="left">Отмена текущего
                    выделения</td>
                    <td align="left">Esc</td>
                  </tr>
                  <tr>
                    <td colspan="2" align="left"><span class=
                    "command"><strong>Контекст: окно просмотра</strong></span></td>
                  </tr>
                  <tr>
                    <td align="left">Закрыть окно просмотра</td>
                    <td align="left">Esc</td>
                  </tr>
                  <tr>
                    <td align="left">Закрыть текущую вкладку</td>
                    <td align="left">Ctrl+W</td>
                  </tr>
                  <tr>
                    <td align="left">Открыть диалоговое окно для печати
                    содержимого текущей вкладки</td>
                    <td align="left">Ctrl+P</td>
                  </tr>
                  <tr>
                    <td align="left">Загрузить следующий результат поиска
                    из списка в текущую вкладку</td>
                    <td align="left">Shift+Down</td>
                  </tr>
                  <tr>
                    <td align="left">Загрузить следующий результат поиска
                      из списка в текущую вкладку</td>
                    <td align="left">Shift+Up</td>
                  </tr>
                  <tr>
                    <td colspan="2" align="left"><span class=
                    "command"><strong>Контекст: таблица
                    результатов</strong></span></td>
                  </tr>
                  <tr>
                    <td align="left">Копировать текст из выделенного
                    документа в буфер обмена</td>
                    <td align="left">Ctrl+G</td>
                  </tr>
                  <tr>
                    <td align="left">Копировать текст из выделенного
                      документа в буфер обмена и выйти из
                    Recoll</td>
                    <td align="left">Ctrl+Alt+Shift+G</td>
                  </tr>
                  <tr>
                    <td align="left">Открыть текущий документ</td>
                    <td align="left">Ctrl+O</td>
                  </tr>
                  <tr>
                    <td align="left">Открыть текущий документ и выйти из
                    Recoll</td>
                    <td align="left">Ctrl+Alst+Shift+O</td>
                  </tr>
                  <tr>
                    <td align="left">Открыть полный просмотр
                    текущего документа</td>
                    <td align="left">Ctrl+D</td>
                  </tr>
                  <tr>
                    <td align="left">Переключить отображение имён столбцов<td>
                    <td align="left">Ctrl+H</td>
                  </tr>
                  <tr>
                    <td align="left">Показать список фрагментов (ключевых слов в
                    контексте) для текущего документа</td>
                    <td align="left">Ctrl+E</td>
                  </tr>
                  <tr>
                    <td align="left">Переключить отображение букв/номеров строки</td>
                    <td align="left">Ctrl+V</td>
                  </tr>
                  <tr>
                    <td colspan="2" align="left"><span class=
                    "command"><strong>Контекст: окно
                    фрагментов</strong></span></td>
                  </tr>
                  <tr>
                    <td align="left">Закрыть окно фрагментов</td>
                    <td align="left">Esc</td>
                  </tr>
                  <tr>
                    <td align="left">Поиск в списке фрагментов
                    (метод №1)</td>
                    <td align="left">Ctrl+F</td>
                  </tr>
                  <tr>
                    <td align="left">Поиск в списке фрагментов
                    (метод №2)</td>
                    <td align="left">/</td>
                  </tr>
                  <tr>
                    <td align="left">Найти следующий экземпляр
                    поискового запроса</td>
                    <td align="left">F3</td>
                  </tr>
                  <tr>
                    <td align="left">Найти предыдущий экземпляр
                    поискового запроса</td>
                    <td align="left">Shift+F3</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div><br class="table-break">
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.GUI.TIPS" id=
                "RCL.SEARCH.GUI.TIPS"></a>3.2.15.&nbsp;Советы по
                поиску</h3>
              </div>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.GUI.TIPS.TERMS" id=
                  "RCL.SEARCH.GUI.TIPS.TERMS"></a>Слова и расширение
                  поиска</h4>
                </div>
              </div>
            </div>
            <p><b>Завершение слова.&nbsp;</b>При вводе в поле простого
            поиска появляется выпадающее меню с отображением возможных завершений
            для текущей строки. Значения, предваряемые значком с изображением
            часов, извлечены из истории, а строки с изображением
            увеличительного стекла взяты из состава слов индекса.
            Отображение этого меню можно отключить в настройках.</p>
            <p><b>Копирование новых слов из результата поиска или текста
            в окне просмотра.&nbsp;</b>Двойной щелчок по слову в списке
            результатов или в окне просмотра приводит к копированию его
            в поле ввода простого поиска.</p>
            <p><b>Символы подстановки.&nbsp;</b>Символы подстановки можно
            использовать со словами в поиске во всех его формах. <a class="link"
            href="#RCL.SEARCH.WILDCARDS" title=
            "3.6.1.&nbsp;Wildcards">Более подробная информация по символам подстановки</a>.</p>
            <p><b>Автоматическая подстановка суффиксов.&nbsp;</b> Такие слова,
            как <code class="literal">odt</code> или <code class=
            "literal">ods</code> могут автоматически переводиться
            в выражения на языке запроса <code class="literal">ext:xxx</code>.
            Включить эту функцию можно в графическом интерфейсе на панели <span class=
            "guilabel">параметров поиска</span>.</p>
            <p><b>Отключение поиска по словоформам.&nbsp;</b> Ввод
            слова с прописной буквы в любом поле поиска отключает
            поиск по словоформам (при вводе слова <code class=
            "literal">Garden</code> вместо <code class=
            "literal">garden</code> поиск по слову <code class=
            "literal">gardening</code> выполняться не будет). Это единственный случай, при котором
            регистр символа играет особую роль при выполнении поиска
            с помощью <span class="application">Recoll</span>. Поиск по
            словоформам может быть также отключен в настройках, где
            можно изменить и язык словоформ.</p>
            <p><b>Поиск сопутствующих документов.&nbsp;</b>При выборе
            элемента <span class="guilabel">«Найти похожие документы»</span>
            контекстного меню результатов поиска составляется набор
            «характерных» слов из текущего результата, которые затем
            копируются в поле ввода простого поиска. Заданный список
            можно подправить и запустить поиск документов, которые могут
            иметь отношение к текущему результату.</p>
            <p><b>Имена файлов.&nbsp;</b>Имена файлов в процессе
            индексирования добавляются в качестве элементов поиска. Поэтому можно
            указывать их в обычных полях поиска как обычные слова
            (изначально <span class="application">Recoll</span> индексировал
            все каталоги в пути к файлу в качестве элементов поиска,
            но впоследствии эта практика была прекращена ввиду
            отсутствия ощутимой пользы).
            С другой стороны, можно организовать специализированный
            поиск файлов, который будет искать <span class=
            "emphasis"><em>только</em></span> имена файлов,
            в связи с чем будет работать быстрее обычного поиска, особенно
            при использовании символов подстановки.</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.GUI.TIPS.PHRASES" id=
                  "RCL.SEARCH.GUI.TIPS.PHRASES"></a>Работа с фразами
                  и поиском по близости</h4>
                </div>
              </div>
            </div>
            <p><b>Поиск по фразам.&nbsp;</b>Поисковый запрос для
            поиска по фразе может выглядеть как несколько слов,
            заключённых в двойные кавычки.
            Пример: Запрос <code class="literal">"user manual"</code>
            будет выполнять поиск только слова <code class=
            "literal">«user»</code>, непосредственно за которым следует
            слово <code class="literal">«manual»</code>. С тем же
            результатом можно использовать поле <span class="guilabel">
            «Фраза»</span> в диалоговом окне сложного поиска. Фразы
            можно вводить параллельно с обычными словами во все поля
            ввода простого или сложного поиска, за исключением поля
            <span class="guilabel">«Фраза»</span>.</p>
            <p><b>Поиск по близости.&nbsp;</b>Поиск по близости
            отличается от поиска по фразам тем, что не обязывает
            строго придерживаться порядка следования слов.
            Поиск по близости можно задать путём указания типа <span class=
            "guilabel">«Близости»</span> в сложном поиске или подстановкой
            буквы «p» в конец выражения.
            Пример: запрос "user manual"p совпадает также и с фразой "manual user".
            См. также <a class="link" href=
            "#RCL.SEARCH.LANG.MODIFIERS" title=
            "3.5.4.&nbsp;Modifiers">раздел модификаторов</a> из
            документации к языку запросов.</p>
            <p><b>Автофраза.&nbsp;</b>Этот параметр можно задать в
            диалоговом окне настройки. При его включении происходит
            автоматическое построение фраз и добавление их к простым запросам,
            в случае выполнения поиска в режиме <code class="literal">«Любые слова»</code>.
            Это не приведёт к радикальным изменениям результатов поиска,
            однако существенно поднимет планку соответствия для результатов,
            в которых поисковый запрос составляет фразу. Например: поиск по
            <code class="literal">virtual reality</code>
            обнаружит соответствие во всех документах, содержащих либо <code class=
            "literal">virtual</code>, либо <code class=
            "literal">reality</code>, либо оба слова сразу, но при этом  документы,
            содержащие фразу <code class="literal">«virtual
            reality»</code> окажутся выше по списку.</p>
            <p>Поиск по фразе может работать медленнее,
            если использовать распространённые слова.
            Если параметр <code class=
            "varname">«Автофраза»</code> активирован, очень
            распространённые слова будут удаляться из автоматически
            конструируемых фраз. Порог для удаления слов устанавливается
            в настройках поиска.</p>
            <p><b>Фразы и аббревиатуры.&nbsp;</b>Сокращения с
            точками, например <code class="literal">I.B.M.</code>,
            также автоматически индексируются в виде слов без точек:
            <code class="literal">IBM</code>. Поиск по слову
            во фразе (например: <code class=
            "literal">"the IBM company"</code>) совпадёт
            с аббревиатурой, содержащей точки, только при увеличении погрешности фразы
            (в окне сложного поиска или с помощью модификатора
            языка поиска <code class="literal">o</code>).
            Полностью идентичные слова будут совпадать в обычном порядке.</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.GUI.TIPS.MISC" id=
                  "RCL.SEARCH.GUI.TIPS.MISC"></a>Прочие</h4>
                </div>
              </div>
            </div>
            <p><b>Работа с полями.&nbsp;</b> Можно использовать <a class=
            "link" href="#RCL.SEARCH.LANG" title=
            "3.5.&nbsp;The query language">язык запросов</a> и
            спецификации полей для поиска только определённых
            частей документов. Это представляет особенную пользу
            в работе с электронными письмами, например, только для
            поиска электронных писем только от конкретного адресата:
            <code class="literal">search tips from:helpfulgui</code></p>
            <p><b>Настройка столбцов таблицы результатов поиска.&nbsp;</b>
            При отображении результатов поиска в режиме таблицы щелчком
            правой клавиши мыши по заголовку таблицы можно вывести
            контекстное меню, с помощью которого настраивается
            отображение столбцов. Можно перетаскивать заголовки таблицы
            для настройки порядка их отображения. Можно щёлкать по ним
            для сортировки по отображаемому в столбце полю. А также
            можно сохранять полученные результаты в CSV-формат.</p>
            <p><b>Изменение геометрии графического интерфейса.&nbsp;</b>Конфигурацию
            отображения графического интерфейса можно менять в широких
            пределах путём перетаскивания панелей управления
            в одну из сторон (их расположение запоминается между сеансами),
            а также перемещением фильтров категорий к меню (можно настроить в окне
            <span class="guimenu">«Настройки»</span> → <span class=
            "guimenuitem">«Настройка интерфейса»</span> → <span class=
            "guimenuitem">«Интерфейс пользователя»</span>).</p>
            <p><b>Описание запроса.&nbsp;</b>Полное
            описание поискового запроса, включая поиск по словоформам
            и использование логических операторов, можно получить щелчком по
            заголовку результатов поиска.</p>
            <p><b>История сложного поиска.&nbsp;</b>Вывод любого из
            последних ста запросов сложного поиска можно получить при работе
            в окне сложного поиска нажатием на клавиши со стрелками вверх и вниз.</p>
            <p><b>Принудительное открытие окна предпросмотра.&nbsp;</b>Можно
            использовать сочетание <span class=
            "keycap"><strong>Shift</strong></span>+щелчок по ссылке
             <code class="literal">Просмотр</code> списка результатов
            для принудительного создания нового окна просмотра вместо
            новой вкладки в существующем окне.</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.SAVING" id=
                "RCL.SEARCH.SAVING"></a>3.2.16.&nbsp;Сохранение
                и восстановление запросов</h3>
              </div>
            </div>
          </div>
          <p>При выполнении поиска (как простого, так и сложного) сохраняется
          история запросов, но число этих записей ограничено: старые запросы
          в конце концов удаляются. Также иногда бывает трудно найти важные
          запросы среди всех остальных. Поэтому существует возможность
          сохранения запросов обоих типов в файлы непосредственно из меню
          графического интерфейса: <span class="guimenu">«Файл»</span> →
          <span class="guimenuitem">«Сохранить последний запрос» / «Загрузить последний запрос»</span></p>
          <p>По умолчанию для сохранения запросов используется 
          подкаталог текущего конфигурацинного каталога,
          запросы сохраняются в виде обычных файлов и могут записываться или
          перемещаться куда угодно.</p>
          <p>Некоторые параметры сохранённого запроса задаются в
          настройках (например, <code class="literal">«Автофраза»</code>
          или активные внешние индексы) и при загрузке запроса могут
          отличаться от настроек, существовавших во время его сохранения.
          В таком случае <span class="application">Recoll</span> предупредит
          о наличии расхождений, но не будет изменять пользовательские настройки.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.GUI.CUSTOM"
                id=
                "RCL.SEARCH.GUI.CUSTOM"></a>3.2.17.&nbsp;Настройка
                интерфейса поиска</h3>
              </div>
            </div>
          </div>
          <p>Некоторые параметры интерфейса поиска можно настраивать
          через элемент <span class="guimenu">«Настройка
          интерфейса»</span> в меню <span class="guimenu">«Настройки»</span>.</p>
          <p>В диалоговом окне находится несколько вкладок, относящихся к
          самому интерфейсу, параметрам поиска и возвращению результатов,
          а также к применяемым в поиске индексам.</p>
          <p><a name="RCL.SEARCH.GUI.CUSTOM.UI" id=
          "RCL.SEARCH.GUI.CUSTOM.UI"></a><b>Параметры
          интерфейса пользователя:&nbsp;</b></p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p><span class="guilabel">Выделение слов поискового запроса</span>:
                Слова из поискового запроса выделяются
                в выборках списка результатов и окна просмотра.
                Здесь же можно выбрать и цвет. Любая строка обозначения
                цвета в Qt должна работать (например, <code class=
                "literal">red</code>, <code class=
                "literal">#ff0000</code>). По умолчанию используется
                <code class="literal">blue</code>.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Стили CSS</span>: Имя
                текстового css-файла стилей <span class="application">Qt</span>,
                который применяется ко всему приложению Recoll при загрузке.
                Значение по умолчанию отсутствует, но в каталоге
                <code class="filename">/usr/share/recoll/examples</code>
                находится базовый файл стилей (<code class="filename">recoll.qss</code>).
                При помоши файла стилей можно менять большинство
                графических параметров <span class=
                "command"><strong>recoll</strong></span>: цвета, шрифты, и т.д.
                См. несколько простых примеров в образце файла.</p>
                <p>Здесь важно понимать, что параметры (например:
                цвет фона), заданные в стилях графического интерфейса <span class=
                "application">Recoll</span>
                переопределяют глобальные настройки системы и нередко
                способствуют появлению странных побочных эффектов:
                например, если установить светлый цвет переднего  плана
                и тёмный цвет фона в настройках рабочего стола, то в
                css-стилях <span class="application">Recoll</span>
                устанавливается только цвет фона, и поскольку он тоже светлый,
                текст в графическом интерфейсе <span class="application">Recoll</span>
                будет отображаться светлым шрифтом на светлом фоне.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Предельный размер текста, выбранного
                для просмотра</span> Выделение элемента поиска
                в тексте перед вставкой в окно просмотра требует
                выполнения значительного объёма обработки, которая для ускорения
                работы может отключаться при превышении текстом определённого размера.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Предпочитать
                HTML простому тексту при просмотре.</span> При включении данного параметра
                в окне просмотра Recoll будет отображаться HTML. Если при
                отображении HTML в Qt возникают проблемы, то данный параметр
                можно отключить для вывода простого текста.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Активировать ссылки в
                режиме просмотра</span>. При установке параметра в
                Recoll ссылки HTTP, найденные внутри
                простого текста, преобразуются в настоящие HTML-ссылки,
                которые можно открыть в браузере по умолчанию щелчком по ссылке в окне просмотра.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Стиль отображения строк HTML
                в простом тексте</span>: при отображении простого текста
                в окне просмотра выполняется попытка сохранить часть
                переносов строк и отступов, имеющихся в исходном тексте.
                Для этого могут использоваться либо HTML-теги PRE, которые
                хорошо сохраняют отступы, но приводят к горизонтальному
                прокручиванию длинных строк, либо теги BR на переносах строк
                в исходном тексте, которые позволяют редактору вставлять
                свои переносы строк по ширине окна, однако приводят
                к потере части исходных отступов.
                Третий параметр доступен со времени последних
                выпусков и будет, вероятно, лучшим из них:
                использовать теги PRE при переносе строк.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Выбор приложений-редакторов</span>:
                открывает диалоговое окно, в котором
                можно выбрать приложение для использования с
                каждым MIME-типом. По умолчанию для этого используется
                утилита <span class=
                "command"><strong>xdg-open</strong></span>,
                но в данном диалоговом окне можно переопределить это
                значение и устанавливать исключения для MIME-типов,
                которые будут открываться в соответствии с настройками
                <span class="application">Recoll</span>. Это полезно
                для передачи таких параметров, как номер страницы или
                строка поиска в поддерживающие их приложения
                (например, <span class="application">evince</span>).
                Однако с <span class="command"><strong>xdg-open</strong></span>
                так сделать не получится, поскольку данное приложение поддерживает
                передачу только одного из этих параметров.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Отключить автодополнение
                Qt в строке поиска</span>: этот параметр отключает
                вывод всплывающего окна автодополнения. В этом случае
                автодополнение можно будет открыть либо вводом пробела в области поиска,
                после чего откроется полная история, либо нажатием кнопки с изображением
                часов справа от этого поля.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Стиль отображения фильтров</span>: здесь можно выбрать отображение категорий
                документов в виде списка, ряда кнопок или меню.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Начать с режима простого поиска</span>: здесь в качестве типа поиска при запуске
                программы можно выбрать либо простой поиск, либо фиксированный тип поиска (например, <code class="literal">«Язык
                запросов»</code>, либо тот тип поиска, который использовался при последнем завершении программы).</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Открывать диалог сложного
                поиска при запуске</span>: При частом использовании
                этого диалогового окна имеет смысл установить флажок, после чего
                диалог будет открываться автоматически при запуске recoll.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Запомнить порядок сортировки
                результатов</span>: При установке данного параметра
                Recoll запоминает заданный механизм сортировки между сеансами работы программы.
                Обычно при запуске сортировка отключена.</p>
              </li>
            </ul>
          </div>
          <p><a name="RCL.SEARCH.GUI.CUSTOM.RL" id=
          "RCL.SEARCH.GUI.CUSTOM.RL"></a><b>Параметры списка
          результатов:&nbsp;</b></p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p><span class="guilabel">Число результатов на странице
                </span></p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Шрифт списка результатов</span>:
                Список результатов обычно включает достаточно большое
                количество информации, в силу чего может возникнуть желание
                настроить шрифт и/или его размер. Остальные шрифты,
                используемые в <span class="application">Recoll</span>,
                определяются общей конфигурацией Qt (воспользуйтесь
                командой <span class="command"><strong>qtconfig</strong></span>).</p>
              </li>
              <li class="listitem">
                <p><a name="RCL.SEARCH.GUI.CUSTOM.RESULTPARA" id=
                "RCL.SEARCH.GUI.CUSTOM.RESULTPARA"></a><span class=
                "guilabel">Изменить строку форматирования параграфа
                списка результатов поиска</span>: позволяет изменить
                внешний вид каждого элемента списка результатов поиска.
                См. <a class="link" href=
                "#RCL.SEARCH.GUI.CUSTOM.RESLIST" title=
                "The result list format">раздел настройки списка
                результатов</a>.</p>
              </li>
              <li class="listitem">
                <p><a name="RCL.SEARCH.GUI.CUSTOM.RESULTHEAD" id=
                "RCL.SEARCH.GUI.CUSTOM.RESULTHEAD"></a><span class=
                "guilabel">Редактировать вставку html-заголовка
                страницы результатов</span>: позволяет определить
                формат текста, вставляемого в заголовок HTML-страницы
                результатов. Более подробная информация доступна в <a class="link" href=
                "#RCL.SEARCH.GUI.CUSTOM.RESLIST" title=
                "The result list format">разделе настройки списка
                результатов</a>.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Формат даты</span>:
                позволяет указать формат для отображения даты
                внутри списка результатов. Строка должна оформляться
                в виде строки вывода strftime() (man strftime).</p>
              </li>
              <li class="listitem">
                <p><a name="RCL.SEARCH.GUI.CUSTOM.ABSSEP" id=
                "RCL.SEARCH.GUI.CUSTOM.ABSSEP"></a><span class=
                "guilabel">Условный разделитель выдержек</span>: здесь для
                синтетических описаний, выстраиваемых из данных индекса, которые
                обычно создаются из нескольких фрагментов различных
                частей документа, определяется разделитель фрагментов текста,
                в качестве которого по умолчанию используется многоточие.</p>
              </li>
            </ul>
          </div>
          <p><a name="RCL.SEARCH.GUI.CUSTOM.SEARCH" id=
          "RCL.SEARCH.GUI.CUSTOM.SEARCH"></a><b>Параметры
          поиска:&nbsp;</b></p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p><span class="guilabel">Скрывать дубликаты</span>:
                принимает решение о том являются ли элементы списка результатов
                одинаковыми документами, найденными в разных местах.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Язык словоформ</span>:
                поиск по словоформам имеет сильную зависимость от языка документа.
                В этом списке можно выбирать базы данных словоформ,
                которые были построены в процессе индексирования
                (эта настройка выполняется в <a class="link" href=
                "#RCL.INSTALL.CONFIG.RECOLLCONF" title=
                "5.4.2.&nbsp;Recoll main configuration file, recoll.conf">
                главном конфигурационном файле</a>) или добавлены
                позднее с помощью команды
                <span class="command"><strong>recollindex
                -s</strong></span> (См. руководство по recollindex).
                Динамически добавленные языки словоформ будут
                удалены при следующем проходе индексирования, если они
                не были добавлены в конфигурационный файл.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Автоматически добавлять
                фразу при простом поиске</span>: фраза будет
                автоматически построена и добавлена в простой поиск
                при работе в режиме <code class="literal">«Любые
                слова»</code>. Это увеличит число соответствий в результатах
                для элементов поиска, построенных в виде фразы (смежное расположение слов в определённом порядке).</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Процент порогового значения
                частоты автофраз</span>: очень часто встречающиеся слова
                не должны включаться в автофразы для поиска
                по соображениям производительности. Параметр определяет
                предельное значение процента (процент документов, содержащих слово).</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Заменять описания
                из документов</span>: определяет необходимость
                создания и отображения синтетического описания вместо
                настоящего описания найденного в самом документе.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Составлять описания на лету</span>:
                контролирует необходимость построения описания документов
                (в виде набора <span class=
                "emphasis"><em>фрагментов</em></span>) при
                отображении списка результатов. Описания
                конструируются путём извлечения контекста из информации
                о документе, а также в непосредственной близости от элементов поиска.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Размер создаваемого
                описания</span>: настроить по вкусу…</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Число слов контекста
                в описании</span>: сколько слов будет отображаться
                вокруг каждого совпадения элемента поиска.</p>
              </li>
              <li class="listitem">
                <p><span class="guilabel">Распознавание типа файлов
                при помощи файла сигнатур (magic file)</span>: список слов,
                которые автоматически превращаются в расширение имени файла <code class=
                "literal">ext:xxx</code> при запуске запроса на языке запросов (например:
                <code class="literal">doc xls xlsx...</code>). Это
                позволит сэкономить время пользователям, часто использующим типы файлов
                при поиске.</p>
              </li>
            </ul>
          </div>
          <p><a name="RCL.SEARCH.GUI.CUSTOM.EXTRADB" id=
          "RCL.SEARCH.GUI.CUSTOM.EXTRADB"></a><b>Внешние
          индексы:&nbsp;</b>Это окно позволяет выполнить обзор
          дополнительных индексов, которые предполагается использовать
          в поиске. Внешние индексы определяются по каталогам своих
          баз данных (например:<code class="filename">/home/someothergui/.recoll/xapiandb</code>,
          <code class=
          "filename">/usr/local/recollglobal/xapiandb</code>).</p>
          <p>После выбора индексы появляются в списке
          <span class="guilabel">Внешних индексов</span>, где
          в любой момент можно выбрать используемые индексы
          путём установки или снятия флажков.</p>
          <p>Основная база данных (в которую индексируются данные
          текущей конфигурации) всегда неявно активна. Если это
          нежелательно, можно построить основную конфигурацию на
          базе пустого каталога и индексировать пустой каталог. Также
          может потребоваться альтернативный индексатор для организации
          способа очистки индекса от устаревших данных,</p>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.GUI.CUSTOM.RESLIST" id=
                  "RCL.SEARCH.GUI.CUSTOM.RESLIST"></a>Формат
                  списка результатов</h4>
                </div>
              </div>
            </div>
            <p>Recoll обычно использует полнофункциональный HTML-процессор
            для отображения списка результатов и <a class="link"
            href="#RCL.SEARCH.GUI.RESULTLIST.MENU.SNIPPETS">окна
            фрагментов</a>. В зависимости от версии, эта функция может
            быть основана либо на Qt WebKit, либо на Qt WebEngine. При этом
            возможна полная настройка отображения списка результатов с
            поддержкой CSS и Javascript.</p>
            <p>Также имеется возможность собрать <span class="application">Recoll</span>
            на базе более простого виджета отображения HTML Qt QTextBrowser,
            что может быть необходимо, если вышеупомянутые виджеты
            не портированы в систему, а также для уменьшения размера
            приложения и его зависимостей. В этом случае возможности
            по настройке параметров списка будут значительно более ограничены,
            однако сохраняется способность задавать как данные, отображаемые в каждом
            результате, так и способ их отображения.</p>
            <p>Настроить представление списка результатов можно при помощи
            следующих двух элементов:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style=
              "list-style-type: disc;">
                <li class="listitem">
                  <p>Формат абзаца</p>
                </li>
                <li class="listitem">
                  <p>Код HTML внутри раздела заголовка. Применяется
                  также и для <a class="link" href=
                  "#RCL.SEARCH.GUI.RESULTLIST.MENU.SNIPPETS">окна
                  фрагментов</a>.</p>
                </li>
              </ul>
            </div>
            <p>Формат параграфа и заголовка можно
            изменять на вкладке <span class="guilabel">«Список
            результатов»</span> диалога <span class="guilabel">«Настройка
            интерфейса»</span>.</p>
            <p>HTML-заголовок используется как для списка результатов,
            так и для окна фрагментов. Список фрагментов представлен
            в виде таблицы и имеет атрибут списка <code class="literal">фрагментов</code>.
            Каждый абзац в списке результатов является таблицей
            с классом <code class="literal">respar</code>,
            что можно изменить путём смены формата абзацев.</p>
            <p><a class="ulink" href="https://www.recoll.org/pages/custom.html"
              target="_top">Страница на веб-сайте <span class="application">Recoll</span>,
            повествующая о настройке списка результатов</a>
            содержит несколько примеров форматирования.</p>
            <div class="sect4">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title"><a name=
                    "RCL.SEARCH.GUI.CUSTOM.RESLIST.PARA" id=
                    "RCL.SEARCH.GUI.CUSTOM.RESLIST.PARA"></a>Формат
                    абзаца</h5>
                  </div>
                </div>
              </div>
              <p>Это произвольная строка HTML, которая формируется для отображения результатов
              путём подстановки параметров в стиле printf с применением спецификаторов <code class=
              "literal">%</code>.</p>
              <div class="note" style=
              "margin-left: 0.5in; margin-right: 0.5in;">
                <h3 class="title">Примечание</h3>
                <p>Для экранирования символов <code class="literal">%</code>
                во вводе необходимо представить их в виде
                <code class="literal">%%</code>. Например, <code class=
                "literal">&lt;table style="width: 100%;"&gt;</code>
                необходимо ввести в виде <code class=
                "literal">&lt;table style="width:
                100%%;"&gt;</code>.</p>
              </div>
              <p>При этом для подстановки применяются следующие спецификаторы:</p>
              <div class="variablelist">
                <dl class="variablelist">
                  <dt><span class="term">%A</span></dt>
                  <dd>
                    <p>Описание. При отсутствии <code class="literal">%s</code>
                    содержит либо атрибут 
                    <code class="literal">описания</code> документа,
                    при его наличии, либо синтетическое описание
                    фрагментов. В случае наличия <code class=
                    "literal">%s</code> представляет собой либо
                    описание документа, либо пустое поле.</p>
                  </dd>
                  <dt><span class="term">%D</span></dt>
                  <dd>
                    <p>Дата.</p>
                  </dd>
                  <dt><span class="term">%I</span></dt>
                  <dd>
                    <p>Имя изображения значка. Обычно определяется
                    по MIME-типу. Ассоциации определяются в
                    конфигурационном файле <a class="link" href=
                    "#RCL.INSTALL.CONFIG.MIMECONF" title=
                    "5.4.5.&nbsp;The mimeconf file"><code class=
                    "filename">mimeconf</code></a>. При обнаружении 
                    миниатюры файла, расположенной согласно
                    стандарту Freedesktop, эта миниатюра будет отображаться
                    вместо значка.</p>
                  </dd>
                  <dt><span class="term">%K</span></dt>
                  <dd>
                    <p>Ключевые слова.</p>
                  </dd>
                  <dt><span class="term">%L</span></dt>
                  <dd>
                    <p>Предварительный просмотр, изменение, а иногда и ссылки
                    на фрагменты.</p>
                  </dd>
                  <dt><span class="term">%M</span></dt>
                  <dd>
                    <p>MIME-тип.</p>
                  </dd>
                  <dt><span class="term">%N</span></dt>
                  <dd>
                    <p>Номер результата на странице результатов.</p>
                  </dd>
                  <dt><span class="term">%P</span></dt>
                  <dd>
                    <p>Url-адрес родительского каталога. При использовании вложенного
                    документа применяется родительский каталог
                    файла-контейнера верхнего уровня.</p>
                  </dd>
                  <dt><span class="term">%R</span></dt>
                  <dd>
                    <p>Процент совпадения.</p>
                  </dd>
                  <dt><span class="term">%S</span></dt>
                  <dd>
                    <p>Информация о размере.</p>
                  </dd>
                  <dt><span class="term">%s</span></dt>
                  <dd>
                    <p>Синтетическое описание «фрагментов»
                    (найденный в документе текст вокруг элементов поиска).</p>
                  </dd>
                  <dt><span class="term">%T</span></dt>
                  <dd>
                    <p>Заголовок (если задан), либо имя файла.</p>
                  </dd>
                  <dt><span class="term">%t</span></dt>
                  <dd>
                    <p>Заголовок или пустое поле.</p>
                  </dd>
                  <dt><span class="term">%(имя файла)</span></dt>
                  <dd>
                    <p>Имя файла.</p>
                  </dd>
                  <dt><span class="term">%U</span></dt>
                  <dd>
                    <p>Url-адрес</p>
                  </dd>
                </dl>
              </div>
              <p>В дополнение к показанным выше предустановленным значениям, все
              строки вида <code class=
              "literal">%(fieldname)</code> заменяются на значение
              поля с именем <code class=
              "literal">fieldname</code> для данного документа. Этот способ
              позволяет получить доступ только к сохранённым полям, тогда как значение
              индексированного, но не сохранённого поля на данном этапе
              процессу поиска неизвестно (см. <a class="link"
              href="#RCL.PROGRAM.FIELDS" title=
              "4.2.&nbsp;Field data processing">конфигурация поля</a>).
              В настоящее время не так много полей сохраняется по умолчанию
              отдельно от указанных выше значений (только <code class="literal">author</code> и
              <code class="literal">filename</code>). Поэтому использование
              данной возможности потребует выполнения дополнительной настройки.
              Отличным кандидатом для использования в этом качестве могло бы стать поле
              <code class="literal">recipient</code>, создаваемое обработчиком ввода сообщения.</p>
              <p>Ссылки «Просмотр», «Открыть», а также ссылки
              на фрагменты имеют следующий формат <code class="literal">&lt;
              href="P%N"&gt;</code>, <code class="literal">&lt;
              href="E%N"&gt;</code> и <code class="literal">&lt;
              href="A%N"&gt;</code>, где вместо <em class=
              "replaceable"><code>docnum</code></em> (%N) подставляется
              номер документа на странице результатов).</p>
              <p>Адрес ссылки, определяемый как <code class=
              "literal">«F%N»</code>, открывает документ, входящий
              в состав родительского каталога <code class="literal">%P</code>,
              в каковом случае в окне менеджера файлов обычно открывается
              папка, содержащая файл контейнера. Например:</p>
              <pre class=
              "programlisting">&lt;a href="F%N"&gt;%P&lt;/a&gt;</pre>
              <p>Адрес ссылки в виде <code class=
              "literal">R%N|<em class=
              "replaceable"><code>scriptname</code></em></code>
              запускает соответствующий сценарий, который открывает файл результата
              (у вложенного документа сценарий открывает
              родителя верхнего уровня). См. <a class=
              "link" href="#RCL.SEARCH.GUI.RUNSCRIPT" title=
              "3.2.5.&nbsp;Running arbitrary commands on result files">
              раздел по определению сценариев</a>. Обратите внимание на то,
              что значение поля <em class="replaceable"><code>scriptname</code></em>
              должно соответствовать значению поля <code class=
              "literal">Name</code> файла рабочего стола, а
              не его имени.</p>
              <p>Значение формата строки абзаца по умолчанию:</p>
              <pre class="screen">
            "&lt;table class=\"respar\"&gt;\n"
            "&lt;tr&gt;\n"
            "&lt;td&gt;&lt;a href='%U'&gt;&lt;img src='%I' width='64'&gt;&lt;/a&gt;&lt;/td&gt;\n"
            "&lt;td&gt;%L &amp;nbsp;&lt;i&gt;%S&lt;/i&gt; &amp;nbsp;&amp;nbsp;&lt;b&gt;%T&lt;/b&gt;&lt;br&gt;\n"
            "&lt;span style='white-space:nowrap'&gt;&lt;i&gt;%M&lt;/i&gt;&amp;nbsp;%D&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;i&gt;%U&lt;/i&gt;&amp;nbsp;%i&lt;br&gt;\n"
            "%s %A %K&lt;/td&gt;\n"
            "&lt;/tr&gt;&lt;/table&gt;\n"
            </pre>
              <p>Пример для иллюстрации использования более веб-ориентированного
              формата:</p>
              <pre class="screen">
            &lt;u&gt;&lt;b&gt;&lt;a href="P%N"&gt;%T&lt;/a&gt;&lt;/b&gt;&lt;/u&gt;&lt;br&gt;
            %A&lt;font color=#008000&gt;%U - %S&lt;/font&gt; - %L
            </pre>
              <p>Обратите внимание на то, что в примере выше ссылка на P%N для просмотра
              создаётся либо с использованием заголовка, либо в более аккуратном исполнении:</p>
              <pre class="screen">
            &lt;img src="%I" align="left"&gt;%L &lt;font color="#900000"&gt;%R&lt;/font&gt;
            &amp;nbsp;&amp;nbsp;&lt;b&gt;%T&amp;&lt;/b&gt;&lt;br&gt;%S&amp;nbsp;
            &lt;font color="#808080"&gt;&lt;i&gt;%U&lt;/i&gt;&lt;/font&gt;
            &lt;table bgcolor="#e0e0e0"&gt;
            &lt;tr&gt;&lt;td&gt;&lt;div&gt;%A&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;
            &lt;/table&gt;%K
            </pre>
              <p>Эти и несколько других подобных примеров размещены <a class=
              "ulink" href=
              "https://www.recoll.org/pages/custom.html" target=
              "_top">на веб-сайте с изображениями для иллюстрации их внешнего вида.</a></p>
              <p>Также можно <a class="link" href=
              "#RCL.SEARCH.GUI.CUSTOM.ABSSEP">определить значение
              разделителя фрагментов, применяющегося при составлении раздела описания</a>.</p>
            </div>
          </div>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.SEARCH.KIO" id=
              "RCL.SEARCH.KIO"></a>3.3.&nbsp;Поиск с помощью
              KIO slave в KDE</h2>
            </div>
          </div>
        </div>
        <p>KIO slave для <span class="application">Recoll</span>
        также может выполнять поиск с помощью <span class="application">Recoll</span>
        путём ввода соответствующего URL-адреса в диалоговом окне открытия
        файла KDE или <span class="command"><strong>Dolphin</strong></span>.
        Результаты отображаются в виде элементов каталога.</p>
        <p>Инструкции для сборки данного модуля находятся в дереве исходников. См.: <code class=
        "filename">kde/kio/recoll/00README.txt</code>. Некоторые дистрибутивы Linux
        включают в себя пакет модуля kio-recoll, поэтому есть смысл проверить это перед тем, как погружаться
        в процесс сборки. Может быть пакет уже ждёт вас готовый к установке в один клик.</p>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.SEARCH.COMMANDLINE" id=
              "RCL.SEARCH.COMMANDLINE"></a>3.4.&nbsp;Поиск в командной строке</h2>
            </div>
          </div>
        </div>
        <p>Существует несколько вариантов получения результатов поиска в виде
        потока текстовых данных без использования графического интерфейса:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p>С помощью параметра командной строки <code class="option">-t</code>
              программы <span class=
              "command"><strong>recoll</strong></span>, либо
              <span class=
              "command"><strong>recollq</strong></span> (по ссылке).</p>
            </li>
            <li class="listitem">
              <p>С помощью самой программы <span class=
              "command"><strong>recollq</strong></span>.</p>
            </li>
            <li class="listitem">
              <p>Путём создания программы на <span class=
              "application">Python</span>, с помощью
              <a class="link" href="#RCL.PROGRAM.PYTHONAPI" title=
              "4.3.&nbsp;Python API">Recoll Python API</a>.</p>
            </li>
          </ul>
        </div>
        <p>Первые два метода работают совершенно одинаково принимая/ работая
        с одинаковыми аргументами (за исключением дополнительного параметра
        <code class="option">-t</code>, передаваемого <span class=
        "command"><strong>recoll</strong></span>). Передаваемый запрос
        указывается в составе аргументов команды.</p>
        <p><span class="command"><strong>recollq</strong></span> не
        всегда собирается по умолчанию. Для его сборки можно использовать
        файл <code class="filename">Makefile</code> в каталоге <code class=
        "filename">query</code>. Это очень простая программа и при наличии
        определённого навыка в c++, может оказаться весьма полезной для
        подгонки формата вывода под свои нужды. Помимо несложной настройки
        команда <span class="command"><strong>recollq</strong></span> действительно
        полезна только при отсутствии в системе библиотек Qt. В противном случае
        она лишь дублирует <code class="literal">recoll -t</code>.</p>
        <p>У <span class="command"><strong>recollq</strong></span>
        имеется <a class="ulink" href=
        "https://www.recoll.org/manpages/recollq.1.html" target=
        "_top">страница руководства</a>. Эта страница приводится ниже:</p>
        <pre class="programlisting">
recollq: usage:
 -P: Show the date span for all the documents present in the index.
 [-o|-a|-f] [-q] &lt;query string&gt;
 Runs a recoll query and displays result lines. 
  Default: will interpret the argument(s) as a xesam query string.
  Query elements: 
   * Implicit AND, exclusion, field spec:  t1 -t2 title:t3
   * OR has priority: t1 OR t2 t3 OR t4 means (t1 OR t2) AND (t3 OR t4)
   * Phrase: "t1 t2" (needs additional quoting on cmd line)
 -o Emulate the GUI simple search in ANY TERM mode.
 -a Emulate the GUI simple search in ALL TERMS mode.
 -f Emulate the GUI simple search in filename mode.
 -q is just ignored (compatibility with the recoll GUI command line).
Common options:
 -c &lt;configdir&gt; : specify config directory, overriding $RECOLL_CONFDIR.
 -C : collapse duplicates
 -d also dump file contents.
 -n [first-]&lt;cnt&gt; define the result slice. The default value for [first]
    is 0. Without the option, the default max count is 2000.
    Use n=0 for no limit.
 -b : basic. Just output urls, no mime types or titles.
 -Q : no result lines, just the processed query and result count.
 -m : dump the whole document meta[] array for each result.
 -A : output the document abstracts.
    -p &lt;cnt&gt; : show &lt;cnt&gt; snippets, with page numbers instead of the concatenated abstract.
    -g &lt;cnt&gt; : show &lt;cnt&gt; snippets, with line numbers instead of the concatenated abstract.
 -S fld : sort by field &lt;fld&gt;.
   -D : sort descending.
 -s stemlang : set stemming language to use (must exist in index...).
    Use -s "" to turn off stem expansion.
 -T &lt;synonyms file&gt;: use the parameter (Thesaurus) for word expansion.
 -i &lt;dbdir&gt; : additional index, several can be given.
 -e use url encoding (%xx) for urls.
 -E use exact result count instead of lower bound estimate.
 -F &lt;field name list&gt; : output exactly these fields for each result.
    The field values are encoded in base64, output in one line and 
    separated by one space character. This is the recommended format 
    for use by other programs. Use a normal query with option -m to 
    see the field names. Use -F '' to output all fields, but you probably
    also want option -N in this case.
   -N : with -F, print the (plain text) field names before the field values.
 --extract_to &lt;filepath&gt; : extract the first result to filepath, which must not exist.
      Use a -n option with an offset to select the appropriate result.
      </pre>
        <p>Пример работы:</p>
        <pre class="programlisting">
recollq 'ilur -nautique mime:text/html'
Recoll query: ((((ilur:(wqf=11) OR ilurs) AND_NOT (nautique:(wqf=11) OR nautiques OR nautiqu OR nautiquement)) FILTER Ttext/html))
4 results
text/html       [file:///Users/dockes/projets/bateaux/ilur/comptes.html]      [comptes.html]  18593   bytes   
text/html       [file:///Users/dockes/projets/nautique/webnautique/articles/ilur1/index.html] [Constructio...
text/html       [file:///Users/dockes/projets/pagepers/index.html]    [psxtcl/writemime/recoll]...
text/html       [file:///Users/dockes/projets/bateaux/ilur/factEtCie/recu-chasse-maree....
      </pre>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.SEARCH.LANG" id=
              "RCL.SEARCH.LANG"></a>3.5.&nbsp;Язык
              запросов</h2>
            </div>
          </div>
        </div>
        <p>Язык запросов <span class="application">Recoll</span>
        изначально основан на уже несуществующей ныне спецификации
        языка поиска <a class="ulink"
        href="https://www.xesam.org/main/XesamUserSearchLanguage95"
        target="_top">Xesam</a>. Он позволяет выполнять логический
        поиск как по основному тексту, так и по специальным полям,
        а также имеет много дополнительных функций, которые в целом
        равноценны использованию графического интерфейса
        <span class="emphasis"><em>сложного поиска</em></span>.</p>
        <p>Обработчик языка запросов активируется при выборе
        <code class="literal">Языка запросов</code> в качестве режима
        поиска в поле ввода на вкладке простого поиска в графическом интерфейсе.
        Подобным образом его можно использовать при выполнении
        поиска в командой строке, а также при использовании KIO slave или
        WEB UI.</p>
        <p>Если применение языка запросов приводит к неожиданным результатам и
        возникают вопросы к содержимому строки поиска, то в верхней части списка
        результатов поиска можно нажать на ссылку <code class="literal">«Показать запрос»</code>
        для просмотра точной формы запроса, составленной с помощью Xapian.</p>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.LANG.SYNTAX"
                id="RCL.SEARCH.LANG.SYNTAX"></a>3.5.1.&nbsp;Базовый
                синтаксис</h3>
              </div>
            </div>
          </div>
          <p>Ниже приведён пример запроса, который мы сейчас подробно разберём:</p>
          <pre class="programlisting">
        author:"john doe" Beatles OR Lennon Live OR Unplugged -potatoes
      </pre>
          <p>Здесь будет выполняться поиск всех документов, у которых
          в поле автора указано имя <em class="replaceable"><code>John Doe</code></em>
          (более точно определяется в зависимости от типа документа, например, для
          сообщения электронной почты это будет заголовок <code class="literal">From:</code>)
          и содержащих слова <em class=
          "replaceable"><code>beatles</code></em> или <em class=
          "replaceable"><code>lennon</code></em>, а также
          <em class="replaceable"><code>live</code></em> или
          <em class="replaceable"><code>unplugged</code></em>, но
          не <em class="replaceable"><code>potatoes</code></em>
          (в любой части документа).</p>
          <p>Элемент запроса составляется из необязательного указания поля
          и его значения, разделённых двоеточием (разделитель поля является последним двоеточием в элементе).
          Примеры:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem"><em class=
              "replaceable"><code>Eugenie</code></em></li>
              <li class="listitem"><em class=
              "replaceable"><code>author:balzac</code></em></li>
              <li class="listitem"><em class=
              "replaceable"><code>dc:title:grandet</code></em></li>
              <li class="listitem"><em class=
              "replaceable"><code>dc:title:"eugenie
              grandet"</code></em></li>
            </ul>
          </div>
          <p>Присутствие двоеточия означает «содержит». Язык Xesam определяет
          и другие отношения, которые на данный момент обычно не поддерживаются
          (за исключением специальных случаев, описанных ниже).</p>
          <p>Все элементы в поле поиска обычно неявно объединяются
          оператором AND. Однако можно указать и оператор OR, как в примере с <em class=
          "replaceable"><code>Beatles</code></em> <code class=
          "literal">OR</code> <em class=
          "replaceable"><code>Lennon</code></em>. Оператор <code class=
          "literal">OR</code> вводится как есть (в верхнем регистре)
          и имеет приоритет над операциями с AND: <em class=
          "replaceable"><code>word1</code></em> <em class=
          "replaceable"><code>word2</code></em> <code class=
          "literal">OR</code> <em class=
          "replaceable"><code>word3</code></em> означает <em class=
          "replaceable"><code>word1</code></em> AND (<em class=
          "replaceable"><code>word2</code></em> <code class=
          "literal">OR</code> <em class=
          "replaceable"><code>word3</code></em>), а не (<em class=
          "replaceable"><code>word1</code></em> AND <em class=
          "replaceable"><code>word2</code></em>) <code class=
          "literal">OR</code> <em class=
          "replaceable"><code>word3</code></em>.</p>
          <p>Для группирования элементов можно использовать скобки
          (начиная с версии 1.21), что делает запрос
          более понятным, а также позволяет составлять комбинации,
          которые иными средствами выразить очень трудно.</p>
          <p>Элемент, предваряемый <code class=
          "literal">-</code>, указывает на слово, которого быть
          <span class="emphasis"><em>не должно</em></span>.</p>
          <p>По умолчанию слова, заключённые в двойные кавычки,
          указывают на поиск <code class="literal">фразы</code>
          (с соблюдением порядка слов), поэтому запрос <em class=
          "replaceable"><code>title:"prejudice pride"</code></em>
          будет отличаться от <em class=
          "replaceable"><code>title:prejudice
          title:pride</code></em>, и крайне маловероятно приведёт к положительному результату.
          Это можно изменить с помощью <a class="link"
          href="#RCL.SEARCH.LANG.MODIFIERS" title=
          "3.5.4.&nbsp;Modifiers">модификаторов</a>.</p>
          <p>Слова внутри фразы и слова с прописной буквы исключаются
          из поиска по словоформам. Внтури элемента поиска символы подстановки могут
          располагаться в любом месте. Однако вставка символа подстановки
          слева от слова может привести к замедлению поиска (или
          даже к выводу неверных результатов, когда набор словоформ обрезается
          ввиду превышения размера запроса).
          Также необходимо изучить раздел <a class="link" href="#RCL.SEARCH.WILDCARDS"
          title="3.6.1.&nbsp;Wildcards">дополнительной информации
          по символам подстановки</a>.</p>
          <p>Для уменьшения ввода текста в <span class=
          "application">Recoll</span> версии 1.20 и выше
          значение поля в виде списка, разделённого запятыми, интерпретируется
          как список с операторами AND, а значение поля в виде списка, разделённого символами косой черты,
          как список с операторами OR. Наличие пробелов не допускается. Поэтому,</p>
          <pre class="programlisting">author:john,lennon</pre>
          <p>будет выполнять поиск документов содержащих в поле <code class=
          "literal">author</code> слова <code class=
          "literal">john</code> и <code class=
          "literal">lennon</code> (в любом порядке), тогда как </p>
          <pre class="programlisting">author:john/ringo</pre>
          <p>будет выполнять поиск слов <code class="literal">john</code> или
          <code class="literal">ringo</code>. Такое происходит
          при наличии префикса поля «:» без которого, ввод элементов, разделённых
          запятыми или косой чертой приведёт к поиску соответствующей фразы.
          Однако можно использовать имя поля <code class="literal">text</code>
          для поиска в поле основного текста в качестве альтернативы
          использованию однозначного <code class="literal">OR</code>, например, <code class=
          "literal">text:napoleon/bonaparte</code> выполнит поиск
          слов <em class=
          "replaceable"><code>napoleon</code></em> или <em class=
          "replaceable"><code>bonaparte</code></em> в поле
          основного текста.</p>
          <p>Вместо двойных кавычек можно задать модификаторы,
          например, для указания поиска по близости (неупорядоченного). См.
          <a class="link" href="#RCL.SEARCH.LANG.MODIFIERS" title=
          "3.5.4.&nbsp;Modifiers">раздел по модификаторам</a>. Закрывающие
          кавычки не должны отделяться пробелом от модификатора,
          например <em class="replaceable"><code>"two
          one"po10</code></em></p>
          <p>В настоящий момент <span class="application">Recoll</span>
          по умолчанию работает следующими полями:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p><code class="literal">title</code>, <code class=
                "literal">subject</code> или <code class=
                "literal">caption</code> являются синонимами, которые
                определяют данные поиска в заголовке или теме документа.</p>
              </li>
              <li class="listitem">
                <p><code class="literal">author</code> или
                <code class="literal">from</code> при поиске
                по составителям документа.</p>
              </li>
              <li class="listitem">
                <p><code class="literal">recipient</code> или
                <code class="literal">to</code> при поиске по
                получателям документа.</p>
              </li>
              <li class="listitem">
                <p><code class="literal">keyword</code> при
                поиске по характерным ключевым словам документа
                (встречаются далеко не в каждом документе).</p>
              </li>
              <li class="listitem">
                <p><code class="literal">filename</code> при
                поиске по имени файла документа. Можно использовать
                более краткий псевдоним <code class="literal">fn</code>.
                Это значение определяется не для всех документов:
                внутренние документы, находящиеся внутри сложного
                документа (например, раздел EPUB) больше не наследует
                имя файла, оно было заменено на поле с более конкретным
                значением (см. далее). Поддокументы всё ещё могут
                содержать поле 
                <code class="literal">filename</code>, если оно
                включено в формат документа, например, имя вложенного
                файла в сообщении электронной почты.</p>
              </li>
              <li class="listitem">
                <p><code class="literal">containerfilename</code>,
                с псевдонимом <code class="literal">cfn</code>. Это
                поле установлено для всех документов, как верхнего уровня,
                так и вложенных поддокументов, и всегда содержит имя
                файловой системы, в которой находятся файлы. Слова из этого поля
                могут совпадать только при указании на конкретную
                спецификацию поля (в отличие от слов из поля 
                <code class="literal">filename</code>, которые
                индексируются подобно общему содержимому документа).
                При этом в случае поиска по имени файла-контейнера
                не будут получены совпадения для всех его поддокументов.</p>
              </li>
              <li class="listitem">
                <p><code class="literal">ext</code> указывает расширение
                файла (Ex: <code class=
                "literal">ext:html</code>).</p>
              </li>
              <li class="listitem">
                <p><code class="literal">rclmd5</code> контрольная сумма MD5
                документа. Используется для обнаружения дубликатов
                в результатах поиска (при включении параметра, позволяющего
                скрыть дублирующиеся результаты поиска).
                В принципе, может быть использовано для поиска
                любого имеющегося файла путём вычисления его контрольной
                суммы MD5 и выполнения запроса со значением
                <code class="literal">rclmd5</code>.</p>
              </li>
            </ul>
          </div>
          <p>Именам полей можно присваивать псевдонимы для использования
          предпочтительных названий для полей или уменьшения объёма печатаемого текста (например,
          заданные по умолчанию псевдонимы <code class="literal">fn</code> и
          <code class="literal">cfn</code> для полей
          <code class="literal">filename</code> и <code class=
          "literal">containerfilename</code>). См. <a class=
          "link" href="#RCL.INSTALL.CONFIG.FIELDS" title=
          "5.4.3.&nbsp;The fields file">раздел о файле
          <code class="filename">fields</code></a>.</p>
          <p>Обработчики ввода документов позволяют создавать другие
          поля с произвольными именами, а в конфигурации могут быть определены
          псевдонимы, чтобы обеспечить возможность поиска по конкретным полям
          для конкретного пользователя после выполнения соответствующей настройки.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.SEARCH.LANG.SPECIALFIELDS" id=
                "RCL.SEARCH.LANG.SPECIALFIELDS"></a>3.5.2.&nbsp;Особые
                спецификаторы, похожие на поля</h3>
              </div>
            </div>
          </div>
          <p>Синтаксис, применимый к полям, также работает и с некоторыми
          похожими на поля специальными критериями, значения у которых
          интерпретируются иначе. Обычная обработка здесь неприменима (например,
          не работают списки с разделением косой чертой или запятой).
          Ниже приводится список таких полей.</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p><a name="RCL.SEARCH.LANG.SPECIALFIELDS.DIR" id=
                "RCL.SEARCH.LANG.SPECIALFIELDS.DIR"></a><code class="literal">dir</code>
                — служит для фильтрования результатов по расположению файла. Например, <code class=
                "literal">dir:/home/me/somedir</code> ограничивает
                поиск теми результатами, которые были найдены в пределах каталога
                <em class=
                "replaceable"><code>/home/me/somedir</code></em>
                (включая подкаталоги).</p>
                <p>Подстановка тильды выполняется в обычном порядке.
                Символы подстановки раскрываются, но имеются серьёзные
                ограничения по использованию символов подстановки
                в фильтрах пути, с которыми необходимо предварительно <a class=
                "link" href="#RCL.SEARCH.WILDCARDS.PATH" title=
                "Wildcards and path filtering">ознакомиться</a>.</p>
                <p>Также можно использовать относительные пути. Например,
                <code class="literal">dir:share/doc</code> может
                совпадать либо с <code class=
                "filename">/usr/share/doc</code>, либо с <code class=
                "filename">/usr/local/share/doc</code>.</p>
                <p><code class="literal">-dir</code> выполняет
                поиск результатов <span class="emphasis"><em>вне</em></span>
                заданного места расположения.</p>
                <p>Можно задать сразу несколько выражений с <code class="literal">dir</code>,
                как положительных, так и отрицательных. Например,
                в виде следующей строки:</p>
                <pre class=
                "programlisting">dir:recoll dir:src -dir:utils -dir:common</pre>
                <p>В данном случае будут выбраны результаты, в пути которых имеются каталоги
                <code class="filename">recoll</code> и
                <code class="filename">src</code> (в любом порядке следования),
                а также отсутствуют каталоги <code class=
                "filename">utils</code> и <code class=
                "filename">common</code>.</p>
                <p>С выражениями <code class="literal">dir:</code>
                также можно использовать операторы <code class="literal">OR</code>.</p>
                <p>Особенность работы с выражениями <code class=
                "literal">dir</code> на <span class="application">Unix</span>-подобных
                системах заключается в том, что значения
                в индексе не перекодируются в UTF-8, не
                переводятся в нижний регистр и не очищаются от
                диакритических знаков, но хранятся в двоичном виде.
                Это означает, что при вводе значений необходимо соблюдать
                регистр, а поиск по именам с диакритическими знаками
                может иногда оказаться невозможным по причине проблем
                с преобразованием кодировки.
                Не-ASCII пути файлов в UNIX могут стать бесконечной
                головной болью, и поэтому лучше всего их избегать.</p>
                <p>Если значения путей содержат пробелы, необходимо
                заключать их в двойные кавычки.</p>
                <p>Сокращённый синтаксис для определения списков OR или AND
                внутри полей с помощью запятых или символов косой черты
                не работает.</p>
              </li>
              <li class="listitem">
                <p><code class="literal">size</code> — служит для фильтрации
                результатов по размеру файла. Пример: <code class=
                "literal">size&lt;10000</code>. В качестве операторов
                можно использовать
                <code class="literal">&lt;</code>, <code class=
                "literal">&gt;</code> или <code class=
                "literal">=</code>. Диапазон указывается следующим
                образом: <code class=
                "literal">size&gt;100 size&lt;1000</code>. Обычные обозначения
                <code class="literal">k/K, m/M, g/G,
                t/T</code> можно использовать как (десятичные) множители.
                Пример: <code class="literal">size&gt;1k</code> — выполняет
                поиск файлов больше 1000 байт.</p>
              </li>
              <li class="listitem">
                <p><code class="literal">date</code> — служит для поиска или
                фильтрации по датам. Синтаксис параметра основан на
                стандарте ISO8601 в части указания интервалов даты и времени.
                Данный параметр поддерживает только дату, время указывать не нужно.
                Согласно базовому синтаксису обычно присутствует 2 элемента, которые разделены
                символом <code class="literal">/</code>. Каждый
                элемент может представлять собой дату или временной интервал. Интервалы
                указываются в виде <code class=
                "literal">P</code><em class=
                "replaceable"><code>n</code></em><code class=
                "literal">Y</code><em class=
                "replaceable"><code>n</code></em><code class=
                "literal">M</code><em class=
                "replaceable"><code>n</code></em><code class=
                "literal">D</code>. Число <em class=
                "replaceable"><code>n</code></em> здесь представляет
                соответствующее количество лет, месяцев или дней.
                Любой параметр из этого списка может быть пропущен.
                Даты указываются в виде <em class=
                "replaceable"><code>YYYY</code></em>-<em class=
                "replaceable"><code>MM</code></em>-<em class=
                "replaceable"><code>DD</code></em>. Элементы для определения
                дней и месяцев могут быть пропущены. Если символ
                <code class="literal">/</code> присутствует, но отсутствует
                сам элемент, то отсутствующий элемент считается наименьшим
                или наибольшим значением даты в индексе. Примеры:</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style=
                  "list-style-type: circle;">
                    <li class="listitem">
                      <p><code class=
                      "literal">2001-03-01/2002-05-01</code> основной
                      синтаксис для обозначения интервала дат.</p>
                    </li>
                    <li class="listitem">
                      <p><code class=
                      "literal">2001-03-01/P1Y2M</code> то же самое
                      с указанием периода.</p>
                    </li>
                    <li class="listitem">
                      <p><code class="literal">2001/</code> с
                      начала 2001 до самой поздней даты в индексе.</p>
                    </li>
                    <li class="listitem">
                      <p><code class="literal">2001</code> весь
                      2001 год</p>
                    </li>
                    <li class="listitem">
                      <p><code class="literal">P2D/</code> два дня
                      назад до текущего момента, если отсутствуют документы
                      с датами в будущем.</p>
                    </li>
                    <li class="listitem">
                      <p><code class="literal">/2003</code> все
                      документы с 2003 и старше.</p>
                    </li>
                  </ul>
                </div>
                <p>Периоды также могут быть указаны строчными буквами
                (например: p2y).</p>
              </li>
              <li class="listitem">
                <p><code class="literal">mime</code> или
                <code class="literal">format</code> — служат для указания
                MIME-типа. Эти выражения обрабатываются отдельно от
                нормальной булевой логики поиска:
                между несколькими значениями проставляются операторы OR
                (вместо обычного AND). Исключаемые типы указывают
                с помощью обычного средства <code class="literal">-</code>,
                либо символами подстановки. Например: <em class=
                "replaceable"><code>mime:text/*
                -mime:text/plain</code></em>. Вставка конкретного
                логического оператора перед <code class=
                "literal">mime</code> не поддерживается и приведёт
                неожиданным результатам.</p>
              </li>
              <li class="listitem">   
                <p><code class="literal">type</code> или
                <code class="literal">rclcat</code> — служат для указания
                категории (как в text/media/presentation/etc.).
                Классификация MIME-типов в категориях определяется
                в конфигурации <span class=
                "application">Recoll</span> 
                (<code class="filename">mimeconf</code>) и может
                быть модифицирована или расширена. Имена категорий
                по умолчанию позволяют фильтровать результаты в
                окне графического интерфейса. Между
                несколькими категориями проставляются операторы OR,
                как и у MIME-типов выше, а оператор НЕ можно также
                использовать в виде <code class=
                "literal">-</code>.</p>
              </li>
              <li class="listitem">
                <p><code class="literal">issub</code> — служит для
                указания, что результаты должны выводиться только из
                отдельных (<code class=
                "literal">issub:0</code>) или только из вложенных
                (<code class="literal">issub:1</code>) документов.</p>
              </li>
            </ul>
          </div>
          <div class="note" style=
          "margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Примечание:</h3>
            <p>Критерии <code class="literal">mime</code>, <code class=
            "literal">rclcat</code>, <code class=
            "literal">size</code>, <code class=
            "literal">issub</code> и <code class=
            "literal">date</code> всегда оказывают влияние на весь
            запрос (они применяются в качестве завершающего фильтра),
            даже если задаются совместно с другими элементами внутри скобок.</p>
          </div>
          <div class="note" style=
          "margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Примечание</h3>
            <p><code class="literal">mime</code> (или его аналог
            <code class="literal">rclcat</code>) является
            <span class="emphasis"><em>единственным</em></span> полем,
            где операция <code class="literal">OR</code> задана по умолчанию.
            Например, если необходимо использовать оператор <code class="literal">OR</code> с
            элементами <code class="literal">ext</code>.</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.LANG.RANGES"
                id="RCL.SEARCH.LANG.RANGES"></a>3.5.3.&nbsp;Интервальные
                выражения</h3>
              </div>
            </div>
          </div>
          <p><span class="application">Recoll</span> 1.24 и более поздние версии
          поддерживают интервальные выражения для полей, которые были специально сконфигурированы
          для их использования. На данный момент ни одно из полей не
          поддерживает интервальные выражения по умолчанию, поэтому данный параграф может
          представлять интерес только при внесении изменений в конфигурацию
          полей наряду с использованием собственного обработчика ввода.</p>
          <p>Интервальное выражение может выглядеть следующим образом:</p>
          <pre class="programlisting"><em class=
          "replaceable"><code>моё_поле</code></em>:<em class=
          "replaceable"><code>малое_значение</code></em>..<em class=
          "replaceable"><code>большое_значение</code></em>
<em class="replaceable"><code>моё_поле</code></em>:<em class=
"replaceable"><code>малое_значение</code></em>..
<em class="replaceable"><code>моё_поле</code></em>:..<em class=
"replaceable"><code>большое_значение</code></em>
        </pre>
          <p>Характер выражения определяется оператором с двумя точками<code class="literal">..</code> и заключается в
          фильтрации результатов по значению поля <em class=
          "replaceable"><code>моё_поле</code></em>, которое должно находиться в указанном интервале,
          с учётом возможности использования полуоткрытого интервала.</p>
          <p>См. раздел о конфигурационном файле <a class="link" href=
          "#RCL.INSTALL.CONFIG.FIELDS" title=
          "5.4.3.&nbsp;The fields file"><code class=
          "filename">fields</code></a> для получения более подробной информации
          по конфигурированию поля интервального поиска (находятся
          в разделе [values]).</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.SEARCH.LANG.MODIFIERS" id=
                "RCL.SEARCH.LANG.MODIFIERS"></a>3.5.4.&nbsp;Модификаторы</h3>
              </div>
            </div>
          </div>
          <p>Некоторые символы применяются в качестве модификаторов поиска,
          располагаясь непосредственно после закрывающей двойной кавычки
          фразы, в виде <code class="literal">"строка поиска"модификаторы</code>.
          Конечно же в реальности «фраза» может содержать всего одно слово. Поддерживаемые модификаторы:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>«<code class="literal">l</code>» используется для
                отключения поиска по словоформам (главным образом, имеет смысл
                с модификатором «<code class="literal">p</code>», поскольку поиск по словоформам
                по умолчанию отключается для фраз, но будет также полезно обратить внимание и на модификатор
                «<code class="literal">x</code>» ниже).</p>
              </li>
              <li class="listitem">
                <p>«<code class="literal">o</code>» используется
                для указания «допуска» как в поиске по <code class=
                "literal">фразе</code>, так и в поиске по <code class=
                "literal">близости</code>, в виде числа
                слов, находящихся между заданными словами.
                Если после «<code class="literal">o</code>» указано целое число, то оно
                является показателем допуска, в противном случае допуском по умолчанию
                считается 10. Допуск по умолчанию (без модификатора «<code class="literal">o</code>»)
                будет 0 для поиска по <code class="literal">фразе</code> и 10 для поиска
                по <code class="literal">близости</code>.</p>
              </li>
              <li class="listitem">
                <p>«<code class="literal">p</code>» используется для
                преобразования упорядоченного поиска по <code class="literal">фразе</code>
                в неупорядоченный поиск по <code class=
                "literal">близости</code>. Например:
                <code class="literal">"любой порядок в"p</code>. Более подробное
                описание поиска по <code class=
                "literal">фразе</code> и <code class=
                "literal">близости</code> доступно <a class="link"
                href="#RCL.SEARCH.GUI.COMPLEX.PHRASEANDPROX" title=
                "Phrase and Proximity searches">здесь</a>.</p>
              </li>
              <li class="listitem">
                <p>«<code class="literal">s</code>» (1.22) может
                использоваться для отключения поиска с учётом синонимов при наличии
                файла синонимов в штатном месте расположения.</p>
              </li>
              <li class="listitem">
                <p>«<code class="literal">x</code>» (1.33.2) включает
                поиск по словоформам для слов в составе фразы (по умолчанию
                поиск по фразе выполняется буквально). См. также <a class="link" href=
                "#RCL.INSTALL.CONFIG.RECOLLCONF.STEMEXPANDPHRASES"><code class="literal">
                stemexpandphrases</code></a> в разделе конфигурации
                для изменения поведения по умолчанию.</p>
              </li>
              <li class="listitem">
                <p>Вес может быть указан для элемента запроса
                в виде десятичного значения перед модификаторами.
                Пример: <code class=
                "literal">"Важно"2.5</code>.</p>
              </li>
            </ul>
          </div>
          <p>Дальнейшие указания имеют смысл только для индексов,
          чувствительных к регистру и диакритическим знакам (не по
          умолчанию):</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>«<code class="literal">C</code>» включает чувствительность к регистру.</p>
              </li>
              <li class="listitem">
                <p>«<code class="literal">D</code>» включает чувствительность к
                диакритическим знакам (если поддерживается индексом).</p>
              </li>
              <li class="listitem">
                <p>«<code class="literal">e</code>» (explicit — «буквально»)
                включает чувствительность к регистру и диакритическим знакам,
                одновременно отключая поиск по словоформам.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.SEARCH.ANCHORWILD" id=
              "RCL.SEARCH.ANCHORWILD"></a>3.6.&nbsp;Символы подстановки и
              позиционный поиск</h2>
            </div>
          </div>
        </div>
        <p>Некоторые специальные символы в поисковых строках интерпретируются <span class=
        "application">Recoll</span> как указание для расширения поиска или привязка к конкретному местоположению.
        Символы подстановки расширяют поиск по корневому слову с учётом соответствующих правил.
        Символы позиционирования могут ограничить совпадение положением слова
        в начале или непосредственной близости от начала документа, либо в районе одного из его полей.</p>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.WILDCARDS"
                id="RCL.SEARCH.WILDCARDS"></a>3.6.1.&nbsp;Символы подстановки</h3>
              </div>
            </div>
          </div>
          <p>Перед выполнением поиска все слова, вводимые в поле поиска <span class=
          "application">Recoll</span>, при наличии символа подстановки обрабатываются на предмет расширения поиска.</p>
          <p>В качестве символов подстановки используются следующие символы:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p><code class="literal">*</code> — совпадает с 0
                или несколькими символами.</p>
              </li>
              <li class="listitem">
                <p><code class="literal">?</code> — совпадает с
                любым одиночным символом.</p>
              </li>
              <li class="listitem">
                <p><code class="literal">[]</code> — позволяет определить
                набор символов для совпадения (например:
                <code class="literal">[</code><strong class=
                "userinput"><code>abc</code></strong><code class=
                "literal">]</code> совпадает с одним символом «a», «b» или «c», <code class=
                "literal">[</code><strong class=
                "userinput"><code>0-9</code></strong><code class=
                "literal">]</code> совпадает с любым числом.</p>
              </li>
            </ul>
          </div>
          <p>При использовании символов подстановки необходимо учитывать следующее:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>Применение символа подстановки в начале слова
                может замедлить поиск, поскольку
                <span class="application">Recoll</span> должен
                будет сканировать весь список слов индекса для поиска
                совпадений. Однако в этой ситуации намного меньше проблем возникает
                с поиском по полям. При этом запросы в виде <em class=
                "replaceable"><code>author:*@domain.com</code></em>
                могут оказаться очень полезны.</p>
              </li>
              <li class="listitem">
                <p>Только в <span class="application">Recoll</span>
                версии 18 при работе с неурезанным индексом
                (с сохранением регистра и диакритических знаков)
                буквальная часть выражения с символами подстановки
                будет совпадать точно по регистру и диакритическим знакам.
                В версиях 19 и выше этого уже не происходит.</p>
              </li>
              <li class="listitem">
                <p>Использование символа <code class="literal">*</code>
                в конце слова может привести к большему количеству
                совпадений, чем можно было бы ожидать, и вообще странным
                результатам поиска. Для проверки завершений, существующих
                для данного слова, можно использовать <a class="link" href=
                "#RCL.SEARCH.GUI.TERMEXPLORER" title=
                "3.2.10.&nbsp;The term explorer tool">Обозреватель
                терминов</a>. А также можно просмотреть точную
                форму выполнявшегося поискового запроса щелчком по ссылке 
                в верхней части списка результатов. В целом, для
                слов естественного языка поиск по словоформам приводит
                к лучшим результатам, чем размещение символа <code class=
                "literal">*</code> в конце слова (поиск по словоформам отключается
                при использовании в запросе какого-либо символа подстановки).</p>
              </li>
            </ul>
          </div>
          <div class="simplesect">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.SEARCH.WILDCARDS.PATH" id=
                  "RCL.SEARCH.WILDCARDS.PATH"></a>Символы подстановки и
                  фильтр путей</h4>
                </div>
              </div>
            </div>
            <p>С учётом метода, используемого <span class=
            "application">Recoll</span> для обработки
            символов подстановки внутри выражений фильтра пути
            <code class="literal">dir</code>, они будут оказывать
            мультипликативный эффект на размер запроса. Выражение,
            содержащее символы подстановки в нескольких элементах пути,
            как например, <code class=
            "literal">dir:</code><em class=
            "replaceable"><code>/home/me/*/*/docdir</code></em>,
            почти наверняка приведёт к путанице, если путь дерева индекса
            имеет хоть сколь-нибудь реалистичный размер.</p>
            <p>В зависимости от конкретной ситуации в качестве обходного манёвра для решения вопроса
            можно указать элементы путей более узко, с постоянным префиксом,
            либо с помощью 2 отдельных выражений <code class="literal">dir:</code>
            вместо нескольких символов подстановки, как в следующем примере: <code class=
            "literal">dir:</code><em class=
            "replaceable"><code>/home/me</code></em> <code class=
            "literal">dir:</code><em class=
            "replaceable"><code>docdir</code></em>. Последний запрос
            не эквивалентен первому, потому что он не учитывает
            ряд уровней каталогов, но в данном случае это всё, что мы можем сделать
            (и иногда такой вариант решения вопроса действительно лучше работает).</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.ANCHOR" id=
                "RCL.SEARCH.ANCHOR"></a>3.6.2.&nbsp;Позиционный
                поиск</h3>
              </div>
            </div>
          </div>
          <p>Позиционировать совпадение в начале или в конце текста
          можно с помощью двух символов.
          Символ «<code class="literal">^</code>» в начале слова
          или фразы указывает на то, что совпадение должно произойти в начале строки,
          а символ «<code class="literal">$</code>» в конце слова указывает на то, что совпадение
          должно произойти в конце.</p>
          <p>Поскольку эта функция применяется для поиска фразы,
          возникает возможность указания максимального расстояния, на котором
          должно произойти совпадение. Это выполняется либо с помощью элементов управления
          в окне сложного поиска, либо с помощью языка запроса, например:</p>
          <pre class="programlisting">"^someterm"o10</pre>
          <p>в данном случае слово <code class=
          "literal">someterm</code> должно находится на расстоянии
          10 слов от начала текста. Это можно объединить с поиском по
          полю, например, <code class=
          "literal">somefield:"^someterm"o10</code> или <code class=
          "literal">somefield:someterm$</code>.</p>
          <p>Данную функцию можно использовать и при настоящем
          поиске фразы, но в таком случае расстояние применяется
          к целой фразе и позиции, так что, например,
          «<code class="literal">bla bla my unexpected term</code>»
          в начале текста даст совпадение для
          <code class="literal">"^my term"o5</code>.</p>
          <p>Позиционные поиски могут быть очень полезны для
          поиска внутри документов с определённой структурой, таких как
          научные статьи. Особенно в случае, когда конкретные метаданные не были
          предоставлены. Например, при поиске совпадений внутри
          аннотации или списка авторов (которые находятся в начале
          документа).</p>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.SEARCH.SYNONYMS" id=
              "RCL.SEARCH.SYNONYMS"></a>3.7.&nbsp;Использование синонимов
              (1.22)</h2>
            </div>
          </div>
        </div>
        <p><b>Синонимы слов и текстовый поиск:&nbsp;</b>в принципе,
        существует два разных способа использования синонимов элементов поиска
        для поиска текста:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p>При создании индекса синонимы можно использовать для
              изменения числа индексируемых слов как в сторону их увеличения,
              так и в сторону уменьшения, либо используя все синонимы элемента
              поиска в качестве его словоформ, либо только его канонические формы.</p>
            </li>
            <li class="listitem">
              <p>При поиске запроса они могут использоваться для совпадения
              с текстом, содержащим синонимы слов, указанных пользователем,
              либо расширяя запрос пользователя на все синонимы, либо уменьшая
              его до канонических форм (последнее работает только в том случае,
              когда соответствующая обработка была выполнена при создании индекса).</p>
            </li>
          </ul>
        </div>
        <p><span class="application">Recoll</span> применяет синонимы
        только во время запроса. Запрос пользователя, который является
        частью группы синонимов может разворачиваться в цепочку, содержащую
        все синонимы группы, связанные оператором <code class="literal">OR</code>.</p>
        <p>Группы синонимов определяются в обычных текстовых файлах.
        Каждая строка в файле определяет группу.</p>
        <p>Пример:</p>
        <pre class="programlisting">
        привет здравствуйте "доброе утро"

        # не уверен насчёт "о`ревуар". Так говорят по русски?
        пока "до свидания" "до встречи" \
        "о`ревуар" 
      </pre>
        <p>Как обычно, строки, начинающиеся с <code class=
        "literal">#</code>, являются комментариями, пустые строки игнорируются,
        после ввода обратной косой черты текущая строка завершается на следующей строке.</p>
        <p>Синонимы, состоящие из нескольких слов, также поддерживаются, но с ними
        уже будет использоваться фразовый поиск, который может заметно ухудшить производительность
        с одновременным отключением поиска по словоформам для фразовых поисковых запросов.</p>
        <p>Содержимое файлов синонимов должно иметь регистронезивисимое представление
        (и это касается не только перевода символов в нижний регистр), потому что при обработке
        запроса предполагается использование регистронезависимого формата.
        Можно продемонстрировать несколько случаев, где это важно, например,
        немецкая буква эсцет должна выражаться в виде <code class=
        "literal">ss</code>, греческая конечная сигма — в виде строчной сигмы.
        Поэтому Python3 имеет в своём арсенале специальную процедуру для перевода
        текста в регистронезависимый формат (str.casefold()).</p>
        <p>Файл синонимов можно указать на вкладке <span class=
        "guilabel">«Параметры поиска»</span> элемента <span class=
        "guilabel">«Настройка интерфейса»</span> меню <span class=
        "guilabel">«Настройки»</span>, либо в виде параметра
        при выполнении поиска в командной строке.</p>
        <p>После определения файла использование синонимов можно
        включать или отключать напрямую из меню <span class=
        "guilabel">«Настройки»</span>.</p>
        <p>Поиск синонимов по словам поискового запроса выполняется
        после подготовки списка словоформ, но содержимое
        файла синонимов в поиске по словоформам уже не участвует.
        Это означает, что совпадение не будет обнаружено, если форма,
        присутствующая в файле синонимов, отсутствует где бы то ни было
        в наборе документов (то же и с диакритическими знаками
        при использовании неурезанного индекса).</p>
        <p>Поэтому функция поиска по синонимам вряд ли сможет помочь
        при поиске писем, адресованных Иванову или Сидорову. Лучше всего использовать
        её для поиска в какой-то конкретной области. Например, если
        пользователь изначально предполагает выполнять поиск по
        историческим документам, то файл синонимов
        может содержать прозвища и псевдонимы интересующих его лиц.</p>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.SEARCH.PTRANS" id=
              "RCL.SEARCH.PTRANS"></a>3.8.&nbsp;Корректировка
              путей</h2>
            </div>
          </div>
        </div>
        <p>В некоторых случаях пути документов, хранящихся внутри
        индекса не совпадают с действительными путями, в связи с чем
        просматривать и открывать эти файлы не представляется возможным. Это
        может случиться по целому ряду причин:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p>При использовании нескольких индексов довольно часто
              случается, что некоторые из них находятся на удалённом
              томе, например, смонтированном по NFS. В таком случае
              локальные пути доступа к документу совсем необязательно
              совпадают с теми, которые использовались при индексации
              на удалённом компьютере. Например, при индексации в составе
              элементов <code class="literal">topdirs</code> мог быть
              использован путь <code class="filename">/home/me</code>,
              а каталог на локальном компьютере мог быть смонтирован
              как <code class="filename">/net/server/home/me</code>.</p>
            </li>
            <li class="listitem">
              <p>То же самое могло случиться и со съёмными дисками. При соответствующей
              настройке конфигурации индекс мог находиться вместе с документами
              на съёмном диске, который в данный момент может быть смонтирован
              в другой точке. В связи с этим пути документов из этого индекса
              использовать нельзя. Хотя в некоторых случаях настройку путей можно <a class=
              "link" href="#RCL.INDEXING.REMOVABLE.SELF" title=
              "Self contained volumes">автоматизировать</a>.</p>
            </li>
            <li class="listitem">
              <p>Подобная ситуацация происходит и при перемещении
              большого каталога, когда выполнить запуск индексатора в данный
              момент неудобно.</p>
            </li>
          </ul>
        </div>
        <p><span class="application">Recoll</span> обладает функцией
        перезаписи путей доступа при извлечении данных из индекса.
        Такую корректировку можно задать как для основного индекса,
        так и для любого дополнительного индекса запросов.</p>
        <p>В примере выше с NFS <span class=
        "application">Recoll</span> можно проинструктировать на выполнение
        корректировки любого URL-адреса из индекса с <code class="filename">file:///home/me</code>
        на <code class="filename">file:///net/server/home/me</code>, что позволит
        получить доступ для клиента.</p>
        <p>Корректировки определяются в конфигурационном файле
        <a class="link" href="#RCL.INSTALL.CONFIG.PTRANS" title=
        "5.4.7.&nbsp;The ptrans file"><code class=
        "filename">ptrans</code></a>, который можно отредактировать
        вручную или в диалоговом окне настройки конфигурации
        внешних индексов: <span class=
        "guimenu">«Настройки»</span> → <span class=
        "guimenuitem">«Настройка внешнего индекса»</span>, после чего
        нажимается кнопка <span class="guilabel">«Корректировка путей»</span>
        внизу справа от списка индексов: корректировка при этом будет задана
        либо для основного индекса, если внешние индексы на данный момент
        не выбраны в списке, либо для индекса, который выбран в данный момент.<p>
        <p><b>Пример записи из файла <code class=
        "filename">ptrans</code>:&nbsp;</b></p>
        <pre class="programlisting">[/путь/к/внешней/xapiandb]
          /некий/путь/индекса = /некий/локальный/путь</pre>
        <p>В данном случае для индекса, хранящегося в
        <code class="literal">/путь/к/внешней/xapiandb</code>,
        любое вхождение пути <code class=
        "literal">/некий/путь/индекса</code> будет заменяться на
        <code class="literal">/некий/локальный/путь</code> при
        выводе результата.</p>
        <div class="note" style=
        "margin-left: 0.5in; margin-right: 0.5in;">
          <h3 class="title">Замечание для ОС Windows</h3>
          <p>На данный момент при корректировке пути в MS Windows
          используется регистрозависимое сравнение пути (когда-нибудь
          это будет исправлено). Поэтому путь нужно использовать
          в текущем регистре так, как он отображается в диспетчере файлов. Например:</p>
          <pre class="programlisting">[Z:/некий/монтированный/xapiandb]
C: = Z:</pre>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.SEARCH.CASEDIAC" id=
              "RCL.SEARCH.CASEDIAC"></a>3.9.&nbsp;Чувствительность к регистру
              и диакритическим знакам при поиске</h2>
            </div>
          </div>
        </div>
        <p>Для <span class="application">Recoll</span> 1.18 и более поздних версий,
        а также <span class="emphasis"><em>при работе
        с неурезанным индексом</em></span> (не по умолчанию), поиск
        может быть чувствителен к регистру и диакритическим знакам. Это
        зависит от переменных конфигурации и данных, введённых в поиске.</p>
        <p>Обычно по умолчанию поисковый запрос без символов в верхнем регистре
        или диакритических знаков не чувствителен к регистру или диакритике.
        Поэтому, ввод слова <code class=
        "literal">resume</code> будет совпадать с любыми его вариантами <code class=
        "literal">Resume</code>, <code class=
        "literal">RESUME</code>, <code class=
        "literal">résumé</code>, <code class=
        "literal">Résumé</code> и т.д.</p>
        <p>Две переменные конфигурации могут автоматически переключать
        чувствительность (они описывались ранее в документации, но фактически не
        работали до <span class="application">Recoll</span> 1.22):</p>
        <div class="variablelist">
          <dl class="variablelist">
            <dt><span class="term">autodiacsens</span></dt>
            <dd>
              <p>При установке этого параметра чувствительность поиска
              к диакритическим знакам включается при появлении
              в поисковом запросе диакритического знака. Когда переменная
              получает значение true, поисковый запрос
              <code class="literal">resume</code> инициирует запуск
              поиска без чувствительности к регистру, но при запросе <code class=
              "literal">résumé</code> будет осуществляться поиск точного совпадения.
              Значение этого параметра по умолчанию — <span class=
              "emphasis"><em>false</em></span>.</p>
            </dd>
            <dt><span class="term">autocasesens</span></dt>
            <dd>
              <p>При установке этого параметра чувствительность поиска
              к регистру символов включается при появлении в поисковом
              запросе символа в верхнем регистре, <span class=
              "emphasis"><em>без учёта первого символа слова</em></span>.
              Когда переменная получает значение true, запрос <code class=
              "literal">us</code> или <code class=
              "literal">Us</code> приведёт к поиску
              без чувствительности к регистру и диакритическим знакам,
              но при запросе <code class="literal">US</code> будет выполняться
              поиск точного совпадения. Значение этого параметра
              по умолчанию — <span class="emphasis"><em>true</em></span>
              (в отличие от
              <code class="literal">autodiacsens</code>).</p>
            </dd>
          </dl>
        </div>
        <p>Как и прежде, запись слова с прописной буквы отключает
        поиск по словоформам и никоим образом не влияет на чувствительность
        поиска к регистру.</p>
        <p>Чувствительность к регистру и диакритике также
        может быть включена с помощью модификаторов к языку запросов.
        Так, модификатор <code class="literal">C</code> сделает поисковый запрос чувствительным
        к регистру, а <code class="literal">D</code> — чувствительным
        к диакритическим знакам. Примеры:</p>
        <pre class="programlisting">
        "us"C
      </pre>
        <p>выполнит точный поиск слова <code class="literal">us</code>
        (<code class="literal">Us</code> с этим словом уже
        не совпадёт).</p>
        <pre class="programlisting">
        "resume"D
      </pre>
        <p>выполнит точный поиск для слова <code class=
        "literal">resume</code> (<code class=
        "literal">résumé</code> с этим словом уже не совпадёт).</p>
        <p>Включение чувствительности к регистру, а равно и чувствительности
        к диакритическим знакам, отключает поиск по словоформам. Установка
        обоих параметров вряд ли будет иметь смысл.</p>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.SEARCH.DESKTOP" id=
              "RCL.SEARCH.DESKTOP"></a>3.10.&nbsp;Интеграция с
              рабочим столом</h2>
            </div>
          </div>
        </div>
        <p>Независимость от рабочего стола имеет свои обратные стороны:
        <span class="application">Recoll</span> имеет минимальную интеграцию
        с рабочим столом. Однако присутствует несколько полезных инструментов:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p>Пользователи текущих дистрибутивов на основе Ubuntu,
              а также любых других систем с рабочим столом Gnome (например, Fedora)
              могут установить <a class="ulink" href=
              "https://www.recoll.org/pages/download.html#gssp"
              target="_top">Recoll GSSP</a> (Gnome Shell Search
              Provider).</p>
            </li>
            <li class="listitem">
              <p>Описание KIO Slave для <span class="application">KDE</span>
              находится в <a class="link" href=
              "#RCL.SEARCH.KIO" title=
              "3.3.&nbsp;Searching with the KDE KIO slave">предыдущем
              разделе</a>. Он способен вывести результаты поиска внутри
              <span class=
              "command"><strong>Dolphin</strong></span>.</p>
            </li>
            <li class="listitem">
              <p>При использовании устаревшей версии Linux Ubuntu, может
              показаться полезным модуль <a class="ulink" href=
              "https://www.recoll.org/faqsandhowtos/UnityLens"
              target="_top">Ubuntu Unity Lens</a>.</p>
            </li>
            <li class="listitem">
              <p>Также можно обратить внимание на независимо разрабатываемый модуль <a class=
              "ulink" href=
              "https://kde-apps.org/content/show.php/recollrunner?content=128203"
              target="_top">Krunner</a>.</p>
            </li>
          </ul>
        </div>
        <p>Вот ещё несколько полезных функций.</p>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.SEARCH.SHORTCUT" id=
                "RCL.SEARCH.SHORTCUT"></a>3.10.1.&nbsp;Сочетания клавиш для
                recoll</h3>
              </div>
            </div>
          </div>
          <p>Удивительно удобна возможность одним щелчком
          клавиш выводить или скрывать графический интерфейс
          <span class="application">Recoll</span>. Такой функционал предоставляется
          включенным в состав Recoll небольшим сценарием Python на основе библиотеки интерфейса
          менеджера окон <span class="application">libwnck</span>.
          Более подробное описание содержится
          на <a class="ulink" href=
          "https://www.recoll.org/faqsandhowtos/HotRecoll" target=
          "_top">этой wiki-странице</a>.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name="RCL.KICKER-APPLET" id=
                "RCL.KICKER-APPLET"></a>3.10.2.&nbsp;Апплет Recoll — KDE Kicker</h3>
              </div>
            </div>
          </div>
          <p>Вполне возможно, что сейчас это уже преданье старины глубокой. Но всё же:</p>
          <p>В исходном коде <span class="application">Recoll</span>
          содержится исходный код для <span class=
          "application">recoll_applet</span> — небольшого приложения
          на основе <span class="application">find_applet</span>.
          Его можно использовать для добавления миниатюрного
          средства запуска <span class="application">Recoll</span>
          на панели KDE.</p>
          <p>Данный апплет не собирается автоматически с основной программой
          <span class="application">Recoll</span>, и даже
          не включается в основной дистрибутив исходного кода (потому что
          шаблонный код сборки KDE значительно увеличивает его размер).
          Исходный код можно скачать со страницы загрузки на recoll.org,
          после чего для сборки и установки необходимо произнести всемогущее
          заклинание <strong class=
          "userinput"><code>configure;make;make
          install</code></strong>.</p>
          <p>Затем апплет добавляется на панель щелчком
          правой клавиши мыши по панели с выбором элемента <span class=
          "guilabel">«Добавить апплет»</span>.</p>
          <p>Апплет <span class="application">recoll_applet</span> снабжён
          небольшим текстовым полем, куда можно ввести запрос <span class=
          "application">Recoll</span> (в формате языка запросов),
          а также значок для ограничения поиска определёнными типами файлов.
          Он довольно примитивен и каждый раз загружает новый экземпляр
          окна интерфейса recoll (даже если старый уже выполняется). Тем не менее, в некотором роде он может
          оказаться полезен.</p>
        </div>
      </div>
    </div>
    <div class="chapter">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a name="RCL.PROGRAM" id=
            "RCL.PROGRAM"></a>Глава&nbsp;4.&nbsp;Программный интерфейс
            </h1>
          </div>
        </div>
      </div>
      <p><span class="application">Recoll</span> имеет свой программный
      интерфейс (API), который можно использовать как для индексирования, так и для
      поиска. Доступ к нему в текущей реализации можно получить с помощью
      языка <span class="application">Python</span>.</p>
      <p>Другой, менее радикальный путь расширения функционала при использовании
      приложения заключается в написании обработчиков ввода
      для новых типов документов.</p>
      <p>Обработка атрибутов метаданных у документов
      (<code class="literal">полей</code>) имеет очень гибкие возможности настройки.</p>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.PROGRAM.FILTERS" id=
              "RCL.PROGRAM.FILTERS"></a>4.1.&nbsp;Написание
              обработчика ввода документа</h2>
            </div>
          </div>
        </div>
        <div class="note" style=
        "margin-left: 0.5in; margin-right: 0.5in;">
          <h3 class="title">Терминология</h3>
          <p>Небольшие программы или фрагменты кода для обработки
          различных типов документов в приложении <span class="application">Recoll</span>
          раньше вызывались с помощью 
          <code class="literal">фильтров</code>, что до сих пор ещё
          отражается в имени каталога, который их содержит,
          а также многих переменных конфигурации. Такое имя им присваивалось в связи с тем,
          что в число основных функций этих модулей входила фильтрация
          команд форматирования и сохранение текстового содержимого.
          Однако они способны выполнять и другие функции, в связи с чем
          в настоящее время старое название в документации активно
          заменяется на термин <code class="literal">обработчик ввода</code>,
          хотя слово <code class="literal">фильтр</code> местами до сих пор ещё используется.</p>
        </div>
        <p>Обработчики ввода <span class="application">Recoll</span> 
        объединяют усилия по извлечению содержимого из документов
        в окончательный формат индексирования ввода
        <span class="application">Recoll</span>. Эти документы могут быть представлены
        большим количеством форматов — простыми,
        как <span class="application">opendocument</span> и <span class=
        "application">acrobat</span>, или составными, как <span class="application">Zip</span>
        и <span class="application">Email</span>. В формате ввода индексирования используется
        простой текст (хотя во многих случаях промежуточным шагом конвейера обработки
        является преобразование в формат HTML,
        который предпочтителен для просмотра документов).
        Большинство обработчиков ввода реализованы в виде исполняемых программ
        или сценариев. Некоторые из них написаны на C++ и встроены в <span class=
        "command"><strong>recollindex</strong></span>. Эти последние
        здесь не описываются.</p>
        <p>Имеется два типа внешних исполняемых обработчиков ввода:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p>Простые обработчики типа <code class="literal">exec</code>
              выполняются один раз, после чего завершают работу. Могут быть реализованы в виде настоящих программ,
              как <span class="command"><strong>antiword</strong></span>, либо
              сценариев, которые используют в работе другие программы. Они несложны для написания,
              поскольку всего лишь выводят преобразованный документ
              в стандартный вывод. Документ может выводиться в виде простого текста
              или HTML. Вывод HTML считается более предпочтительным, так как
              способен хранить большее число полей метаданных, что позволяет 
              сохранять часть форматирования для просмотра в графическом интерфейсе.
              Однако эти обработчики имеют и свои ограничения:</p>
              <div class="itemizedlist">
                <ul class="itemizedlist" style=
                "list-style-type: circle;">
                  <li class="listitem">
                    <p>Могут обрабатывать только один документ на один файл.</p>
                  </li>
                  <li class="listitem">
                    <p>MIME-тип вывода должен быть известен и чётко зафиксирован.</p>
                  </li>
                  <li class="listitem">
                    <p>Кодировка символов, если применимо, должна быть
                    известна и соответствующим образом указана (либо просто может зависеть от
                    расположения).</p>
                  </li>
                </ul>
              </div>
            </li>
            <li class="listitem">
              <p>Несколько обработчиков <code class="literal">execm</code>
              могут обрабатывать несколько файлов (для экономии времени
              на запуск процесса, которое может быть очень значительным),
              либо несколько документов на файл (например: при обработке архивов или
              публикаций, содержащих несколько глав). Они общаются с
              индексатором по простому протоколу, но
              всё же на несколько более сложном уровне, чем
              в старом варианте. Большинство новых обработчиков написаны на
              <span class="application">Python</span> (исключение:
              <span class="command"><strong>rclimg</strong></span>,
              который написан на Perl, так как для <code class=
              "literal">exiftool</code> не существует достойного
              аналога на Python). Обработчики на Python используют
              общие модули во избежание вставки шаблонного кода, что при
              благоприятном стечении обстоятельств позволяет значительно их упростить.
              Выводимые этими обработчиками поддокументы могут индексироваться напрямую
              (текст или HTML), либо представляют собой простые или
              составные документы в других форматах, требующих обработки
              с помощью другого обработчика.</p>
            </li>
          </ul>
        </div>
        <p>В обоих случаях, обработчики имеют дело с обычными
        файлами файловой системы, и могут обрабатывать либо отдельный
        документ, либо линейный список документов в каждом файле. <span class=
        "application">Recoll</span> отвечает за проверку актуальности,
        обработку более сложных вложений и другие вопросы верхнего уровня.</p>
        <p>Простой обработчик, возвращающий документ в формате <code class=
        "literal">text/plain</code>, может не отправлять индексатору
        никаких метаданных. Общие метаданные, такие как размер
        документа или дата последнего изменения, фиксируются и сохраняются
        индексатором.</p>
        <p>Обработчики, выполняющие вывод формата <code class=
        "literal">text/html</code>, могут возвращать произвольное
        количество метаданных в <code class=
        "literal">meta</code>-тегах HTML. Они обрабатываются в соответствии
        инструкциями в конфигурационном файле <a class="link"
        href="#RCL.PROGRAM.FIELDS" title=
        "4.2.&nbsp;Field data processing"><code class=
        "filename">fields</code></a>.</p>
        <p>Обработчики, которые способны обрабатывать несколько документов
        в одном файле, возвращают единственный элемент, содержащий данные для идентификации
        каждого документа в файле. Этот элемент под названием <code class=
        "literal">ipath</code> отправляется обратно в <span class=
        "application">Recoll</span> для извлечения документа
        во время запроса, а также просмотра или создания временного
        файла, открываемого просмотрщиком. Эти обработчики также могут
        возвращать метаданные по коммуникационному протоколу в виде <code class=
        "literal">meta</code>-тегов HTML или именованных данных.</p>
        <p>Следующий раздел содержит описание простого обработчика, а
        следующий за ним предлагает несколько разъяснений по обработчикам типа
        <code class="literal">execm</code>. Простой обработчик вполне возможно
        написать исключительно на основе информации представленной в руководстве.
        Однако с другими обработчиками так сделать уже не получится и придётся серьёзно вникать в код.</p>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.PROGRAM.FILTERS.SIMPLE" id=
                "RCL.PROGRAM.FILTERS.SIMPLE"></a>4.1.1.&nbsp;Простые
                обработчики ввода</h3>
              </div>
            </div>
          </div>
          <p>Простые обработчики <span class="application">Recoll</span>
          обычно представляют собой сценарии командной оболочки, хоть это
          и необязательно. Самым трудным моментом является извлечение
          текста из исходного формата. Вывод в формате, который используется в
          <span class="application">Recoll</span>, не представляет сложности.
          К счастью, для большинства форматов документов имеются трансляторы или
          инструменты, которые позволяют извлекать текст и могут быть вызваны
          из обработчика. В некоторых случаях вывод программы трансляции
          полностью готов к использованию и не требует какой-либо промежуточной
          обработки в сценарии командной оболочки.</p>
          <p>Обработчики ввода вызываются с одним параметром, в качестве
          которого выступает имя исходного файла, а результат должен выводиться
          в стандартный вывод.</p>
          <p>При написании обработчика необходимо выбрать формат
          вывода — простой текст или HTML. Простой текст получить проще, но
          в нём невозможно разместить метаданные или изменить кодировку
          символов (определяется в конфигурационном файле).
          К тому же это позволяет частично сохранить форматирование при просмотре
          HTML. На самом деле решающим фактором является наличие метаданных: <span class=
          "application">Recoll</span> способен <a class="link"
          href="#RCL.PROGRAM.FILTERS.HTML" title=
          "4.1.4.&nbsp;Input handler output">извлекать метаданные из
          заголовка HTML и использовать их для поиска по полям.</a>.</p>
          <p>Переменная окружения <code class=
          "envar">RECOLL_FILTER_FORPREVIEW</code> (значения <code class="literal">yes</code>,
          <code class="literal">no</code>) сообщает обработчику
          назначение текущей операции — индексация или просмотр. Некоторые обработчики
          используют этот параметр для выполнения вывода в другом формате, например,
          для удаления непродуктивных повторяющихся ключевых слов (пример:
          <code class="literal">Тема:</code> для электронной почты) при
          индексации. Но это не принципиально.</p>
          <p>Для начала необходимо рассмотреть один из самых простых обработчиков,
          например, <span class=
          "command"><strong>rclps</strong></span>.</p>
          <p>Перед тестированием не забудьте убедиться в том, что обработчик
          является исполняемым файлом!</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.PROGRAM.FILTERS.MULTIPLE" id=
                "RCL.PROGRAM.FILTERS.MULTIPLE"></a>4.1.2.&nbsp;«Модульные»
                обработчики</h3>
              </div>
            </div>
          </div>
          <p>Имея навыки программирования и желание написать
          обработчик <code class="literal">execm</code>, не составит
          труда разобраться в работе существующих обработчиков.</p>
          <p>Существующие обработчики различаются по объёму используемого
          ими вспомогательного кода:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p><code class="literal">rclimg</code> написан
                на Perl и совершенно самостоятельно обрабатывает
                протокол execm (иллюстрируя простоту создания обработчика).</p>
              </li>
              <li class="listitem">
                <p>Все обработчики на Python используют по крайней мере
                один модуль <code class="filename">rclexecm.py</code>,
                который берёт на себя обработку сообщений. Например,
                <code class="filename">rclzip.py</code> может служить
                примером обработчика, напрямую использующего
                <code class="filename">rclexecm.py</code>.</p>
              </li>
              <li class="listitem">
                <p>Большинство обработчиков на Python, предназначенных для обработки
                файлов, которые содержат один документ, применяют для работы другую команду,
                и способны достичь ещё большего уровня обобщения при использовании модуля <code class=
                "filename">rclexec1.py</code>. В качестве примера простого
                обработчика см. <code class="filename">rclrtf.py</code>, либо
                более сложный вариант <code class="filename">rcldoc.py</code>
                (с возможностью запуска нескольких команд).</p>
              </li>
              <li class="listitem">
                <p>Обработчики для извлечения текста из документа XML
                с помощью таблицы стилей XSLT теперь встроены
                в <span class="command"><strong>recollindex</strong></span>
                и применяют таблицы стилей из каталога <code class=
                "filename">filters/</code>. Они могут использовать одну
                таблицу стилей (например, <code class=
                "filename">abiword.xsl</code>), либо две таблицы для
                данных и метаданных (например, <code class=
                "filename">opendoc-body.xsl</code> и <code class=
                "filename">opendoc-meta.xsl</code>). Использование таблицы
                определяется в конфигурационном файле
                <code class="filename">mimeconf</code>,
                на который не лишним будет взглянуть. До перехода на C++ обработчики на основе xsl
                использовали общий модуль <code class=
                "filename">rclgenxslt.py</code>, который до сих пор присутствует,
                но сейчас не используется. Обработчик презентаций OpenXML
                до сих пор реализован в Python-версии, поскольку
                данный формат не вписывается в логику кода на C++,
                и может служить неплохой основой для создания
                другого подобного обработчика.</p>
              </li>
            </ul>
          </div>
          <p>В комплекте имеется образец простого обработчика на основе
          <code class="filename">rclexecm.py</code>, снабжённого большим количеством
          комментариев, но практически не использующегося в <span class=
          "application">Recoll</span>. Он выполняет построчную индексацию
          текстового файла в рамках одного документа. См. <code class=
          "filename">rcltxtlines.py</code> в каталоге <code class=
          "filename">src/filters</code> в составе общедоступного
          <a class="ulink"
          href="https://framagit.org/medoc92/recoll" target=
          "_top">репозитория Git</a> <span class="application">Recoll</span>
          (на данный момент
          образец не включается в распространяемые дистрибутивы).</p>
          <p>Также можно посмотреть на несколько более сложный файл
          <span class="command"><strong>rclzip.py</strong></span>,
          который использует пути Zip в качестве идентификаторов (<code class=
          "literal">ipath</code>).</p>
          <p>Обработчикам <code class="literal">execm</code> иногда
          приходится определять формат элементов <code class=
          "literal">ipath</code> при общении с индексатором. Ниже приводится
          несколько базовых принципов:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>Используйте ASCII или UTF-8 (если идентификатор является
                целым числом, то вывод может быть организован, например, в стиле printf %d).</p>
              </li>
              <li class="listitem">
                <p>Данные при выводе в файл журнала для помощи в отладке
                должны иметь максимально осмысленное значение.</p>
              </li>
              <li class="listitem">
                <p>В качестве разделителя для внутреннего хранения
                сложного пути (более глубокого вложения) <span class="application">Recoll</span>
                применяет двоеточие (<code class="literal">:</code>).
                В составе вывода элементов <code class=
                "literal">ipath</code> двоеточия экранируются обработчиком,
                но не рекомендуется использовать их в качестве разделителя
                для обработчика (главным образом, опять же
                во избежание проблем с отладкой).</p>
              </li>
            </ul>
          </div>
          <p>В любом случае основная цель заключается в удобстве
          извлечения целевого документа обработчиком при наличии
          имени файла и элемента <code class="literal">ipath</code>.</p>
          <p>Обработчики <code class="literal">execm</code> также
          могут создавать документ с нулевым элементом <code class=
          "literal">ipath</code>. В зависимости от типа документа
          он может иметь какие-то связанные данные (например,
          тело сообщения электронной почты) или не иметь оных (характерно для
          файла архива). Но даже при отсутствии данных документ без сомнения
          будет полезен при выполнении некоторых операций в качестве
          родителя документов действительно содержащих данные.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.PROGRAM.FILTERS.ASSOCIATION" id=
                "RCL.PROGRAM.FILTERS.ASSOCIATION"></a>4.1.3.&nbsp;Установка
                обработчика в <span class="application">Recoll</span></h3>
              </div>
            </div>
          </div>
          <p>Имеется два элемента, связывающих файл с обрабатывающим его обработчиком:
          привязка файла к MIME-типу
          и привязка MIME-типа к обработчику.</p>
          <p>Привязка файлов к MIME-типам основана большей частью
          на расширениях имён файлов. Типы определяются в файле
          <a class="link" href="#RCL.INSTALL.CONFIG.MIMEMAP" title=
          "5.4.4.&nbsp;The mimemap file"><code class=
          "filename">mimemap</code> file</a>. Пример:</p>
          <pre class="programlisting">

.doc = application/msword</pre>
          <p>Если привязка к расширению файла не найдена,
          <span class="application">Recoll</span> последних версий
          будет использовать <span class="application">libmagic</span>.
          Более древние или специально собранные версии могут пытаться
          выполнить системную команду (обычно <span class="command"><strong>file
          -i</strong></span> или <span class=
          "command"><strong>xdg-mime</strong></span>).</p>
          <p>В качестве второго варианта выступает привязка MIME-типов
          к обработчикам в файле <a class="link" href=
          "#RCL.INSTALL.CONFIG.MIMECONF" title=
          "5.4.5.&nbsp;The mimeconf file"><code class=
          "filename">mimeconf</code></a>. В данном случае пример
          будет предпочтительнее долгих разъяснений:</p>
          <pre class="programlisting">

          [index]
          application/msword = exec antiword -t -i 1 -m UTF-8;\
          mimetype = text/plain ; charset=utf-8

          application/ogg = exec rclogg

          text/rtf = exec unrtf --nopict --html; charset=iso-8859-1; mimetype=text/html

          application/x-chm = execm rclchm.py
        </pre>
          <p>Приведённый пример фрагмента файла указывает на следующее:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>файлы <code class="literal">application/msword</code>
                обрабатываются программой <span class=
                "command"><strong>antiword</strong></span>,
                которая выводит <code class=
                "literal">text/plain</code> в кодировке <code class=
                "literal">utf-8</code>.</p>
              </li>
              <li class="listitem">
                <p>файлы <code class="literal">application/ogg</code>
                обрабатываются сценарием <span class=
                "command"><strong>rclogg</strong></span>
                с типом вывода по умолчанию (<code class=
                "literal">text/html</code>, кодировка указывается
                в заголовке или <code class=
                "literal">utf-8</code> по умолчанию).</p>
              </li>
              <li class="listitem">
                <p>файлы <code class="literal">text/rtf</code>
                обрабатываются с помощью <span class=
                "command"><strong>unrtf</strong></span> с типом вывода
                <code class="literal">text/html</code>. Кодировка <code class="literal">iso-8859-1</code>
                здесь указывается в силу отличия от заданной по умолчанию <code class="literal">utf-8</code>,
                а также в связи с тем, что <span class="command"><strong>unrtf</strong></span>
                не выводит её в заголовке HTML-файла.</p>
              </li>
              <li class="listitem">
                <p>файлы <code class="literal">application/x-chm</code>
                обрабатываются с помощью модульного обработчика,
                определяемого ключевым словом <code class=
                "literal">execm</code>.</p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.PROGRAM.FILTERS.HTML" id=
                "RCL.PROGRAM.FILTERS.HTML"></a>4.1.4.&nbsp;Вывод
                обработчика ввода</h3>
              </div>
            </div>
          </div>
          <p>Как простые, так и модульные обработчики ввода могут
          возвращать в Recoll любой MIME-тип, а Recoll далее
          обрабатывает данные в соответствии с конфигурацией переданного MIME-типа.</p>
          <p>Большинство фильтров ввода формируют данные либо типа <code class=
          "literal">text/plain</code>, либо <code class=
          "literal">text/html</code>. При этом не обходится без исключений,
          например, фильтры, обрабатывающие файлы архива
          (<code class="literal">zip</code>, <code class=
          "literal">tar</code>, и т.д.), обычно возвращают
          документы в исходном виде, без дальнейшей обработки.</p>
          <p>Вывод типа <code class="literal">text/plain</code>
          не обладает сколь-нибудь замечательными особенностями, разве что его кодировка
          должна соответствовать кодировке, указанной в файле
          <code class="filename">mimeconf</code>.</p>
          <p>Вывод фильтров, генерирующих HTML, должен быть
          максимально минималистичен, как в примере ниже:</p>
          <pre class="programlisting">
          &lt;html&gt;
            &lt;head&gt;
              &lt;meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/&gt;
            &lt;/head&gt;
            &lt;body&gt;
              Некоторое текстовое содержимое
            &lt;/body&gt;
          &lt;/html&gt;
          </pre>
          <p>Необходимо обеспечить экранирование некоторых символов
          в тексте путём преобразования их в соответствующие мнемоники.
          По крайней мере, «<code class="literal">&amp;</code>»
          должно быть преобразовано в «<code class=
          "literal">&amp;amp;</code>», а «<code class=
          "literal">&lt;</code>» необходимо представить в виде
          «<code class="literal">&amp;lt;</code>». Вспомогательные
          внешние программы вывода HTML не всегда корректно выполняют
          эту задачу, не говоря уже о программах вывода простого текста.</p>
          <p>При вставке простого текста в тело HTML-документа
          отображение на выводе может быть улучшено заключением
          текста в теги <code class="literal">&lt;pre&gt;</code>.</p>
          <p>Кодировку необходимо указать в заголовке.
          Это не обязательно должна быть UTF-8 (<span class=
          "application">Recoll</span> самостоятельно преобразует текст),
          но для правильного отображения она должна быть указана корректно.</p>
          <p><code class="literal">meta</code>-теги в заголовке документа
          будут обработаны <span class="application">Recoll</span>
          в качестве возможных кандидатов на использование в качестве
          полей документа. Поля документа могут обрабатываться
          индексатором для поиска или для отображения в
          результатах поиска по-разному, что подробно описано в <a class="link" href="#RCL.PROGRAM.FIELDS"
          title="4.2.&nbsp;Field data processing">следующем
          разделе.</a></p>
          <p>По умолчанию индексатор обрабатывает стандартные
          поля заголовка при наличии таковых: <code class=
          "literal">title</code>, <code class=
          "literal">meta/description</code>, как и <code class=
          "literal">meta/keywords</code> индексируются и
          сохраняются для отображения при запросе.</p>
          <p>Предустановленные нестандартные <code class=
          "literal">meta</code>-теги также будут обрабатываться в
          <span class="application">Recoll</span> без дальнейшего
          участия в конфигурации: если тег <code class="literal">date</code>
          присутствует в корректном формате, он будет использован
          в качестве даты для документа (при отображении и сортировке), а также в
          параметрах даты изменения файла. Формат даты будет
          отображаться следующим образом:</p>
          <pre class="programlisting">
          &lt;meta name="date" content="YYYY-mm-dd HH:MM:SS"&gt;
          или
          &lt;meta name="date" content="YYYY-mm-ddTHH:MM:SS"&gt;
        </pre>
          <p>Пример:</p>
          <pre class="programlisting">
          &lt;meta name="date" content="2013-02-24 17:50:00"&gt;
        </pre>
          <p>Обработчики ввода также способны «изобретать» имена
          полей, которые будут выводиться в виде мета-тегов:</p>
          <pre class="programlisting">
          &lt;meta name="somefield" content="Некие текстовые данные" /&gt;
        </pre>
          <p>Для улучшения отображения в списке результатов внутрь
          содержимого пользовательских полей можно вкладывать HTML-разметку. Для
          этого необходимо добавить (абсолютно нестандартный) атрибут <code class=
          "literal">markup</code> для передачи <span class=
          "application">Recoll</span> информации о том, что данное значение
          является HTML разметкой и не должно экранироваться для отображения.</p>
          <pre class="programlisting">
          &lt;meta name="somefield" markup="html" content="Некие &lt;i&gt;текстовые&lt;/i&gt; данные" /&gt;
        </pre>
          <p>Как уже написано выше, описание обработки полей находится
          в <a class="link" href="#RCL.PROGRAM.FIELDS"
          title="4.2.&nbsp;Field data processing">следующем
          разделе</a>.</p>
          <p>Модульные фильтры могут использовать другой, и вероятно,
          более простой способ генерации метаданных путём вызова
          вспомогательного метода <code class=
          "literal">setfield()</code>. Это позволяет исключить необходимость
          генерации HTML, и всех вопросов, связанных с его копированием.
          См., например, <code class=
          "filename">rclaudio.py</code> в <span class=
          "application">Recoll</span> 1.23 и более поздних версиях, как образец
          обработчика, выводящего <code class=
          "literal">text/plain</code> с использованием метода <code class=
          "literal">setfield()</code> для генерации метаданных.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.PROGRAM.FILTERS.PAGES" id=
                "RCL.PROGRAM.FILTERS.PAGES"></a>4.1.5.&nbsp;Номера 
                страниц</h3>
              </div>
            </div>
          </div>
          <p>Индексатор интерпретирует символы <code class=
          "literal">^L</code> в выводе обработчика в качестве
          индикатора разрывов страниц и запоминает их. Во время
          выполнения поиска это позволяет запустить просмотрщик
          на странице местонахождения совпадения или фрагмента.
          Однако на данный момент разрывы страниц генерируют
          только обработчики PDF, Postscript и DVI.</p>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.PROGRAM.FIELDS" id=
              "RCL.PROGRAM.FIELDS"></a>4.2.&nbsp;Обработка данных
              поля</h2>
            </div>
          </div>
        </div>
        <p>Поля (<code class="literal">fields</code>) являются именованными
        единицами информации в/о документах, например, <code class=
        "literal">title</code>, <code class=
        "literal">author</code>, <code class=
        "literal">abstract</code>.</p>
        <p>Значения полей документов в ходе индексирования вводятся
        несколькими различными способами: путём вывода полей
        <code class="literal">meta</code> в заголовке HTML обработчиками
        ввода, путём извлечения расширенных атрибутов из файла,
        путём добавления в качестве атрибутов объекта <code class="literal">Doc</code>
        при помощи API, путём внутреннего синтеза с помощью
        <span class="application">Recoll</span>.</p>
        <p>Язык запросов <span class="application">Recoll</span>
        позволяет выполнять поиск текста в конкретном поле.</p>
        <p><span class="application">Recoll</span> определяет количество
        полей по умолчанию. Вывод из дополнительных полей может выполнятся
        обработчиками и описывается в конфигурационном файле <code class=
        "filename">fields</code>.</p>
        <p>Поля могут быть:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p><code class="literal">индексируемыми</code> — 
              текст хранится отдельно в инвертированных списках
              (с особым префиксом), благодаря чему возможен поиск
              по отдельным полям.</p>
            </li>
            <li class="listitem">
              <p><code class="literal">сохранёнными</code> — значение поля
              хранится в записи данных индекса для документа и его
              можно вернуть и отобразить в результатах поиска.</p>
            </li>
          </ul>
        </div>
        <p>Поле может принадлежать либо только к какому-то одному типу, либо
        сразу к обоим. Этот и другие аспекты обработки полей определяются
        в конфигурационном файле <code class="filename">fields</code>.</p>
        <p>Для некоторых полей также можно указать поддержку интервальных
        запросов, в том смысле, что результаты могут выбираться для некоторого
        диапазона возможных величин. См. более подробное описание в
        <a class="link" href="#RCL.INSTALL.CONFIG.FIELDS" title=
        "5.4.3.&nbsp;The fields file">разделе конфигурации</a>.</p>
        <p>При обработке полей события происходят в следующей последовательности:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p>При индексировании <span class=
              "command"><strong>recollindex</strong></span> сканирует
              все поля <code class="literal">meta</code> в HTML-документе
              (большинство типов документов на том или ином этапе преобразуются в HTML).
              Сравнивает имя каждого элемента с конфигурацией для определения
              перечня необходимых операций с полями (файл <code class="filename">fields</code>)</p>
            </li>
            <li class="listitem">
              <p>Если имя элемента <code class=
              "literal">meta</code> совпадает с именем поля,
              которое необходимо проиндексировать, то содержимое
              обрабатывается и слова вводятся в индекс с префиксом,
              определённым в файле <code class=
              "filename">fields</code>.</p>
            </li>
            <li class="listitem">
              <p>Если имя для элемента <code class=
              "literal">meta</code> совпадает с именем поля, которое
              необходимо сохранить, то содержимое элемента сохраняется
              в составе записи данных документа, из которой его можно
              извлечь и отобразить при вводе запроса.</p>
            </li>
            <li class="listitem">
              <p>При выполнении запроса поиска по полям
              производится рассчёт префикса индекса и поиск совпадения
              осуществляется только по словам, содержащим в индексе соответствующий префикс.</p>
            </li>
            <li class="listitem">
              <p>При выполнении запроса поле может отображаться внутри
              списка результатов, если указать соответствую директиву в
              определении <a class="link" href=
              "#RCL.SEARCH.GUI.CUSTOM.RESLIST" title=
              "The result list format">формата абзаца в списке результатов</a>.
              Все поля отображаются при выводе полей в окно просмотра (данный режим отображения
              можно включить через контекстное меню). Причём здесь уже не важно,
              использовался ли поиск, сформировавший эти результаты, для данного
              поля или нет.</p>
            </li>
          </ul>
        </div>
        <p>Дополнительную информацию можно найти в <a class="link"
        href="#RCL.INSTALL.CONFIG.FIELDS" title=
        "5.4.3.&nbsp;The fields file">разделе о файле
        <code class="filename">fields</code></a> или в
        комментариях внутри файла.</p>
        <p>Также можно изучить <a class="ulink" href=
        "https://www.recoll.org/faqsandhowtos/HandleCustomField"
        target="_top">пример в разделе «Вопросы и ответы»</a>, иллюстрирующий
        добавление поля <span class="emphasis"><em>номеров страниц</em></span>
        документов pdf для отображения в списках результатов.</p>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.PROGRAM.PYTHONAPI" id=
              "RCL.PROGRAM.PYTHONAPI"></a>4.3.&nbsp;API для Python</h2>
            </div>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.PROGRAM.PYTHONAPI.INTRO" id=
                "RCL.PROGRAM.PYTHONAPI.INTRO"></a>4.3.1.&nbsp;Введение</h3>
              </div>
            </div>
          </div>
          <p>Программный интерфейс Python может быть использован в <span class="application">Recoll</span>
          как для поиска, так и для создания/обновления
          индекса в виде запуска программы интерпретатором Python3.
          Этот интерпретатор доступен на всех платформах
          (<span class="application">Unix</span>-подобные системы, MS
          Windows, Mac OS).</p>
          <p>Интерфейс поиска используется в нескольких активных
          проектах: <a class="ulink" href=
          "https://www.recoll.org/pages/download.html#gssp" target=
          "_top"><span class="application">Recoll</span>
          <span class="application">Gnome Shell Search
          Provider</span></a>, <a class="ulink" href=
          "https://framagit.org/medoc92/recollwebui" target=
          "_top"><span class="application">Recoll</span> Web
          UI</a> и <a class="ulink" href=
          "https://www.lesbonscomptes.com/upmpdcli/upmpdcli-manual.html#UPRCL"
          target="_top">upmpdcli UPnP Media Server</a>, а также в
          большом количестве небольших сценариев.</p>
          <p>Обновление индекса с помощью API может применяться для
          создания и обновления индексов <span class="application">Recoll</span>.
          До версии <span class="application">Recoll</span>
          1.37 для этого необходимо было использовать отдельные конфигурации (но
          запросы можно было обрабатывать совместно с обычным индексом).
          Начиная с <span class="application">Recoll</span> 1.37,
          внешний индекс с помощью расширения Python может обновлять
          основной индекс. Например, данный метод используется индексатором <span class=
          "application">Recoll</span> для работы с приложением ведения заметок <span class=
          "application">Joplin</span>.</p>
          <p>Модель API поиска составлена согласно спецификации базы данных Python
          API версии 2.0 (более ранние версии использовали спецификацию версии 1.0).</p>
          <p>Пакет <code class="literal">recoll</code> содержит два модуля:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>Модуль <code class="literal">recoll</code>
                содержит функции и классы для выполнения запроса или
                обновления индекса.</p>
              </li>
              <li class="listitem">
                <p>Модуль <code class="literal">rclextract</code>
                содержит функции и классы, использующиеся во время
                запроса для получения доступа к данным документа.
                Это можно использовать, например, при извлечении
                документов, вложенных в отдельные файлы.</p>
              </li>
            </ul>
          </div>
          <p>Есть все шансы, что репозитории вашей системы содержат
          пакеты для Recoll Python API, которые иногда могут помещаться в отдельном пакете
          (с названием похожим на python-recoll). В противном случае, см. главу <a class="link"
          href="#RCL.INSTALL.BUILDING" title=
          "5.3.&nbsp;Building from source">Сборка из исходников</a>.</p>
          <p>В качестве вводного примера приведём небольшую программу, которая
          отправляет запрос, а затем выводит заголовок и url-адрес для каждого
          результата. Каталог исходного кода <code class="filename">python/samples</code>
          содержит несколько примеров программ Python для
          <span class="application">Recoll</span>, использующих
          данное расширение более полноценно, а в особенности её
          возможности по извлечению данных.</p>
          <pre class="programlisting">
#!/usr/bin/python3

from recoll import recoll

db = recoll.connect()
query = db.query()
nres = query.execute("some query")
results = query.fetchmany(20)
for doc in results:
    print("%s %s" % (doc.url, doc.title))
</pre>
          <p>Можно также взглянуть на исходники Recoll (в порядке увеличения
          сложности) <a class="ulink" href=
          "https://framagit.org/medoc92/recoll-gssp/-/blob/master/gssp-recoll.py"
          target="_top">Gnome Shell Search Provider</a>,
          <a class="ulink" href=
          "https://framagit.org/medoc92/recollwebui/-/blob/master/webui.py"
          target="_top">WebUI</a> и <a class="ulink" href=
          "https://framagit.org/medoc92/upmpdcli/-/blob/master/src/mediaserver/cdplugins/uprcl/uprclfolders.py"
          target="_top">локальный медиа-сервер upmpdcli</a> .</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.PROGRAM.PYTHONAPI.ELEMENTS" id=
                "RCL.PROGRAM.PYTHONAPI.ELEMENTS"></a>4.3.2.&nbsp;Элементы
                интерфейса</h3>
              </div>
            </div>
          </div>
          <p>Несколько элементов интерфейса имеют характерные особенности и
          нуждаются в дополнительных разъяснениях.</p>
          <div class="variablelist">
            <dl class="variablelist">
              <dt><a name="RCL.PROGRAM.PYTHONAPI.ELEMENTS.IPATH"
              id="RCL.PROGRAM.PYTHONAPI.ELEMENTS.IPATH"></a><span class="term">ipath</span></dt>
              <dd>
                <p><code class="literal">ipath</code> определяет
                местоположение документа, вложенного в другой документ 
                (определяется по URL-адресу). Значение, при необходимости,
                хранится вместе с URL-адресом, но не индексируется. Доступ
                к нему можно получить или задать в виде поля в объекте Doc.</p>
                <p>Содержимое <code class="literal">ipath</code> непрозрачно
                для нижних уровней индекса (создателей или
                пользователей объектов Doc), и использование их контролируется
                отдельными индексаторами. Например, индексатор файловой системы
                <span class="application">Recoll</span> использует
                <code class="literal">ipath</code> для хранения части пути
                к документу внутри (возможно перекрывающихся) документов-контейнеров.
                <code class="literal">ipath</code> в данном случае будет
                представлять собой своеобразный вектор для доступа к элементам (например,
                первая часть может содержать путь к файлу внутри zip-файла, который в свою
                очередь может оказаться файлом mbox, тогда второй элемент
                будет содержать порядковый номер сообщения внутри mbox и т.д.).
                Сам индекс не имеет никакого понятия об этой иерархической структуре.</p>
                <p>На данный момент <code class="literal">ipath</code>, с учётом иерархии,
                используются только индексатором файловой системы (ни индексатор Web, ни индексатор
                Joplin пока этого не умеют). Некоторое представление о структуре этих элементов также
                складывается на верхнем уровне ПО. Например, в графическом интерфейсе
                <span class="application">Recoll</span> имеется информация по использованию
                элемента индексатора файловой системы <code class="literal">ipath</code>
                для таких функций, как открытие непосредственного родителя данного
                документа.</p>
                <p><code class="literal">url</code> и
                <code class="literal">ipath</code> возвращаются в
                каждом результате поиска и определяют доступ к
                исходному документу. Для документов/файлов
                верхнего уровня возвращается пустое значение <code class=
                "literal">ipath</code> (например, для документа PDF, который
                является отдельным файлом файловой системы).</p>
              </dd>
              <dt><a name="RCL.PROGRAM.PYTHONAPI.ELEMENTS.UDI" id=
              "RCL.PROGRAM.PYTHONAPI.ELEMENTS.UDI"></a><span class=
              "term">udi</span></dt>
              <dd>
                <p><code class="literal">udi</code> (уникальный
                идентификатор документа) используется для идентификации документа. Ввиду
                ограничений в модуле индексатора, он имеет ограниченную
                длину (до 200 байт). Структура и содержимое <code class=
                "literal">udi</code> определяются приложением
                и непрозрачны для модуля индексатора. Например, 
                внутренний индексатор файловой системы для создания идентификатора использует полный
                путь к документу (путь к файлу + внутренний путь),
                обрезанный до максимальной длины. При этом скрытая часть
                заменяется значением хеша для сохранения необходимой
                уникальности.</p>
                <p>Иными словами:
                индексатор файловой системы не может использовать
                URL+ipath в качестве уникального идентификатора
                документа, так как такой идентификатор может оказаться
                слишком большим: вместо этого из URL+ipath извлекается более короткий
                идентификатор <code class="literal">udi</code>. При этом другой индексатор
                может использовать совершенно другой метод.
                Например, индексатор <span class=
                "application">Joplin</span> использует идентификатор заметки.</p>
              </dd>
              <dt><a name=
              "RCL.PROGRAM.PYTHONAPI.ELEMENTS.PARENTUDI" id=
              "RCL.PROGRAM.PYTHONAPI.ELEMENTS.PARENTUDI"></a><span class="term">parent_udi</span></dt>
              <dd>
                <p>Если данный атрибут используется при вводе документа в индекс,
                то в нём задаётся его физический документ-контейнер,
                хотя в многоуровневой иерархии он может и не быть его
                непосредственным родителем. При применении индексатором
                метода <code class=
                "literal">purge()</code> использование
                <code class="literal">parent_udi</code> будет
                обязательно для поддокументов. В противном случае
                данный атрибут применяется опционально, однако может упростить обслуживание индекса индексатором,
                так как <span class="application">Recoll</span> при уничтожении
                документа с соответствующим <code class=
                "literal">udi</code> будет автоматически
                удалять всех потомков, имеющих обозначение <code class=
                "literal">parent_udi == udi</code>. К примеру, если
                <code class="literal">Zip</code>-архив содержит
                элементы, которые сами являются контейнерами, например,
                файлы <code class="literal">mbox</code>, то все
                поддокументы внутри <code class=
                "literal">Zip</code>-файла (mbox, сообщения, вложения
                сообщений, и т.д.) будут иметь один и тот же <code class=
                "literal">parent_udi</code>, совпадающий с
                <code class="literal">udi</code>
                <code class="literal">Zip</code>-файла, и все они
                будут уничтожены при удалении <code class=
                "literal">Zip</code>-файла (идентифицированного по его
                <code class="literal">udi</code>) из индекса.</p>
              </dd>
              <dt><span class="term">Сохраняемые и индексируемые поля</span></dt>
              <dd>
                <p>Файл <a class="link" href=
                "#RCL.INSTALL.CONFIG.FIELDS" title=
                "5.4.3.&nbsp;The fields file"><code class=
                "filename">fields</code></a> в конфигурации
                <span class="application">Recoll</span>
                определяет поля документа либо как
                <code class="literal">индексируемые</code>
                (доступные для поиска), либо как <code class="literal">сохраняемые</code>
                (доступные для получения с результатами поиска), либо как и то и другое сразу.
                В отличие от нескольких стандартных/внутренних полей, только
                <code class="literal">сохраняемые</code> поля могут
                быть доступны через интерфейс поиска Python.</p>
              </dd>
            </dl>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.PROGRAM.PYTHONAPI.LOG" id=
                "RCL.PROGRAM.PYTHONAPI.LOG"></a>4.3.3.&nbsp;Сообщения
                журнала для сценариев Python</h3>
              </div>
            </div>
          </div>
          <p>Две отдельные переменные конфигурации: <code class=
          "literal">pyloglevel</code> и <code class=
          "literal">pylogfilename</code> позволяют переопределять
          базовые значения для программ Python. Установка значения 2 у переменной <code class=
          "literal">pyloglevel</code> приведёт к подавлению стандартных сообщений о
          запуске (выводимых на уровне 3).</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.PROGRAM.PYTHONAPI.SEARCH" id=
                "RCL.PROGRAM.PYTHONAPI.SEARCH"></a>4.3.4.&nbsp;Интерфейс
                поиска Python</h3>
              </div>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.PROGRAM.PYTHONAPI.RECOLL" id=
                  "RCL.PROGRAM.PYTHONAPI.RECOLL"></a>Модуль recoll</h4>
                </div>
              </div>
            </div>
            <div class="simplesect">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title"><a name=
                    "RCL.PROGRAM.PYTHONAPI.RECOLL.CONNECT" id=
                    "RCL.PROGRAM.PYTHONAPI.RECOLL.CONNECT"></a>connect(confdir=None,
                    extra_dbs=None, writable = False)</h5>
                  </div>
                </div>
              </div>
              <p>Функция <code class="function">connect()</code>
              осуществляет соединение с одним или несколькими индексами <span class=
              "application">Recoll</span> и возвращает объект
              <code class="classname">Db</code>.</p>
              <p>Этот вызов инициализирует модуль recoll, который
              всегда должен выполняться перед любым другим вызовом
              или созданием объекта.</p>
              <div class="itemizedlist">
                <ul class="itemizedlist" style=
                "list-style-type: disc;">
                  <li class="listitem">
                    <p><em class=
                    "parameter"><code>confdir</code></em>
                    обозначает основной каталог конфигурации индекса.
                    Отсутствующие значения заменяются на обычные
                    системозависимые параметры по умолчанию.</p>
                  </li>
                  <li class="listitem">
                    <p><em class=
                    "parameter"><code>extra_dbs</code></em> представляет собой
                    список дополнительных внешних индексов (каталоги
                    Xapian). Запросы к ним будут осуществляться, но установка
                    каких-либо значений конфигурации не предусматривается.</p>
                  </li>
                  <li class="listitem">
                    <p><em class=
                    "parameter"><code>writable</code></em> определяет
                    возможность индексирования новых данных по этому соединению.</p>
                  </li>
                </ul>
              </div>
              <p>Пример:</p>
              <pre class="programlisting">from recoll import recoll

# Открывается БД по умолчанию
db = recoll.connect()

# Открывается БД по умолчанию и парочка дополнительных индексов
db = recoll.connect(extra_dbs=["/home/me/.someconfdir/xapiandb", "/data/otherconf/xapiandb"])
</pre>
            </div>
            <div class="simplesect">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title"><a name=
                    "RCL.PROGRAM.PYTHONAPI.RECOLL.DB" id=
                    "RCL.PROGRAM.PYTHONAPI.RECOLL.DB"></a>Класс Db</h5>
                  </div>
                </div>
              </div>
              <p>Объект <code class="classname">Db</code>
              создаётся с помощью вызова <code class="function">connect()</code>
              и поддерживает соединение с индексом <span class=
              "application">Recoll</span>.</p>
              <div class="variablelist">
                <dl class="variablelist">
                  <dt><span class="term">Db.query(),
                  Db.cursor()</span></dt>
                  <dd>
                    <p>Эти методы-синонимы возвращают пустой
                    объект <code class="classname">Query</code> для
                    данного индекса.</p>
                  </dd>
                  <dt><span class="term">Db.getdoc(udi,
                  idxidx=0)</span></dt>
                  <dd>
                    <p>Извлекает документ по указанному уникальному
                    идентификатору, а также индексу при использовании внешних
                    индексов. Основным индексом всегда является индекс 0.
                    Значение <em class=
                    "parameter"><code>udi</code></em> могло быть
                    получено из более раннего запроса как
                    <span class="property">doc.rcludi</span>, либо
                    уже известно, поскольку приложение является
                    индексатором и генерирует эти значения.</p>
                  </dd>
                  <dt><span class="term">Db.termMatch(match_type,
                  expr, field='', maxlen=-1, casesens=False,
                  diacsens=False, lang='english')</span></dt>
                  <dd>
                    <p>Разворачивает выражение согласно списку элементов
                    индекса. Выполняет базовые функции инструмента
                    обзора элементов поиска в графическом интерфейсе. <em class=
                    "parameter"><code>match_type</code></em> может
                    принимать значения <code class="literal">wildcard</code>,
                    <code class="literal">regexp</code> или
                    <code class="literal">stem</code>. <em class=
                    "parameter"><code>field</code></em> (если задано)
                    ограничивает сопоставление содержимым заданного
                    поля метаданных. Возвращает развёрнутый список элементов
                    поиска на основе выражения на входе.</p>
                  </dd>
                  <dt><span class=
                  "term">Db.setAbstractParams(maxchars,
                  contextwords)</span></dt>
                  <dd>
                    <p>Задаёт параметры для построения фрагментов
                    (наборов ключевых слов в текстовых фрагментах из контекста).
                    <em class=
                    "parameter"><code>maxchars</code></em> определяет
                    максимальный общий размер описания.
                    <em class=
                    "parameter"><code>contextwords</code></em>
                    определяет число слов, отображаемых вокруг ключевого слова.</p>
                  </dd>
                  <dt><span class="term">Db.close()</span></dt>
                  <dd>
                    <p>Закрывает соединение. После этого с объектом
                    <code class="classname">Db</code>
                    делать ничего нельзя.</p>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="simplesect">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title"><a name=
                    "RCL.PROGRAM.PYTHONAPI.RECOLL.CLASSES.QUERY"
                    id="RCL.PROGRAM.PYTHONAPI.RECOLL.CLASSES.QUERY">
                    </a>Класс Query</h5>
                  </div>
                </div>
              </div>
              <p>Объект <code class="classname">Query</code>
              (аналогично курсору в Python DB API) создаётся
              с помощью вызова <code class="function">Db.query()</code>.
              Используется для выполнения поиска по индексу.</p>
              <div class="variablelist">
                <dl class="variablelist">
                  <dt><span class="term">Query.sortby(fieldname,
                  ascending=True)</span></dt>
                  <dd>
                    <p>Задаёт порядок сортировки для будущих поисков
                    по полю <em class=
                    "parameter"><code>fieldname</code></em> в
                    восходящем или нисходящем порядке. Вызывается
                    перед выполнением поиска.</p>
                  </dd>
                  <dt><span class=
                  "term">Query.execute(query_string, stemming=1,
                  stemlang="english", fetchtext=False,
                  collapseduplicates=False)</span></dt>
                  <dd>
                    <p>Выполняет поиск по строке <em class=
                    "parameter"><code>query_string</code></em>
                    на языке поиска <span class="application">Recoll</span>.
                    Если тексты документов хранятся в индексе и <em class=
                    "parameter"><code>fetchtext</code></em> имеет значение True,
                    то в результате запроса объекты <code class="classname">Doc</code>
                    будут содержать извлечённый из документа текст в <span class=
                    "property">doc.text</span>. В противном случае
                    поля <span class="property">doc.text</span>
                    будут пусты. Если параметр <em class=
                    "parameter"><code>collapseduplicates</code></em>
                    имеет значение True, то лишь один из нескольких одинаковых
                    документов (определённых по хешу MD5)
                    появится в списке результатов.</p>
                  </dd>
                  <dt><span class=
                  "term">Query.executesd(SearchData,
                  fetchtext=False,
                  collapseduplicates=False)</span></dt>
                  <dd>
                    <p>Запускает поиск по запросу, заданному в
                    объекте <code class="classname">SearchData</code>.
                    См. выше описание других параметров.</p>
                  </dd>
                  <dt><span class=
                  "term">Query.fetchmany(size=query.arraysize)</span></dt>
                  <dd>
                    <p>Получает последующие объекты <code class=
                    "classname">Doc</code> из текущего списка результатов
                    и возвращает их в виде массива соответствующего размера,
                    по умолчанию задаваемого согласно значению элемента данных
                    <span class="property">arraysize</span>.</p>
                  </dd>
                  <dt><span class=
                  "term">Query.fetchone()</span></dt>
                  <dd>
                    <p>Получает следующий объект <code class=
                    "classname">Doc</code> из текущего списка результатов.
                    При завершении списка результатов генерирует исключение <code class=
                    "classname">StopIteration</code>.</p>
                  </dd>
                  <dt><span class="term">Query.__iter__() и
                  Query.next()</span></dt>
                  <dd>
                    <p>Соответственно, обеспечивается работа конструкции <code class="code">for
                    doc in query:</code>. Пример:</p>
                    <pre class="programlisting">
from recoll import recoll

db = recoll.connect()
q = db.query()
nres = q.execute("некий запрос")
for doc in q:
    print("%s" % doc.title)
              </pre>
                  </dd>
                  <dt><span class="term">Query.close()</span></dt>
                  <dd>
                    <p>Закрывает запрос. После данного вызова
                    использование объекта невозможно.</p>
                  </dd>
                  <dt><span class="term">Query.scroll(value,
                  mode='relative')</span></dt>
                  <dd>
                    <p>Настраивает позицию в текущем наборе результатов. Параметр 
                    <em class="parameter"><code>mode</code></em> может принимать значение
                    <code class="literal">relative</code> или
                    <code class="literal">absolute</code>.</p>
                  </dd>
                  <dt><span class=
                  "term">Query.getgroups()</span></dt>
                  <dd>
                    <p>Получает расширенные элементы запроса в виде списка пар.
                    Имеет смысл только после применения executexx. В
                    каждой паре первый элемент представляет собой список
                    элементов запроса пользователя (размером в один элемент для
                    простых запросов, либо больше в случае групповых
                    выражений или фраз). Второй элемент представлен списком 
                    элементов запроса, полученных на основе запроса пользователя
                    для применения в запросе Xapian.</p>
                  </dd>
                  <dt><span class=
                  "term">Query.getxquery()</span></dt>
                  <dd>
                    <p>Возвращает описание запроса Xapian в виде
                    строки Юникод. Имеет смысл только после применения
                    executexx.</p>
                  </dd>
                  <dt><span class="term">Query.highlight(text,
                  ishtml = 0, methods = object)</span></dt>
                  <dd>
                    <p>Заключает области совпадения в тексте ввода в теги <code class="literal">&lt;span
                    "class=rclmatch"&gt;</code> и <code class=
                    "literal">&lt;/span&gt;</code> 
                    и возвращает изменённый текст. Можно задать параметр
                    <em class="parameter"><code>ishtml</code></em> для
                    указания, что текст ввода содержит HTML и
                    не нуждается в экранировании специальных символов HTML. Параметр <em class=
                    "parameter"><code>methods</code></em> (если задан)
                    должен содержать имя объекта с методами <code class=
                    "function">startMatch(i)</code> и
                    <code class="function">endMatch()</code>, которые
                    будут вызываться для каждого совпадения и возвращать
                    тег начала и завершения. Пример:</p>
                    <pre class="programlisting">
class MyHighlighter:
    def startMatch(self, idx):
        return "&lt;span style='color:red;background:yellow;'&gt;"
    def endMatch(self):
        return "&lt;/span&gt;"
</pre>
                  </dd>
                  <dt><span class="term">Query.makedocabstract(doc,
                  methods = object))</span></dt>
                  <dd>
                    <p>Создаёт фрагменты для описания <code class=
                    "varname">doc</code> (объект <code class=
                    "classname">Doc</code>) путём выборки текста
                    вокруг элемента поиска. При указании значения
                    параметра methods также выполняет выделение
                    подсветкой. См. метод <code class="function">highlight()</code>.</p>
                  </dd>
                  <dt><span class="term">Query.getsnippets(doc,
                  maxoccs = -1, ctxwords = -1, sortbypage=False,
                  methods=object)</span></dt>
                  <dd>
                    <p>Возвращает список извлечений из документа
                    в результатах поиска путём выбора текста вокруг
                    совпадения с элементом поиска. Каждый элемент списка
                    результатов содержит три параметра: номер страницы,
                    элемент поиска, текст. По умолчанию более
                    подходящие по смыслу фрагменты появляются
                    в начале списка. Установите значение параметра
                    <em class="parameter"><code>sortbypage</code></em>,
                    чтобы сортировка происходила по номеру страницы.
                    При указании значения параметра
                    <em class="parameter"><code>methods</code></em>
                    фрагменты будут подсвечиваться (см. описание метода
                    <code class="function">highlight()</code>). При указании
                    значения параметра <em class="parameter"><code>maxoccs</code></em>
                    регулируется максимальная длина списка результатов.
                    Параметр <em class=
                    "parameter"><code>ctxwords</code></em> обеспечивает
                    индивидуальную настройку размера фрагмента контекста.</p>
                  </dd>
                </dl>
              </div>
              <div class="variablelist">
                <dl class="variablelist">
                  <dt><span class=
                  "term">Query.arraysize</span></dt>
                  <dd>
                    <p>(r/w). Число записей по умолчанию обрабатываемых
                    с помощью <code class=
                    "function">fetchmany()</code>.</p>
                  </dd>
                  <dt><span class="term">Query.rowcount</span></dt>
                  <dd>
                    <p>Число записей, возвращённых в последнем поиске.</p>
                  </dd>
                  <dt><span class=
                  "term">Query.rownumber</span></dt>
                  <dd>
                    <p>Следующий индекс, который будет получен из результатов.
                    Обычно плюсуется после каждого вызова <code class=
                    "function">fetchone()</code>, но может быть
                    задан/сброшен перед вызовом, чтобы оказать влияние на поиск
                    (аналогично использованию <code class=
                    "function">scroll()</code>). Отсчёт начинается с 0.</p>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="simplesect">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title"><a name=
                    "RCL.PROGRAM.PYTHONAPI.RECOLL.CLASSES.DOC" id=
                    "RCL.PROGRAM.PYTHONAPI.RECOLL.CLASSES.DOC"></a>Класс
                    Doc</h5>
                  </div>
                </div>
              </div>
              <p>Объект <code class="classname">Doc</code> содержит
              данные индекса для текущего документа. Данные извлекаются
              из индекса в процессе поиска или задаются программой-индексатором
              при обновлении. Объект Doc имеет много атрибутов, считываемых
              или задаваемых пользователем. Чаще всего он совпадат с объектом С++
              Rcl::Doc. Некоторые атрибуты установлены предварительно, но другие
              могут быть заданы (особенно в процессе индексирования) с именами, которые
              в конфигурации индекса будут обрабатываться как имена полей.
              Ввод может быть задан в виде Юникода или обычных строк. Для вывода используются
              объекты в Юникоде. Все даты указываются в формате меток времени
              Unix и выводятся в виде строк.
              См. полное описание предустановленных атрибутов в файле С++ <code class=
              "filename">rcldb/rcldoc.cpp</code>. Здесь приводится лишь краткий их перечень.</p>
              <div class="itemizedlist">
                <ul class="itemizedlist" style=
                "list-style-type: disc;">
                  <li class="listitem">
                    <p><code class="literal">url</code> URL-адрес
                    документа, но см. также <code class=
                    "literal">getbinurl()</code></p>
                  </li>
                  <li class="listitem">
                    <p><code class="literal">ipath</code> параметр
                     <code class="literal">ipath</code> для
                    вложенных документов.</p>
                  </li>
                  <li class="listitem">
                    <p><code class="literal">fbytes, dbytes</code>
                    размеры файла и текста документа.</p>
                  </li>
                  <li class="listitem">
                    <p><code class="literal">fmtime, dmtime</code>
                    параметры времени файла и документа.</p>
                  </li>
                  <li class="listitem">
                    <p><code class="literal">xdocid</code> идентификатор
                    данного документа в Xapian. Может использоваться для
                    доступа к документу напрямую через операцию Xapian.</p>
                  </li>
                  <li class="listitem">
                    <p><code class="literal">mtype</code>
                    MIME-тип документа.</p>
                  </li>
                  <li class="listitem">
                    <p><code class="literal">text</code> содержит
                    обрабатываемый текст документа, если параметры
                    конфигурации самого индекса обеспечивают его хранение (настройка по умолчанию),
                    а также если параметр <code class="literal">fetchtext</code>
                    в методе <code class="literal">execute()</code> при выполнении запроса
                    содержал значение True. См. также модуль <code class=
                    "literal">rclextract</code> для доступа к содержимому документа.</p>
                  </li>
                  <li class="listitem">
                    <p>Другие сохраняемые по умолчанию поля: <code class=
                    "literal">author</code>, <code class=
                    "literal">filename</code>, <code class=
                    "literal">keywords</code>, <code class=
                    "literal">recipient</code></p>
                  </li>
                </ul>
              </div>
              <p>В процессе выполнения запроса только те поля, которые
              определены как <code class="literal">сохраняемые</code>,
              либо по умолчанию, либо в конфигурационном файле
              <code class="filename">fields</code> будут иметь смысл
              в объекте <code class="literal">Doc</code>.</p>
              <div class="variablelist">
                <dl class="variablelist">
                  <dt><span class="term">get(key), оператор []</span></dt>
                  <dd>
                    <p>Получает именованный атрибут документа. Можно также
                    использовать <code class="literal">getattr(doc,
                    key)</code> или <code class=
                    "literal">doc.key</code>.</p>
                  </dd>
                  <dt><span class="term">doc.key =
                  значение</span></dt>
                  <dd>
                    <p>Задаёт именованный атрибут документа. Можно также
                    использовать <code class="literal">setattr(doc,
                    key, value)</code>.</p>
                  </dd>
                  <dt><span class="term">getbinurl()</span></dt>
                  <dd>
                    <p>Получает URL-адрес в формате массива байтов (без
                    перекодирования) для использования в качестве параметра
                    системного вызова. Может использоваться для URL-адресов
                    <code class="literal">file://</code> индексатора
                    файловой системы, которые хранятся незакодированными
                    в виде двоичных данных.</p>
                  </dd>
                  <dt><span class="term">setbinurl(url)</span></dt>
                  <dd>
                    <p>Задаёт URL-адрес в формате массива байтов (без
                    перекодирования).</p>
                  </dd>
                  <dt><span class="term">items()</span></dt>
                  <dd>
                    <p>Возвращает словарь ключей/значений объекта doc</p>
                  </dd>
                  <dt><span class="term">keys()</span></dt>
                  <dd>
                    <p>Список ключей объекта doc (имена атрибутов).</p>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="simplesect">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title"><a name=
                    "RCL.PROGRAM.PYTHONAPI.RECOLL.CLASSES.SEARCHDATA"
                    id=
                    "RCL.PROGRAM.PYTHONAPI.RECOLL.CLASSES.SEARCHDATA">
                    </a>Класс SearchData</h5>
                  </div>
                </div>
              </div>
              <p>Объект <code class="literal">SearchData</code>
              позволяет построить запрос путём объединения условий
              и выполнить его с помощью <code class=
              "literal">Query.executesd()</code>. Может использоваться в
              качестве замены для языка запросов. Интерфейс ещё не принял окончательную форму,
              поэтому на данный момент подробную документацию создавать
              преждевременно…</p>
              <div class="variablelist">
                <dl class="variablelist">
                  <dt><span class=
                  "term">addclause(type='and'|'or'|'excl'|'phrase'|'near'|'sub',
                  qstring=string, slack=0, field='', stemming=1,
                  subSearch=SearchData)</span></dt>
                  <dd></dd>
                </dl>
              </div>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.PROGRAM.PYTHONAPI.RCLEXTRACT" id=
                  "RCL.PROGRAM.PYTHONAPI.RCLEXTRACT"></a>Модуль
                  rclextract</h4>
                </div>
              </div>
            </div>
            <p>До <span class="application">Recoll</span> версии
            1.25, запросы к индексу не могли получить содержимое
            документа, потому что он не сохранялся. Но
            начиная с <span class="application">Recoll</span> 1.25 и
            позднее, текст документа сохраняется и может быть частично
            получен при обработке запроса (см. <code class=
            "literal">query.execute()</code> выше — результат
            всегда возвращается в виде простого текста).</p>
            <p>Независимо от этого, модуль <code class=
            "literal">rclextract</code> может предоставлять доступ как
            к исходному документу, так и к его текстовому содержимому,
            а возможно и в виде HTML-версии. Доступ к исходному документу
            особенно важен в том случае, если это вложенный документ (например, вложение
            эл. почты).</p>
            <p>Модуль <code class=
            "literal">recoll</code> необходимо импортировать прежде модуля <code class=
            "literal">rclextract</code>.</p>
            <div class="simplesect">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title"><a name=
                    "RCL.PROGRAM.PYTHONAPI.RCLEXTRACT.CLASSES.EXTRACTOR"
                    id=
                    "RCL.PROGRAM.PYTHONAPI.RCLEXTRACT.CLASSES.EXTRACTOR">
                    </a>Класс Extractor</h5>
                  </div>
                </div>
              </div>
              <div class="variablelist">
                <dl class="variablelist">
                  <dt><span class="term">Extractor(doc)</span></dt>
                  <dd>
                    <p>Объект <code class="literal">Extractor</code>
                    собирается из объекта <code class=
                    "literal">Doc</code> при выводе результата запроса.</p>
                  </dd>
                  <dt><span class=
                  "term">Extractor.textextract(ipath)</span></dt>
                  <dd>
                    <p>Извлекает документ, определённый с помощью <em class=
                    "replaceable"><code>ipath</code></em>, и
                    возвращает объект <code class="literal">Doc</code>.
                    Поле <code class=
                    "literal">doc.text</code> содержит текст документа,
                    преобразованный в text/plain или text/html
                    в соответствии с <code class="literal">doc.mimetype</code>.
                    Обычно используется следующим образом:</p>
                    <pre class="programlisting">
from recoll import recoll, rclextract

qdoc = query.fetchone()
extractor = rclextract.Extractor(qdoc)
doc = extractor.textextract(qdoc.ipath)
# используйте doc.text, например, для просмотра</pre>
                    <p>Сама по себе передача параметра <code class=
                    "literal">qdoc.ipath</code> в <code class=
                    "literal">textextract()</code> избыточна,
                    но отражает фактическую способность объекта <code class=
                    "literal">Extractor</code> получать доступ
                    к другим элементам составного документа.</p>
                  </dd>
                  <dt><span class=
                  "term">Extractor.idoctofile(ipath, targetmtype,
                  outfile='')</span></dt>
                  <dd>
                    <p>Извлекает документ в файл вывода, который
                    может быть задан в явном виде или создан как
                    временный файл, удаляемый вызывающей стороной.
                    Обычное применение:</p>
                    <pre class="programlisting">
from recoll import recoll, rclextract

qdoc = query.fetchone()
extractor = rclextract.Extractor(qdoc)
filename = extractor.idoctofile(qdoc.ipath, qdoc.mimetype)</pre>
                    <p>В любом случае вывод осуществляется путём создания копии, даже если
                    заданный документ является обычным системным файлом,
                    что иногда может быть расточительно. Избежать этого можно
                    с помощью следующего способа проверки является ли файл обычным документом:</p>
                    <pre class="programlisting">
not doc.ipath and (not "rclbes" in doc.keys() or doc["rclbes"] == "FS")
</pre>
                  </dd>
                </dl>
              </div>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.PROGRAM.PYTHONAPI.SEARCH.EXAMPLE" id=
                  "RCL.PROGRAM.PYTHONAPI.SEARCH.EXAMPLE"></a>Пример
                  поиска с помощью API</h4>
                </div>
              </div>
            </div>
            <p>В следующем примере выполняется запрос к индексу
            в виде строки на языке пользователя. См. каталог <code class=
            "filename">python/samples</code> в исходном коде
            <span class="application">Recoll</span> для ознакомления
            с другими примерами. Подкаталог <code class=
            "filename">recollgui</code> имеет зачаточный интерфейс,
            демонстрирующий выделение в виде подсветки и функции извлечения данных.</p>
            <pre class="programlisting">
#!/usr/bin/python3

from recoll import recoll

db = recoll.connect()
db.setAbstractParams(maxchars=80, contextwords=4)

query = db.query()
nres = query.execute("some user question")
print("Result count: %d" % nres)
if nres &gt; 5:
    nres = 5
for i in range(nres):
    doc = query.fetchone()
    print("Result #%d" % (query.rownumber))
    for k in ("title", "size"):
        print("%s : %s" % (k, getattr(doc, k)))
    print("%s\n" % db.makeDocAbstract(doc, query))
</pre>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.PROGRAM.PYTHONAPI.UPDATE" id=
                "RCL.PROGRAM.PYTHONAPI.UPDATE"></a>4.3.5.&nbsp;Интерфейс
                индексирования на Python</h3>
              </div>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.PROGRAM.PYTHONAPI.UPDATE.EXTINDEXER" id=
                  "RCL.PROGRAM.PYTHONAPI.UPDATE.EXTINDEXER"></a>Внешние
                  индексаторы Recoll</h4>
                </div>
              </div>
            </div>
            <p>Индексатор <span class="application">Recoll</span>
            способен обрабатывать множество различных форматов документов.
            Однако некоторые формы хранения данных трудно использовать для
            стандартной обработки в связи со значительной их вариативностью.
            В качестве канонического примера можно привести хранение
            данных в базе данных SQL. Не смотря на то, что можно было бы создать
            настраиваемый фильтр для обработки данных из этой БД,
            большое количество вариантов в организации хранения данных
            и наличие различных диалектов SQL усложняет всё дело.</p>
            <p>Вместо этого <span class="application">Recoll</span>
            способен обеспечить поддержку внешних индексаторов, где вся ответственность
            за работу с форматами данных поручается внешнему сценарию.
            В качестве языка сценария в данный момент можно использовать только
            Python 3, потому что это единственный язык, для которого
            существует API-интерфейс.</p>
            <p>Вплоть до <span class="application">Recoll</span> 1.35,
            такой индексатор должен был работать на отдельном индексе <span class=
            "application">Recoll</span>, который добавлялся в качестве
            внешнего индекса для выполнения запросов из главного индекса,
            и для этого индекса необходимо было вести отдельное расписание
            индексирования. Причина для использования именно такой схемы заключалась в том, что
            в процессе очистки (очистка удалённых документов)
            основной индексатор документов удалял в том числе и данные всех документов,
            принадлежащих внешнему индексатору, поскольку
            не видел эти документы при обходе файловой системы (и наоборот,
            внешний индексатор в процессе очистки удалял все элементы
            обычных документов).</p>
            <p>Но начиная с версии <span class="application">Recoll</span> 1.36,
            ситуация была исправлена. Новый вызов API позволяет внешним
            индексаторам полностью интегрироваться и работать на
            основном индексе с обновлениями, получаемыми штатно из
            программы <span class=
            "command"><strong>recollindex</strong></span>.</p>
            <p>Внешний индексатор выполняет ту же работу, что и
            индексатор файловой системы <span class="application">Recoll</span>:
            поиск модифицированных документов, извлечение текста,
            вызов API для их индексирования, а также очистка индекса от данных
            удалённых документов.</p>
            <p>Описание метода API приводится ниже, но
            можно <a class="link" href=
            "#RCL.PROGRAM.PYTHONAPI.UPDATE.SAMPLES" title=
            "External indexer samples">перейти немного вперёд</a> для
            ознакомления с рядом примеров на псевдокоде, а также изучить несколько
            настоящих реализаций, одна из которых выполняет полезные действия.</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name="idm3402" id=
                  "idm3402"></a>API индексирования на Python</h4>
                </div>
              </div>
            </div>
            <p>Интерфейс индексирования состоит из двух частей:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style=
              "list-style-type: disc;">
                <li class="listitem">
                  <p>Методы в модуле <code class=
                  "filename">recoll</code> позволяют внешнему
                  индексатору обновлять индекс.</p>
                </li>
                <li class="listitem">
                  <p>Интерфейс, основанный на выполнении сценариев,
                  позволяет запускать индексатор (из
                  <span class=
                  "command"><strong>recollindex</strong></span>),
                  чтобы с помощью графического интерфейса или модуля <code class=
                  "filename">rclextract</code> обеспечить доступ к исходным данным
                  документа для просмотра или изменения.</p>
                </li>
              </ul>
            </div>
            <p>Два образца сценариев включены в исходный код
            <span class="application">Recoll</span> и
            подробно описаны <a class="link" href=
            "#RCL.PROGRAM.PYTHONAPI.UPDATE.SAMPLES" title=
            "External indexer samples">чуть ниже</a>.</p>
            <div class="sect4">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title"><a name=
                    "RCL.PROGRAM.PYTHONAPI.UPDATE.UPDATE" id=
                    "RCL.PROGRAM.PYTHONAPI.UPDATE.UPDATE"></a>Методы
                    интерфейса индексирования на Python</h5>
                  </div>
                </div>
              </div>
              <p>Методы обновления входят в состав модуля <code class=
              "filename">recoll</code>. Метод connect() используется
              с параметром <code class="literal">writable=true</code>
              для получения изменяемого объекта <code class="literal">Db</code>.
              В этом случае обеспечивается доступ к следующим методам объекта
              <code class="literal">Db</code>.</p>
              <div class="variablelist">
                <dl class="variablelist">
                  <dt><span class="term">addOrUpdate(udi, doc,
                  parent_udi=None)</span></dt>
                  <dd>
                    <p>Добавляет или обновляет данные индекса для текущего
                    документа. Строка <code class="literal"><a class=
                    "link" href=
                    "#RCL.PROGRAM.PYTHONAPI.ELEMENTS.UDI">udi</a></code>
                    должна определять уникальный идентификатор документа.
                    Это непрозрачный элемент интерфейса, который
                    не интерпретируется внутри <span class=
                    "application">Recoll</span>. <code class=
                    "literal">doc</code> является объектом <code class=
                    "literal"><a class="link" href=
                    "#RCL.PROGRAM.PYTHONAPI.RECOLL.CLASSES.DOC"
                    title="The Doc class">Doc</a></code>, который
                    создаётся из индексируемых данных (основной
                    текст должен находится в <code class=
                    "literal">doc.text</code>). Параметр <code class=
                    "literal"><a class="link" href=
                    "#RCL.PROGRAM.PYTHONAPI.ELEMENTS.PARENTUDI">parent_udi</a></code>
                    (если задан) является уникальным идентфикатором
                    контейнера верхнего уровня, документом, для которого
                    вызывается <code class="literal">needUpdate()</code>
                    (например, для индексатора файловой системы
                    таковым будет являться сам файл).
                    Поля <code class="literal">doc</code>,
                    <code class="literal">url</code> и, вероятно,
                    <code class="literal">ipath</code>
                    также должны быть заданы для обеспечения доступа к
                    самому документу после выполнения запроса. Другие поля
                    требуется указать для обеспечения последующего доступа
                    к данным, см. ниже описание полей:
                    <code class="literal">rclbes</code>,
                    <code class="literal">sig</code>, <code class=
                    "literal">mimetype</code>. Конечно же, к этому списку
                    можно добавить любое стандартное или настраиваемое
                    поле <span class="application">Recoll</span>.</p>
                  </dd>
                  <dt><span class="term">delete(udi)</span></dt>
                  <dd>
                    <p>Очищает индекс от всех данных заданного
                    <code class="literal">udi</code>, а также от данных всех
                    документов, для которых <code class=
                    "literal">udi</code> задан в качестве <code class=
                    "literal">parent_udi</code> (при наличии таковых).</p>
                  </dd>
                  <dt><span class="term">needUpdate(udi,
                  sig)</span></dt>
                  <dd>
                    <p>Проверяет необходимость обновления индекса
                    документа, идентификатором которого является <code class=
                    "literal">udi</code>. Использование этого вызова предполагает,
                    что поле <code class="literal">doc.sig</code> содержит
                    значение подписи при выполнении <code class="literal">addOrUpdate()</code>.
                    В таком случае вызов <code class="literal">needUpdate()</code>
                    выполняет сравнение этого параметра с
                    сохранённым значением <code class="literal">sig</code> для данного
                    <code class="literal">udi</code>. Параметр <code class=
                    "literal">sig</code> содержит непрозрачное значение,
                    сравниваемое в виде строки.</p>
                    <p>Индексатор файловой системы применяет конкатенацию
                    строк, содержащих десятичные числа размера файла и
                    времени изменения, но может использовать и хеш содержимого.</p>
                    <p>В качестве побочного эффекта при возвращении значения
                    false (индекс в актуальном состоянии) вызов установит
                    флаг существования для документа (и любого поддокумента,
                    определяемого по его <code class=
                    "literal">parent_udi</code>), чтобы при последующем
                    вызове <code class="literal">purge()</code> они не были удалены.
                    </p>
                    <p>Использовать <code class=  
                    "literal">needUpdate()</code> и <code class=
                    "literal">purge()</code> необязательно, а
                    индексатор может использовать другой метод для проверки
                    необходимости повторного индексирования или удаления устаревших записей.</p>
                  </dd>
                  <dt><span class=
                  "term">preparePurge(имя_индексатора)</span></dt>
                  <dd>
                    <p>Отмечает все документы, которые *не* принадлежат к
                    указанному индексатору.
                    <em class=
                    "replaceable"><code>имя_индексатора</code></em> представляет
                    собой значение, выбранное для поля <code class=
                    "literal">rclbes</code>, которое предназначается для идентификации индексаторов документов
                    (например, «MBOX», «JOPLIN»…). Этот вызов обязателен
                    перед началом обновления, если индекс используется совместно
                    с другими индексаторами, и после обновления планируется обращение к
                    purge(). В противном случае все документы для других индексаторов
                    будут удалены из индекса при выполнении операции очистки.</p>
                  </dd>
                  <dt><span class="term">purge()</span></dt>
                  <dd>
                    <p>Удаляет все документы, которые не были затронуты
                    во время только что завершённого прохода индексирования
                    (со времени <code class="literal">preparePurge()</code>).
                    Это такие документы, для которых не осуществлялся вызов
                    <code class="literal">needUpdate()</code>,
                    что указывает на их отсутствие в системе хранения.</p>
                  </dd>
                  <dt><span class=
                  "term">createStemDbs(язык|перечень языков)</span></dt>
                  <dd>
                    <p>Создаёт словари словоформ для расширения запроса по словоформам.
                    Обратите внимание на то, что при выполнении индексирования из программы
                    <span class="command"><strong>recollindex</strong></span>
                    необходимость в этой операции отсутствует, поскольку она выполняет
                    это действие после вызова всех внешних индексаторов.
                    Вызов осуществляется при завершении обновления индекса. Доступна
                    только в <span class="application">Recoll</span> 1.34.3 и более
                    поздних версиях. В качестве альтернативы можно закрыть индекс и выполнить:</p>
                    <pre class=
                    "programlisting">recollindex -c &lt;confdir&gt; -s &lt;язык(и)&gt;</pre>
                    <p>Модуль Python на данный момент не имеет интерфейса
                    для функций приложения проверки орфографии Aspell, поэтому
                    тот же подход может быть использован для создания словаря
                    проверки орфографии (с параметром <code class=
                    "literal">-S</code>) (опять же, действие необязательно при выполнении
                    индексирования с помощью
                    <span class=
                    "command"><strong>recollindex</strong></span>).</p>
                  </dd>
                </dl>
              </div>
            </div>
            <div class="sect4">
              <div class="titlepage">
                <div>
                  <div>
                    <h5 class="title"><a name=
                    "RCL.PROGRAM.PYTHONAPI.UPDATE.ACCESS" id=
                    "RCL.PROGRAM.PYTHONAPI.UPDATE.ACCESS"></a>Доступ
                    к данным запроса для внешних индексаторов</h5>
                  </div>
                </div>
              </div>
              <p><span class="application">Recoll</span> обладает
              внутренними методами доступа к данным документа для
              своего внутреннего индексатора (файловой системы). Внешний
              индексатор должен предоставлять свои методы доступа к данным
              при необходимости интеграции с графическим интерфейсом
              (например, с функцией просмотра) или для поддержки модуля <code class=
              "filename">rclextract</code>.</p>
              <p>Внешний индексатор должен предоставлять две команды:
              для получения данных (обычно для просмотра) и для
              вычисления сигнатуры документа (для проверки актуальности
              при открытии или просмотре). В примерах для MBOX
              и JOPLIN выполнение обеих операций осуществляется одним
              и тем же сценарием с различными параметрами, что является
              всего лишь одним из вариантов реализации. Третья команда необходима
              для правильного выполнения индексирования.</p>
              <p>Сценарии «fetch» и «makesig» вызываются с
              тремя дополнительными аргументами: <code class=
              "literal">udi</code>, <code class=
              "literal">url</code>, <code class=
              "literal">ipath</code>. Это те самые параметры, которые задаются
              индексатором и хранятся вместе с документом при вызове 
              <code class="literal">addOrUpdate()</code> в описании выше.
              В каждом конкретном случае могут использоваться не все аргументы,
              а сценарий будет использовать только те из них, которые необходимы
              для выполнения поставленной задачи. Вызывающая сторона ожидает
              вывода итоговых данных на <code class="literal">stdout</code>.</p>
              <p><span class=
              "command"><strong>recollindex</strong></span> в процессе выполнения
              сценариев устанавливает переменную окружения <code class="literal">RECOLL_CONFDIR</code>,
              чтобы при необходимости можно было создать конфигурацию с помощью</p>
              <pre class=
              "programlisting">rclconf = rclconfig.RclConfig()</pre>
              <p>а получение значения конфигурационного каталога осуществляется по примеру, представленному ниже</p>
              <pre class=
              "programlisting">confdir = rclconf.getConfDir()</pre>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.PROGRAM.PYTHONAPI.UPDATE.CONFIGURATION" id=
                  "RCL.PROGRAM.PYTHONAPI.UPDATE.CONFIGURATION"></a>Конфигурация
                  внешних индексаторов</h4>
                </div>
              </div>
            </div>
            <p>Данные индекса и метод доступа связываются посредством значения поля
            <code class="literal">rclbes</code> (хранилище индексатора
            recoll) объекта <code class="literal">Doc</code>. В качестве значения необходимо
            задать для него короткую строку с указанием
            индексатора (например, для индексатора файловой системы используется
            либо <code class="literal">FS</code>, либо пустое значение,
            для индексатора веб-поиска используется <code class=
            "literal">BGL</code>, для индексатора приложения ведения заметок
            Joplin используется <code class="literal">JOPLIN</code>).</p>
            <p>Связь фактически устанавливается в конфигурационном
            файле <code class="filename">backends</code> (находится
            в конфигурационном каталоге). Здесь задаются команды,
            выполняемые для получения данных от заданного индексатора.
            Например, в исходном коде <span class="application">Recoll</span>
            можно найти образец значения для индексирования mbox
            (задаётся параметром <code class="literal">rclbes="MBOX"</code>):</p>
            <pre class="programlisting">[MBOX]
fetch = /path/to/recoll/src/python/samples/rclmbox.py fetch
makesig = /path/to/recoll/src/python/samples/rclmbox.py makesig
index = /path/to/recoll/src/python/samples/rclmbox.py index
</pre>
            <p>Во время обновления индекса <span class=
            "command"><strong>recollindex</strong></span> исполняет
            значение параметра <code class=
            "literal">index</code> при его наличии (может отсутствовать,
            если относится к внешнему индексу).</p>
            <p>Если внешнему индексатору необходимо хранить дополнительные
            параметры конфигурации, например, путь к особому
            экземпляру индексируемого приложения, и т.д., то я бы
            предложил хранить их внутри <code class=
            "filename">recoll.conf</code> с префиксом, соответствующим
            конкретному индексатору (например, <em class=
            "replaceable"><code>joplin_db</code></em>, <em class=
            "replaceable"><code>mbox_directory</code></em>), и для
            доступа к ним использовать методы из модуля <code class=
            "filename">rclconfig</code>.</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.PROGRAM.PYTHONAPI.UPDATE.SAMPLES" id=
                  "RCL.PROGRAM.PYTHONAPI.UPDATE.SAMPLES"></a>Примеры
                  внешних индексаторов</h4>
                </div>
              </div>
            </div>
            <p>Сначала небольшое знакомство с основой частью индексатора в виде
            псевдокода Python3:</p>
            <pre class="programlisting">
    # Соединение с индексом recoll. Здесь используется переменная <code class=
"literal">RECOLL_CONFDIR</code>, устанавливаемая
    # родительским процессом recollindex для использования соответствующего индекса.
    rcldb = recoll.connect(writable=1)

    # Важный момент: сообщаем БД Recoll, что будем обновлять документы для индексатора
    # <em class=
"replaceable"><code>MYBACK</code></em>. Все прочие документы будут отмечены как текущие, чтобы не удалить их
    # во время предстоящего очищения.
    rcldb.preparePurge("MYBACK")

    # Проход по набору данных (без сомнения ваш код будет выглядеть иначе)
    for mydoc in mydoclist:
        # Вычисление уникального идентификатора doc и сигнатуры, соответствующей состоянию его обновления
        # (например, mtime и размер для файла).
        udi = mydoc.udi()
        sig = mydoc.sig()
        # Проверка необходимости обновления файла, выполняемая с помощью recoll. Имеет побочный эффект в
        # виде отметки о существовании документа.
        if not rcldb.needUpdate(udi, sig):
            continue
        # Данные документа отсутствуют в индексе или требуют обновления. Создаётся и добавляется объект Doc
        # в Recoll
        doc = recoll.Doc()
        doc.mimetype = "some/type"
        # Укажите индексатор, которому принадлежит данный документ
        doc.rclbes = "MYBACK"
        # Url-адрес будет передан обратно вместе с udi, если метод <code class="literal">fetch</code>
        # вызван позднее (для просмотра), либо он может быть использован для открытия документа
        # его собственным приложением из Recoll. Udi ограничен максимальным размером, поскольку используется в качестве
        # элемента поиска Xapian. Url-адрес таких ограничений не имеет.
        doc.url = "someurl"
        doc.sig = sig
        # Конечно, здесь можно добавить другие поля, такие как «text» (duh), «author» и т.д. См. примеры.
        doc.text = mydoc.text()
        # [...]
        # Затем нужно добавить или обновить данные в индексе.
        self.db.addOrUpdate(udi, doc)

    # Наконец, вызывается purge для удаления данных отсутствующих документов.
    db.purge()
</pre>
            <p>В дереве исходного кода Recoll имеется два образца внешних индексаторов.</p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style=
              "list-style-type: disc;">
                <li class="listitem"><a class="ulink" href=
                "https://framagit.org/medoc92/recoll/-/blob/master/src/python/samples/rclmbox.py"
                target="_top">rclmbox.py</a> индексирует каталог,
                содержащий папку файлов <code class="literal">mbox</code>.
                Конечно, целесообразность такого сценария невелика, поскольку
                <span class="application">Recoll</span> умеет делать
                это сам. Однако здесь применяется много функций
                по интерфейсу обновления как с документами
                верхнего уровня, так и с вложенными документами, что позволяет продемонстрировать
                использование значений <code class="literal">ipath</code>.</li>
                <li class="listitem"><a class="ulink" href=
                "https://framagit.org/medoc92/recoll/-/blob/master/src/filters/rcljoplin.py"
                target="_top">rcljoplin.py</a> индексирует таблицу
                SQL главных <code class="literal">заметок</code>
                приложения <span class="application">Joplin</span>.
                <span class="application">Joplin</span> задаёт
                атрибут даты обновления каждой записи в таблице,
                чтобы заметку из этой записи можно было обрабатывать в качестве
                отдельного документа (в <code class=
                "literal">ipath</code> здесь необходимости нет). Пример
                содержит полную поддержку просмотра и открытия записи
                (в последнем случае используется URL-адрес обратного вызова
                <span class="application">Joplin</span>,
                который позволяет отобразить целевую заметку
                в собственном приложении), что могло бы быть полезно для
                унифицированного поиска как данных <span class=
                "application">Joplin</span>, так и обычных данных
                <span class="application">Recoll</span>. Начиная с
                <span class="application">Recoll</span> версии 1.37.0,
                индексатор Joplin является частью установки по умолчанию
                (см. раздел функций на веб-сайте для получения более подробной
                информации).</li>
              </ul>
            </div>
            <p>См. комментарии внутри сценария для получения более подробной
            информации.</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.PROGRAM.PYTHONAPI.UPDATE.ASEXTINDEX" id=
                  "RCL.PROGRAM.PYTHONAPI.UPDATE.ASEXTINDEX"></a>Использование
                  индекса внешнего индексатора вместе с обычным индексом</h4>
                </div>
              </div>
            </div>
            <p>При добавлении внешнего индексатора к обычному для
            выполнения унифицированных запросов некоторые элементы
            конфигурации внешнего индекса необходимо скопировать или
            объединить с конфигурацией основного индекса. Как минимум,
            необходимо скопировать или объединить файл
            <code class="filename">backends</code>, а также, по-возможности,
            данные из файлов <code class="filename">mimeconf</code> и <code class=
            "filename">mimeview</code>. См. образец <code class=
            "filename">rcljoplin.py</code> для примера.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="chapter">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a name="RCL.INSTALL" id=
            "RCL.INSTALL"></a>Глава&nbsp;5.&nbsp;Установка и
            настройка конфигурации</h1>
          </div>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INSTALL.BINARY" id=
              "RCL.INSTALL.BINARY"></a>5.1.&nbsp;Установка
              бинарной версии</h2>
            </div>
          </div>
        </div>
        <p>Бинарные версии <span class="application">Recoll</span>
        всегда распространяется в виде обычных пакетов для установки в системе.
        Их можно получить либо по обычной схеме распространения
        программного обеспечения для данной системы (например, <span class=
        "application">Debian/Ubuntu apt</span>, портированные версии для <span class=
        "application">FreeBSD</span>, и т.д.), либо с одного из
        репозиториев «backports», содержащих более новые версии ПО,
        а в некоторых случаях можно использовать и пакеты, расположенные на веб-сайте <span class=
        "application">Recoll</span>. Самая актуальная информация о пакетах Recoll обычно находится
        на <a class="ulink" href=
        "https://www.recoll.org/pages/download.html" target=
        "_top">странице загрузки веб-сайта <span class="application">Recoll</span></a></p>
        <p>Версия Recoll для <span class="application">Windows</span>
        поставляется в отдельном установочном файле, больше
        ничего устанавливать не нужно.</p>
        <p>На <span class="application">Unix</span>-подобных системах,
        инструменты управления пакетами автоматически установят
        необходимые зависимости в виде пакетов, полученных из соответствующих
        репозиториев. После загрузки установку пакетов необходимо будет выполнить
        вручную (например, когда <span class=
        "command"><strong>dpkg</strong></span> сообщает об отсутствующих
        зависимостях).</p>
        <p>Во всех случаях необходимо будет проверить или установить
        <a class="link" href="#RCL.INSTALL.EXTERNAL" title=
        "5.2.&nbsp;Supporting packages">поддерживающие приложения</a>
        для тех типов файлов, которые предполагается индексировать, за исключением
        стандартно обрабатываемых в <span class=
        "application">Recoll</span> (текст, HTML-файлы, файлы эл.почты и
        некоторые другие).</p>
        <p>Также может потребоваться заглянуть в <a class="link"
        href="#RCL.INSTALL.CONFIG" title=
        "5.4.&nbsp;Configuration overview">раздел конфигурации
        </a> (но в этом может и не возникнуть необходимости после быстрой проверки
        с параметрами по умолчанию). Большая часть параметров может быть установлена
        более удобно через графический интерфейс.</p>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INSTALL.EXTERNAL" id=
              "RCL.INSTALL.EXTERNAL"></a>5.2.&nbsp;Поддерживающие
              пакеты</h2>
            </div>
          </div>
        </div>
        <div class="note" style=
        "margin-left: 0.5in; margin-right: 0.5in;">
          <h3 class="title">Примечание</h3>
          <p>Установка <span class="application">Recoll</span>
          на <span class="application">Windows</span>
          содержит все необходимые элементы. Пользователи <span class=
          "application">Windows</span> могут пропустить этот раздел.</p>
        </div>
        <p><span class="application">Recoll</span> использует внешние
        приложения для индексирования некоторых типов файлов.
        Установить эти приложения необходимо для тех типов файлов, которые
        предполагается индексировать (это необязательные зависимости, использующиеся
        на этапе выполнения программы, которые требуются не для сборки
        или работы <span class=
        "application">Recoll</span>, а только для индексирования файлов
        соответствующего типа).</p>
        <p>После прохода индексирования список отсутствующих команд
        можно вывести с помощью меню <span class=
        "guilabel">Файл</span> приложения <span class=
        "command"><strong>recoll</strong></span>. Список хранится в
        текстовом файле <code class="filename">missing</code> внутри
        конфигурационного каталога.</p>
        <p>Практика показывает, что поддержка актуального списка программного
        обеспечения в этом руководстве мне не по силам. Зайдите на страницу
        <a class="ulink" href=
        "https://www.recoll.org/pages/features.html#doctypes"
        target=
        "_top">https://www.recoll.org/pages/features.html</a> для
        получения полного списка вместе со ссылками на домашние страницы
        или наиболее актуальные страницы с исходным текстом/патчами и различными подсказками.
        Ниже следует очень краткая выдержка, содержащая стабильный базовый минимум таких программ.</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p>Для PDF-файлов потребуется <span class=
              "command"><strong>pdftotext</strong></span>, 
              являющийся частью <span class="application">Poppler</span>
              (обычно поставляется в пакете <code class=
              "literal">poppler-utils</code>). Не используйте
              оригинальную версию от <span class=
              "application">Xpdf</span>.</p>
            </li>
            <li class="listitem">
              <p>Для документов MS Word необходимо установить <span class=
              "command"><strong>antiword</strong></span>. Также
              нелишним будет установить <span class=
              "command"><strong>wvWare</strong></span>
              в качестве резервного варианта для некоторых
              файлов, которые не поддерживает <span class=
              "command"><strong>antiword</strong></span>.</p>
            </li>
            <li class="listitem">
              <p>Для файлов RTF потребуется <span class=
              "command"><strong>unrtf</strong></span>, который в
              более старых версиях создавал немало проблем при работе с кодировками
              незападноевропейских языков. При этом многие дистрибутивы Linux до сих пор включают
              устаревшие версии <span class=
              "command"><strong>unrtf</strong></span>.
              См. более подробную информацию на <a class="ulink" href=
              "https://www.recoll.org/pages/features.html#doctypes"
              target=
              "_top">https://www.recoll.org/pages/features.html</a>.</p>
            </li>
            <li class="listitem">
              <p>Изображения: для извлечения информации из тегов изображений
              <span class="application">Recoll</span>
              использует пакет <span class="application">Exiftool</span>
              от <span class="application">Perl</span>. Поддерживает большую часть
              форматов файлов изображений.</p>
            </li>
            <li class="listitem">
              <p>Вплоть до <span class="application">Recoll</span>
              версии 1.24 многие форматы на основе XML требовали
              наличия команды <span class=
              "command"><strong>xsltproc</strong></span>,
              которая обычно поставляется в пакете <span class=
              "application">libxslt</span>. Эти форматы включают:
              abiword, fb2 ebooks, kword, openoffice, opendocument svg.
              Начиная с <span class="application">Recoll</span> версии 1.25 и
              более поздних, обработка этих форматов выполняется самостоятельно (с помощью libxslt).</p>
            </li>
          </ul>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INSTALL.BUILDING" id=
              "RCL.INSTALL.BUILDING"></a>5.3.&nbsp;Сборка из
              исходного кода</h2>
            </div>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.BUILDING.PREREQS" id=
                "RCL.INSTALL.BUILDING.PREREQS"></a>5.3.1.&nbsp;Необходимые условия</h3>
              </div>
            </div>
          </div>
          <p>Следующие условия описаны в общих словах
          с применением наименований пакетов Debian. Зависимости должны
          быть доступны в виде пакетов наиболее распространённых
          Unix-подобных систем, в связи с чем необходимость сборки какого-нибудь из этих пакетов будет выглядеть
          в данном контексте крайне необычно. Определение правильного имени пакета для
          других систем оставляем догадливости проницательного читателя.</p>
          <p>Если графический интерфейс не требуется, то все зависимости, связанные
          с графическим интерфейсом, отключаются путём отмены его сборки. (См. раздел конфигурации
          ниже: <code class=
          "literal">--disable-qtgui</code>).</p>
          <p>Далее следует список необходимых аксессуаров:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p>Если начать с кода git, то потребуется
                команда <span class="command"><strong>git</strong></span>
                (<code class="literal">git</code>), а также триада
                <span class=
                "command"><strong>autoconf</strong></span>,
                <span class=
                "command"><strong>automake</strong></span> и
                <span class=
                "command"><strong>libtool</strong></span>
                (<code class="literal">autoconf</code>,
                <code class="literal">automake</code>, <code class=
                "literal">libtool</code>). Однако для сборки
                из дистрибутивов tar они не потребуются.</p>
              </li>
              <li class="listitem">
                <p>Команда pkg-config и пакет gettext нужны
                для настройки конфигурации сборки (<code class=
                "literal">pkg-config</code>, <code class=
                "literal">gettext</code>).</p>
              </li>
              <li class="listitem">
                <p>Команда <span class=
                "command"><strong>make</strong></span> 
                (<code class="literal">make</code>, которая
                фактически выполняет установку <span class="application">GNU
                make</span> на Linux). Если выводятся сообщения о странной ошибке
                по отслеживанию зависимостей от 
                <span class="command"><strong>configure</strong></span>,
                то скорее всего вы забыли установить <span class=
                "command"><strong>make</strong></span>.</p>
              </li>
              <li class="listitem">
                <p>Компилятор C++, как минимум, должен быть совместим с C++14
                (<code class="literal">g++</code> или <code class=
                "literal">clang</code>). Для версии 1.33.4 и более старых
                достаточно c++11.</p>
              </li>
              <li class="listitem">
                <p>Команда <span class=
                "command"><strong>bison</strong></span> обычно
                не нужна, но может и пригодиться, если
                время изменения какого-нибудь файла указано неверно.</p>
              </li>
              <li class="listitem">
                <p>При необходимости обработки файлов CHM потребуется
                libchm (<code class="literal">libchm-dev</code>),
                либо задаётся параметр <code class=
                "literal">--disable-python-chm</code> для команды
                <span class=
                "command"><strong>configure</strong></span>.</p>
              </li>
              <li class="listitem">
                <p>Для сборки документации: команда <span class=
                "command"><strong>xsltproc</strong></span>,
                а также файлы Docbook XML и файлы стилей. Можно
                исключить эту зависимость путём отключения сборки
                документации установкой параметра <code class=
                "literal">--disable-userdoc</code> для <span class=
                "command"><strong>configure</strong></span>.</p>
              </li>
              <li class="listitem">
                <p>Файлы разработки <a class="ulink" href=
                "https://www.xapian.org" target="_top"><span class=
                "application">ядра Xapian</span></a> (<code class=
                "literal">libxapian-dev</code>).</p>
                <div class="important" style=
                "margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Важно</h3>
                  <p>При сборке Xapian для более ранних ЦП
                  (до Pentium 4 или Athlon 64) необходимо применять
                  параметр <code class="option">--disable-sse</code>
                  с командой <span class=
                  "command"><strong>configure</strong></span>.
                  В противном случае произойдёт сбой приложения Xapian
                  с ошибкой <code class="literal">недопустимая
                  инструкция</code>.</p>
                </div>
              </li>
              <li class="listitem">
                <p>Файлы разработки <span class=
                "application">libxslt</span> (<code class=
                "literal">libxslt1-dev</code>).</p>
              </li>
              <li class="listitem">
                <p>Файлы разработки <span class=
                "application">zlib</span> (<code class=
                "literal">zlib1g-dev</code>).</p>
              </li>
              <li class="listitem">
                <p>Файлы разработки <span class=
                "application">libaspell</span> (<code class=
                "literal">libaspell-dev</code>). Можно отключить
                с помощью параметра <code class=
                "literal">--disable-aspell</code> с командой
                <span class=
                "command"><strong>configure</strong></span>.</p>
              </li>
              <li class="listitem">
                <p>Для построения графического интерфейса: файлы разработки
                <a class="ulink" href=
                "https://qt-project.org/downloads" target=
                "_top"><span class="application">Qt 5</span></a>.
                В противном случае задаётся параметр <code class=
                "literal">--disable-qtgui</code> с командой
                <span class=
                "command"><strong>configure</strong></span>.
                Могут потребоваться <code class=
                "literal">qtbase5-dev</code> и <code class=
                "literal">qttools5-dev-tools</code>, а также другие пакеты, которые
                я никак не могу запомнить, но при установке Qt5 Webkit (или Qt5 Webengine, если
                задан параметр <code class=
                "literal">--enable-webengine</code>) они обычно
                добавляются в состав зависимостей (<code class=
                "literal">libqt5webkit5-dev</code> или <code class=
                "literal">qtwebengine5dev</code>). Графический интерфейс <span class=
                "application">Recoll</span> для отображения результатов может использовать либо
                Webkit, либо Webengines.</p>
              </li>
              <li class="listitem">
                <p>Файлы разработки <span class=
                "application">Python3</span> (<code class=
                "literal">python3-all-dev</code>, <code class=
                "literal">python3-setuptools</code>). Можно использовать
                параметр <code class=
                "literal">--disable-python-module</code> для
                отключения сборки расширения Python. На более
                старых системах, всё ещё поддерживающих Python2,
                также можно установить <code class=
                "literal">python2-dev</code> и <code class=
                "literal">python-setuptools</code>. Сборка проверит
                наличие команд python2 и/или python3
                и скорректирует свои действия.</p>
              </li>
              <li class="listitem">
                <p>Также может потребоваться <a class="ulink" href=
                "https://www.gnu.org/software/libiconv/" target=
                "_top">libiconv</a>. На <span class=
                "application">Linux</span>-системах интерфейс iconv
                является частью libc и никаких специальных действий
                выполнять не потребуется.</p>
              </li>
            </ul>
          </div>
          <p>Проверьте <a class="ulink" href=
          "https://www.recoll.org/pages/download.html" target=
          "_top">страницу загрузки <span class="application">Recoll</span>
          </a> для получения информации по актуальной версии.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.BUILDING.BUILDING" id=
                "RCL.INSTALL.BUILDING.BUILDING"></a>5.3.2.&nbsp;Сборка</h3>
              </div>
            </div>
          </div>
          <p><span class="application">Recoll</span> собирался
          на Linux, FreeBSD, MacOS и Solaris. На большинстве версий
          после 2005 г. всё должно работать нормально, и даже на некоторых более древних из них
          (на Solaris 8 обычно всё работало без замечаний). Текущие версии <span class=
          "application">Recoll</span> (1.34 и более поздние)
          требуют наличия компилятора c++14 и Qt5, в связи с чем не могут быть собраны
          на старых системах, но при необходимости можно попробовать найти более старую версию,
          которая будет соответствовать заданным параметрам. Если сборка выполняется
          на другой системе, и что-то приходится менять, <a class=
          "ulink" href="mailto:jfd@recoll.org" target="_top">то
          очень хотелось бы увидеть ваши патчи</a>.</p>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.BUILDING.BUILDING.CONFIGURE" id=
                  "RCL.INSTALL.BUILDING.BUILDING.CONFIGURE"></a>Параметры
                  конфигурации:</h4>
                </div>
              </div>
            </div>
            <p><code class="option">--without-aspell</code> отключает
            код фонетического совпадения элементов поиска.</p>
            <p><code class="option">--with-fam</code> или
            <code class="option">--with-inotify</code> включает
            код индексирования в режиме реального времени. На системах
            Linux поддержка inotify включена по умолчанию.</p>
            <p><code class="option">--with-qzeitgeist</code> включает
            отправку событий <span class=
            "application">Zeitgeist</span> о просмотре результатов поиска
            и требует наличия пакета <span class=
            "application">qzeitgeist</span>.</p>
            <p><code class="option">--disable-qtgui</code> отключает
            графический интерфейс Qt, который позволяет собрать индексатор
            и программу поиска в командной строке в отсутствии среды Qt.</p>
            <p><code class="option">--disable-webkit</code> реализует
            вывод списка результатов с помощью QTextBrowser <span class=
            "application">Qt</span>, вместо виджета WebKit, если
            вы не зависите или не можете от него зависеть.</p>
            <p><code class="option">--enable-webengine</code> включает
            использование Qt Webengine (имеет смысл только при включении
            графического интерфейса Qt) вместо Qt Webkit.</p>
            <p><code class="option">--enable-guidebug</code> собирает
            графический интерфейс программы recoll с отладочными символами. Это
            значительно увеличивает его размер (~50МБ), в связи с чем параметр отключён
            по умолчанию.</p>
            <p><code class="option">--disable-idxthreads</code> доступен
            начиная с версии 1.19 для подавления многопоточности
            в процессе индексирования. Ограничить <span class=
            "command"><strong>recollindex</strong></span> использованием
            одного потока можно и с помощью параметров рабочей конфигурации, но при компилировании этот параметр может
            отключить ещё несколько неиспользующихся блокировок. Применимо только
            к использованию многопоточности на уровне ядра для обработки индекса
            (ввод данных). При работе в режиме монитора <span class=
            "application">Recoll</span> всегда использует не менее двух потоков.</p>
            <p><code class="option">--disable-python-module</code>
            отключает сборку модуля <span class=
            "application">Python</span>.</p>
            <p><code class="option">--disable-python-chm</code>
            отключает сборку интерфейса Python libchm, который используется при
            индексировании файлов CHM.</p>
            <p><code class="option">--enable-camelcase</code> включает функцию
            разделения слов, написанных в <em class=
            "replaceable"><code>верблюжьемРегистре</code></em>. Эта
            функция по умолчанию отключена в связи с неприятным побочным эффектом,
            при котором поиск по фразе в некоторых случаях может привести к путанице:
            т.е., <code class="literal">"MySQL
            manual"</code> совпадает с <code class=
            "literal">"MySQL manual"</code> и <code class=
            "literal">"my sql manual"</code>, но не совпадает с <code class=
            "literal">"mysql manual"</code> (происходит только при поиске
            по фразам).</p>
            <p><code class="option">--with-file-command</code>
            указывает применяемую версию команды «file» (например:
            --with-file-command=/usr/local/bin/file). Может быть
            полезно при использовании GNU-версии на системах, где собственная
            версия работает некорректно.</p>
            <p><code class="option">--disable-x11mon</code> отключает
            контроль связи с <span class="application">X11</span>
            в recollindex. При использовании совместно с
            --disable-qtgui позволяет построить recoll без
            <span class="application">Qt</span> и <span class=
            "application">X11</span>.</p>
            <p><code class="option">--disable-userdoc</code> отключает
            сборку руководства пользователя. При этом исключается
            необходимость установки XML/XSL-файлов Docbook и набора
            инструментов TeX, применяющихся для конвертирования
            руководства в PDF.</p>
            <p><code class="option">--enable-recollq</code> включает
            сборку инструмента ввода запросов в командной строке <span class=
            "command"><strong>recollq</strong></span> (recoll -t без необходимости использования Qt).
            Это же действие выполняется по умолчанию при указании параметра --disable-qtgui, но при указании данного
            параметра это происходит принудительно.</p>
            <p><code class="option">--disable-pic</code>
            (только версии <span class="application">Recoll</span>
            до 1.21) выполняет компилирование <span class=
            "application">Recoll</span> с позиционно-зависимым программным кодом.
            Данный параметр несовместим со сборкой KIO, а также расширениями на <span class="application">Python</span>
            или <span class="application">PHP</span>, но поможет собрать
            чуть более быстрый код.</p>
            <p><code class="option">--without-systemd</code>
            отменяет автоматическую установку юнит-файлов systemd.
            Обычно юнит-файлы устанавливаются, когда можно обнаружить пути установки.</p>
            <p><code class=
            "option">--with-system-unit-dir=DIR</code> указывает
            путь установки шаблона системного юнит-файла systemd.</p>
            <p><code class="option">--with-user-unit-dir=DIR</code>
            указывает путь установки юнит-файла systemd для пользователя.</p>
            <p>И конечно же здесь применимы стандартные параметры <span class=
            "application">autoconf</span> <span class=
            "command"><strong>configure</strong></span>,
            такие как <code class="option">--prefix</code>.</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.BUILDING.BUILDING.TAR" id=
                  "RCL.INSTALL.BUILDING.BUILDING.TAR"></a>Обычная
                  процедура для исходного кода из
                  tar-дистрибутива KIO slave</h4>
                </div>
              </div>
            </div>
            <pre class="screen"><strong class=
            "userinput"><code>cd recoll-xxx</code></strong>
<strong class="userinput"><code>./configure <em class=
"replaceable"><code>[параметры]</code></em></code></strong>
<strong class="userinput"><code>make</code></strong>
<strong class=
"userinput"><code>(практикует вызовы, минимально подверженные возникновению проблем)</code></strong></pre>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.BUILDING.BUILDING.GIT" id=
                  "RCL.INSTALL.BUILDING.BUILDING.GIT"></a>Сборка
                  из исходного кода на git</h4>
                </div>
              </div>
            </div>
            <p>При сборке из исходного кода, клонированного с репозитория
            git, необходимо установить <span class=
            "application">autoconf</span>, <span class=
            "application">automake</span> и <span class=
            "application">libtool</span>, а также выполнить сценарий
            <code class="literal">sh autogen.sh</code> в каталоге верхнего
            уровня исходного кода перед запуском <code class=
            "literal">configure</code>.</p>
            <p>Также потребуется запустить <span class=
            "command"><strong>configure</strong></span> с параметром
            <code class="literal">--disable-userdoc</code>, либо
            установить XML/XSL-файлы Docbook, которые необходимы
            для преобразования XML-руководства Docbook в формат HTML.</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.BUILDING.INSTALL" id=
                "RCL.INSTALL.BUILDING.INSTALL"></a>5.3.3.&nbsp;Установка</h3>
              </div>
            </div>
          </div>
          <p>Запустите <strong class="userinput"><code>make
          install</code></strong> в корневом каталоге дерева исходного кода.
          При этом исполняемые файлы копируются в <code class=
          "filename"><em class=
          "replaceable"><code>prefix</code></em>/bin</code>, а
          образцы конфигурационных файлов, сценариев и других разделяемых данных
          — в <code class="filename"><em class=
          "replaceable"><code>prefix</code></em>/share/recoll</code>.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.BUILDING.PYTHON" id=
                "RCL.INSTALL.BUILDING.PYTHON"></a>5.3.4.&nbsp;Пакет API для Python</h3>
              </div>
            </div>
          </div>
          <p>Интерфейс для Python находится в дереве исходного кода
          в каталоге <code class="filename">python/recoll</code>.</p>
          <p>Обычная процедура сборки <span class="application">Recoll</span>
          (см. выше) устанавливает пакет API как для Python2, так и для Python3.
          Хотя версия Python2, вероятно, канет в лету уже в ближайшем будущем.</p>
          <p>Каталог <code class="filename">python/recoll/</code>
          содержит стандартный файл <code class=
          "filename">setup.py</code>. После настройки конфигурации и
          сборки основного кода <span class="application">Recoll</span>
          можно использовать сценарий сборки и установки модуля
          Python для нестандартной версии Python.</p>
          <pre class="screen">
          <strong class=
"userinput"><code>cd recoll-xxx/python/recoll</code></strong>
          <strong class=
"userinput"><code>pythonX setup.py build</code></strong>
          <strong class=
"userinput"><code>sudo pythonX setup.py install</code></strong>
        </pre>
        </div>
      </div>
      <div class="sect1">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a name=
              "RCL.INSTALL.CONFIG" id=
              "RCL.INSTALL.CONFIG"></a>5.4.&nbsp;Обзор настройки
              конфигурации</h2>
            </div>
          </div>
        </div>
        <p>Большая часть параметров, предназначенных для графического интерфейса <span class=
        "command"><strong>recoll</strong></span>, настраивается
        в меню <span class="guilabel">Настройки</span>
        и стандартно для Qt хранится в (<code class=
        "filename">$HOME/.config/Recoll.org/recoll.conf</code>).
        Вряд ли кому-то понравится идея редактировать этот файл вручную.</p>
        <p>Параметры индексирования <span class="application">Recoll</span>
        задаются внутри текстовых конфигурационных файлов, размещённых
        в конфигурационном каталоге. Там может быть несколько
        каталогов, каждый из которых определяет параметры для
        одного индекса.</p>
        <p>Конфигурационные файлы можно изменять вручную или
        в диалоговом окне <span class="guilabel">Настройка индекса</span>
        (в меню <span class="guilabel">Настройки</span>).
        Инструмент графического интерфейса, насколько это возможно,
        старается сохранить заданный стиль форматирования
        и комментарии, что позволяет использовать оба подхода
        на одной конфигурации.</p>
        <p>Для каждого индекса имеется по крайней мере два набора
        конфигурационных файлов. Общесистемные конфигурационные файлы,
        хранящиеся в каталоге с названиеим <code class=
        "filename">/usr/share/recoll/examples</code>, содержат
        значения по умолчанию, использующиеся всеми индексами
        (значения в этих файлах часто бывают закомментированы, и присутствуют
        лишь для указания значений по умолчанию, заданных в коде программы).
        Для каждого индекса существует параллельный набор файлов, определяющих
        настраиваемые параметры.</p>
        <p>На <span class="application">Unix</span>-подобных системах,
        настраиваемая конфигурация по умолчанию располагается в
        каталоге <code class="filename">.recoll</code>, размещённом в домашнем каталоге.
        На <span class="application">Windows</span> этот каталог располагается в
        <code class=
        "filename">C:/Users/[you]/AppData/Local/Recoll</code>. Этот каталог
        будет использоваться подавляющим большинством пользователей.</p>
        <p>Стандартное расположение конфигурационного каталога можно
        изменить, либо добавить другие конфигурационные каталоги для отдельных индексов
        с помощью переменной окружения <code class="envar">RECOLL_CONFDIR</code>
        или параметра  <code class="option">-c</code>
        команды <span class=
        "command"><strong>recoll</strong></span> и <span class=
        "command"><strong>recollindex</strong></span>.</p>
        <p>В дополнение (для <span class=
        "application">Recoll</span> версии 1.19.7), можно
        указать два дополнительных конфигурационных каталога, которые
        будут заданы до и после пользовательского конфигурационного каталога.
        Они устанавливаются с помощью переменных окружения <code class=
        "envar">RECOLL_CONFTOP</code> и <code class=
        "envar">RECOLL_CONFMID</code>. Значения конфигурационных файлов
        в каталоге верхнего уровня будут переопределять
        значения пользовательских файлов, значения конфигурационных файлов в
        каталоге среднего уровня будут переопределять общесистемные значения и
        переопределяться пользовательскими. Обе эти переменные могут использоваться
        в приложениях, дополняющих функционал <span class=
        "application">Recoll</span>, когда необходимо добавить данные
        конфигурации без внесения изменений в пользовательские файлы.
        Обратите внимание, в будущем эти два одиночных значения,
        по всей вероятности, будут представлены списком значений,
        разделённых двоеточиями — поэтому не стоит использовать символы двоеточий в
        путях каталогов.</p>
        <p>Если при запуске <span class="command"><strong>recoll</strong></span>
        или <span class=
        "command"><strong>recollindex</strong></span> конфигурационный каталог по умолчанию отсутствует,
        он создаётся в виде набора пустых конфигурационных файлов.
        Перед запуском индексирования <span class="command"><strong>recoll</strong></span>
        предложит внести изменения в конфигурационный файл,
        после чего сразу же запускается <span class=
        "command"><strong>recollindex</strong></span>. Во избежание
        путаницы, автоматическое создание каталогов выполняется только
        для расположения по умолчанию без использования параметра
        <code class="option">-c</code> или <code class=
        "envar">RECOLL_CONFDIR</code> (при использовании этих параметров
        каталог будет необходимо создать самостоятельно).</p>
        <p>Все файлы конфигурации имеют один формат. Например,
        короткая выдержка из главного конфигурационного файла
        может выглядеть следующим образом:</p>
        <pre class="programlisting">
        # Space-separated list of files and directories to index.
        topdirs =  ~/docs /usr/share/doc

        [~/somedirectory-with-utf8-txt-files]
        defaultcharset = utf-8
      </pre>
        <p>Существует три вида строк:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p>Комментарий (начинается с <span class=
              "emphasis"><em>#</em></span>) или пустая строка.</p>
            </li>
            <li class="listitem">
              <p>Присвоение значения параметру (<span class=
              "emphasis"><em>имя = значение</em></span>).</p>
            </li>
            <li class="listitem">
              <p>Определение раздела ([<span class=
              "emphasis"><em>некое_имя_раздела</em></span>]).</p>
            </li>
          </ul>
        </div>
        <p>Длинные строки могут иметь разрывы в виде завершения каждой
        неполной части строки обратной косой чертой (<code class="literal">\</code>).</p>
        <p>В зависимости от типа конфигурационного файла определения
        разделов либо делят параметры на группы, либо позволяют
        переопределить параметры для поддерева каталога. Они
        действуют либо до определения следующего раздела, либо до завершения
        файла. Некоторые параметры, применяемые для индексирования,
        просматриваются иерархически с места расположения текущего каталога вверх. Не каждый
        параметр имеет смысл переопределять, и в следующем разделе эта возможность последовательно
        расписывается для каждого параметра.</p>
        <div class="important" style=
        "margin-left: 0.5in; margin-right: 0.5in;">
          <h3 class="title">Важно</h3>
          <p>Глобальные параметры <span class="emphasis"><em>не
          должны</em></span> определяться в подразделе каталога,
          в противном случае <span class=
          "application">Recoll</span> не сможет их обнаружить, так как он
          ищет их на верхнем уровне (например, <code class=
          "literal">skippedPaths</code>).</p>
        </div>
        <p>Если в начале пути файла находится символ тильды
        (~), то он расширяется до имени домашнего каталога пользователя,
        так же как это происходит в командной оболочке.</p>
        <p>Некоторые параметры представляют собой список строк с пробелом
        в качестве разделителя. Список элементов с вложенными
        пробелами может заключаться в двойные кавычки. Двойные кавычки внутри
        таких элементов можно экранировать с помощью символа обратной косой черты.</p>
        <p>Значения внутри конфигурационного файла не могут содержать символ
        перевода строки. Длинные строки можно продлить путём экранирования
        физического перевода строки символом обратной косой черты даже внутри
        строк, заключённых в кавычки.</p>
        <pre class="programlisting">
        astringlist =  "некая строка \
        с пробелами"
        thesame = "некая строка с пробелами"        
      </pre>
        <p>Параметры, не являющиеся частью списка строк, не могут
        заключаться в кавычки, а ведущие и завершающие пробелы удаляются
        до использования значения переменной.</p>
        <div class="important" style=
        "margin-left: 0.5in; margin-right: 0.5in;">
          <h3 class="title">Важно</h3>
          <p>Кавычки обрабатываются ТОЛЬКО применительно к значениям параметров,
          которые являются списками. Заключение в двойные кавычки единичных значений, например,
          <code class="literal">dbdir</code>, приведёт к неверному значению
          переменной. Вероятно, всему виной изначально некорректная реализация программы,
          но исправлять эту ошибку сейчас уже слишком поздно.</p>
        </div>
        <p><b>Проблемы кодировки.&nbsp;</b>Большая часть параметров
        конфигурации состоит из обычного ASCII-текста. Проблемы с кодировками
        могут вызвать лишь два конкретных набора значений:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist" style="list-style-type: disc;">
            <li class="listitem">
              <p>Параметры пути файла могут содержать не-ascii
              символы и должны использовать точно такой же набор байтов,
              который используется в каталоге файловой системы. Обычно это
              означает, что файл конфигурации должен использовать
              кодировку системной локали по умолчанию.</p>
            </li>
            <li class="listitem">
              <p>Параметр <code class="envar">unac_except_trans</code>
              должен иметь кодировку UTF-8. Если же локаль конкретной системы 
              не использует UTF-8, и при этом необходимо указывать не-ascii пути
              файлов, то это создаёт определённые сложности, поскольку общепринятые
              текстовые редакторы не поддерживают наличие нескольких кодировок
              в одном файле. В таком сравнительно маловероятном случае конфигурационный
              файл можно составить из двух отдельных текстовых файлов с соответствующими
              кодировками для последующего объединения их в единый конфигурационный файл.</p>
            </li>
          </ul>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.CONFIG.ENVIR" id=
                "RCL.INSTALL.CONFIG.ENVIR"></a>5.4.1.&nbsp;Переменные
                окружения</h3>
              </div>
            </div>
          </div>
          <div class="variablelist">
            <dl class="variablelist">
              <dt><span class="term"><code class=
              "varname">RECOLL_CONFDIR</code></span></dt>
              <dd>
                <p>Определяет главный конфигурационный каталог.</p>
              </dd>
              <dt><span class="term"><code class=
              "varname">RECOLL_TMPDIR, TMPDIR</code></span></dt>
              <dd>
                <p>Места расположения временных файлов в порядке
                приоритета. Если ни одна из этих переменных не задана,
                каталог временных файлов по умолчанию будет располагаться
                в <code class="filename">/tmp</code>. Большие временные
                фалйы могут быть созданы в процессе индексирования, главным
                образом, для распаковки архивов, а также для обработки,
                например, вложенных файлов эл. почты.</p>
              </dd>
              <dt><span class="term"><code class=
              "varname">RECOLL_CONFTOP,
              RECOLL_CONFMID</code></span></dt>
              <dd>
                <p>Разршить добавление конфигурационных каталогов с
                приоритетом ниже и выше каталога пользователя (см.
                более подробную информацию выше в разделе «Обзор
                настройки конфигурации»).</p>
              </dd>
              <dt><span class="term"><code class=
              "varname">RECOLL_EXTRA_DBS,
              RECOLL_ACTIVE_EXTRA_DBS</code></span></dt>
              <dd>
                <p>Вспомогательные переменные для установки внешних индексов.
                См. подробные разъяснения в 
                <a class="link" href="#RCL.SEARCH.GUI.MULTIDB"
                title="3.2.11.&nbsp;Multiple indexes">соответствующем
                параграфе</a>.</p>
              </dd>
              <dt><span class="term"><code class=
              "varname">RECOLL_DATADIR</code></span></dt>
              <dd>
                <p>Определяет альтернативное место расположения
                файлов данных Recoll по умолчанию (обычно помещаются в
                <code class=
                "filename">/usr/share/recoll</code>).</p>
              </dd>
              <dt><span class="term"><code class=
              "varname">RECOLL_FILTERSDIR</code></span></dt>
              <dd>
                <p>Определяет альтернативное место расположения фильтров
                Recoll по умолчанию (обычно помещаются в
                <code class=
                "filename">/usr/share/recoll/filters</code>).</p>
              </dd>
              <dt><span class="term"><code class=
              "varname">ASPELL_PROG</code></span></dt>
              <dd>
                <p>Программа для создания орфографического словаря <span class=
                "command"><strong>aspell</strong></span>. Результат
                должен быть совместим с библиотекой <code class=
                "filename">libaspell</code>, которая используется в <span class=
                "application">Recoll</span>.</p>
              </dd>
            </dl>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF"></a>5.4.2.&nbsp;Главный
                конфигурационный файл Recoll — recoll.conf</h3>
              </div>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.WHATDOCS" id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.WHATDOCS"></a>Параметры,
                  формирующие состав индексируемых документов</h4>
                </div>
              </div>
            </div>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><a name="RCL.INSTALL.CONFIG.RECOLLCONF.TOPDIRS"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TOPDIRS"></a><span class="term"><code class="varname">topdirs</code></span></dt>
                <dd>
                  <p>Список разделённых пробелами файлов или каталогов,
                  подлежащих рекурсивному индексированию. Значение по умолчанию ~ (индексирование
                  каталога $HOME). В списке можно использовать символические ссылки,
                  переход по которым выполняется независимо от значения
                  переменной followLinks.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MONITORDIRS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MONITORDIRS"></a><span class="term"><code class="varname">monitordirs</code></span></dt>
                <dd>
                  <p>Список разделённых пробелами файлов или каталогов,
                  подлежащих отслеживанию для обновления. При запуске
                  индексатора в режиме реального времени позволяет отслеживать
                  только поднабор индексируемой области. Элементы необходимо
                  включать в дерево, определённое каталогами, заданными в «topdirs».</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SKIPPEDNAMES" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SKIPPEDNAMES"></a><span class="term"><code class="varname">skippedNames</code></span></dt>
                <dd>
                  <p>Файлы и каталоги, которые будут проигнорированы.
                  Разделённый пробелами список шаблонов с символами
                  подстановки (простые шаблоны без путей, не должны
                  содержать символов «/»), которые будут проверяться
                  по именам файлов и каталогов.</p>
                  <p>Взгляните на конфигурацию по умолчанию для
                  исходного значения, так как в данной ситуации
                  некоторые элементы могут не подойти. Проще всего
                  это проверяется на вкладке «Локальные параметры» 
                  диалога настройки индекса.</p>
                  <p>Согласно конфигурации по умолчанию данный список не включает
                  скрытые каталоги (имена, начинающиеся на точку),
                  в связи с чем возможна индексация значительного
                  числа нежелательных элементов.
                  С другой стороны, такие почтовые клиенты, как Thunderbird,
                  обычно хранят сообщения в скрытых каталогах, которые в большинстве случаев
                  нуждаются в индексации. Одним из возможных решений
                  этой проблемы может быть включение «.*» в «skippedNames»,
                  а таких каталогов как «~/.thunderbird» и «~/.evolution» в «topdirs».</p>
                  <p>Имена файлов по шаблонам в списке не индексируются,
                  см. переменную «noContentSuffixes» для
                  изучения альтернативного подхода по индексированию
                  имён файлов. Можно переопределить для любого поддерева.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SKIPPEDNAMES-" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SKIPPEDNAMES-"></a><span class="term"><code class="varname">skippedNames-</code></span></dt>
                <dd>
                  <p>Список завершений имён для удаления из списка skippedNames по умолчанию.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SKIPPEDNAMES+" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SKIPPEDNAMES+"></a><span class="term"><code class="varname">skippedNames+</code></span></dt>
                <dd>
                  <p>Список завершений имён для добавления в список skippedNames по умолчанию.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ONLYNAMES" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ONLYNAMES"></a><span class="term"><code class="varname">onlyNames</code></span></dt>
                <dd>
                  <p>Обычные шаблоны фильтра по именам файлов. Если заданы,
                  то индексируются только имена файлов, которые отсутствуют в skippedNames и
                  совпадают с одним из шаблонов. Можно переопределить для поддерева.
                  Не применяется к каталогам.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOCONTENTSUFFIXES"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOCONTENTSUFFIXES"></a><span class="term"><code class="varname">noContentSuffixes</code></span></dt>
                <dd>
                  <p>Список завершений файлов (необязательно
                  в виде отделяемых точками расширений), для которых не проводится
                  идентификация MIME-типа, а также не сжимается и
                  не индексируется содержимое. Индексируются только имена.
                  Это дополняет теперь уже устаревший список recoll_noindex
                  из файла mimemap, который в будущем
                  релизе будет окончательно ликвидирован (перемещение из mimemap в
                  recoll.conf позволяет редактировать список в графическом
                  интерфейсе). Отличается от skippedNames тем, что
                  здесь сопоставляются только завершения имени (не шаблоны
                  символов подстановки), а само имя файла индексируется обычным способом.
                  Можно переопределить для подкаталогов.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOCONTENTSUFFIXES-"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOCONTENTSUFFIXES-"></a><span class="term"><code class="varname">noContentSuffixes-</code></span></dt>
                <dd>
                  <p>Список завершений имён для удаления из
                  списка noContentSuffixes по умолчанию.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOCONTENTSUFFIXES+"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOCONTENTSUFFIXES+"></a><span class="term"><code class="varname">noContentSuffixes+</code></span></dt>
                <dd>
                  <p>Список завершений имён для добавления в
                  список noContentSuffixes по умолчанию.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SKIPPEDPATHS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SKIPPEDPATHS"></a><span class="term"><code class="varname">skippedPaths</code></span></dt>
                <dd>
                  <p>Абсолютные пути, не подлежащие индексации.
                  Разделённый пробелами список выражений с символами подстановки
                  для абсолютных путей файловой системы (файлов и
                  каталогов). Эта переменная должна быть определена на
                  верхнем уровне конфигурационного файла, а не в подразделе.</p>
                  <p>Любое значение в списке должно быть точно
                  согласовано со значениями в topdirs, разрешение символических
                  ссылок не производится. На практике, если /home является
                  ссылкой на /usr/home, что бывает нередко, значение по умолчанию в topdirs
                  будет содержать единственную запись «~», которая
                  преобразуется в «/home/ваш_логин». В таком случае любой
                  элемент skippedPaths должен начинаться с «/home/ваш_логин»,
                  а *не* с «/usr/home/ваш_логин».</p>
                  <p>Каталоги индекса и конфигурации добавляются
                  к списку автоматически.</p>
                  <p>Выражения сравниваются с помощью «fnmatch(3)»
                  с заданным по умолчанию флагом FNM_PATHNAME,
                  предполагающим точное совпадение символов «/».
                  При установке значения 0 для «skippedPathsFnmPathname»
                  использование FNM_PATHNAME отключается («/*/dir3»
                  при этом будет совпадать с «/dir1/dir2/dir3»).</p>
                  <p>Значение по умолчанию содержит стандартную точку
                  монтирования съёмных носителей, как напоминание
                  пользователю о том, что в большинстве случаев работа
                  с ними в Recoll не предвещает ничего хорошего.
                  Переопределить это поведение можно непосредственной вставкой
                  «/media/xxx» в переменную «topdirs».</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SKIPPEDPATHSFNMPATHNAME"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SKIPPEDPATHSFNMPATHNAME">
                </a><span class="term"><code class=
                "varname">skippedPathsFnmPathname</code></span></dt>
                <dd>
                  <p>Установить значение 0, чтобы не использовать флаг FNM_PATHNAME при
                  проверке совпадения игнорируемых путей.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOWALKFN" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOWALKFN"></a><span class="term"><code class="varname">nowalkfn</code></span></dt>
                <dd>
                  <p>Имя файла, при наличии которого отключается индексация
                  каталога. Любой каталог, содержащий файл с указанным именем
                  будет пропущен, как если бы он являлся частью списка skippedPaths. Пример:
                  .recoll-noindex</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.DAEMSKIPPEDPATHS"
                id="RCL.INSTALL.CONFIG.RECOLLCONF.DAEMSKIPPEDPATHS">
                </a><span class="term"><code class=
                "varname">daemSkippedPaths</code></span></dt>
                <dd>
                  <p>Аналог skippedPaths, предназначенный для индексирования
                  в режиме реального времени. Активирует части дерева,
                  которые изначально индексировались, но не отслеживались. Если
                  daemSkippedPaths не задан, то данная служба будет использовать skippedPaths.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ZIPUSESKIPPEDNAMES"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ZIPUSESKIPPEDNAMES"></a><span class="term"><code class="varname">zipUseSkippedNames</code></span></dt>
                <dd>
                  <p>Использование skippedNames внутри Zip-архивов. Используется
                  непосредственно обработчиком rclzip.py. Игнорирует элементы в Zip-архивах по
                  шаблонам, заданным в skippedNames. Можно переопределить для подкаталогов.
                  См.
                  https://www.recoll.org/faqsandhowtos/FilteringOutZipArchiveMembers.html</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ZIPSKIPPEDNAMES" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ZIPSKIPPEDNAMES"></a><span class="term"><code class="varname">zipSkippedNames</code></span></dt>
                <dd>
                  <p>Разделённый пробелами список выражений
                  с символами подстановки для имён, которые не должны
                  индексироваться внутри zip-архивов. Используется
                  непосредственно обработчиком zip. Если zipUseSkippedNames
                  не задан, то игнорируемые шаблоны внутри архивов определяются по
                  zipSkippedNames. Если же zipUseSkippedNames определён, то
                  два списка объединяются и используются вместе. Можно
                  переопределить для подкаталогов. См.
                  https://www.recoll.org/faqsandhowtos/FilteringOutZipArchiveMembers.html</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.FOLLOWLINKS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.FOLLOWLINKS"></a><span class="term"><code class="varname">followLinks</code></span></dt>
                <dd>
                  <p>Переход по символической ссылке в процессе
                  индексирования. По умолчанию символические ссылки
                  игнорируются во избежание многократного индексирования
                  связанных файлов. При установке параметра в значение true
                  не предпринимается никаких попыток избежать дублирования.
                  Данный параметр можно установить индивидуально для каждого
                  элемента «topdirs» при использовании разделов.
                  Ниже уровня «topdirs» применение невозможно. Переход по ссылкам
                  в самом списке «topdirs» выполняется всегда.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.INDEXEDMIMETYPES"
                id="RCL.INSTALL.CONFIG.RECOLLCONF.INDEXEDMIMETYPES">
                </a><span class="term"><code class=
                "varname">indexedmimetypes</code></span></dt>
                <dd>
                  <p>Ограничительный список индексируемых mime-типов.
                  Обычно не задан (в этом случае все поддерживаемые
                  типы индексируются). Если же параметр задан, то индексируется
                  содержание только тех mime-типов, которые включены в список.
                  При установке параметра indexallfilenames (задан по умолчанию)
                  имена файлов индексируются в любом случае. Имена MIME-типов
                  необходимо брать из файла mimemap (значения в некоторых
                  случаях могут отличаться от xdg-mime или вывода «file -i»).
                  Можно переопределять для поддеревьев.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.EXCLUDEDMIMETYPES"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.EXCLUDEDMIMETYPES"></a><span class="term"><code class="varname">excludedmimetypes</code></span></dt>
                <dd>
                  <p>Список исключаемых MIME-типов. Позволяет
                  не включать некоторые типы в индекс. Имена
                  MIME-типов необходимо брать из файла mimemap
                  (значения в некоторых случаях могут отличаться
                  от xdg-mime или вывода «file -i»). Можно
                  переопределять для поддеревьев.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOMD5TYPES" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOMD5TYPES"></a><span class="term"><code class="varname">nomd5types</code></span></dt>
                <dd>
                  <p>Не вычислять md5 для указанных типов. Контрольные
                  суммы md5 используются только для результатов
                  дедупликации, могут быть очень затратными для
                  вычисления мультимедиа и других больших файлов.
                  Данный список позволяет отключать вычисление md5
                  для указанных типов. Параметр глобальный
                  (отсутствуют переопределения для поддеревьев).
                  В настоящий момент оказывает влияние только на внешние
                  обработчики (exec и execm). Типы файлов могут
                  быть указаны либо в виде списка MIME-типов
                  (например, audio/mpeg), либо в виде имён обработчиков
                  (например, rclaudio.py).</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.COMPRESSEDFILEMAXKBS"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.COMPRESSEDFILEMAXKBS">
                </a><span class="term"><code class=
                "varname">compressedfilemaxkbs</code></span></dt>
                <dd>
                  <p>Ограничение размера сжатых файлов. Эти
                  файлы распаковываются во временный каталог
                  для идентификации, что в некоторых случаях может быть
                  затратно. Поэтому, данные затраты необходимо ограничить.
                  Отрицательное значение означает отсутствие ограничений.
                  0 отключает обработку любых сжатых файлов.
                  Значение по умолчанию 100 МБ.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TEXTFILEMAXMBS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TEXTFILEMAXMBS"></a><span class="term"><code class="varname">textfilemaxmbs</code></span></dt>
                <dd>
                  <p>Ограничение размера текстовых файлов. Главным
                  образом, позволяет игнорировать огромные журналы. Значение
                  по умолчанию 20 МБ. При значении -1 ограничение
                  отключается.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TEXTUNKNOWNASPLAIN"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TEXTUNKNOWNASPLAIN"></a><span class="term"><code class="varname">textunknownasplain</code></span></dt>
                <dd>
                  <p>Обработка неизвестных фалов text/xxx
                  как text/plain. Позволяет индексировать
                  различные текстовые файлы, которые идентифицируются
                  с помощью команды «file» или «xdg-mime» как text/???
                  без необходимости строгого указания параметров
                  конфигурации для каждого из них. Это прекрасно
                  работает при индексировании (хоть и может привести
                  к обработке огромного количества мусора), но
                  индексированные таким образом документы будут
                  открываться с помощью просмотрщика рабочего
                  стола, даже если для просмотра файлов типа text/plain
                  задан особый редактор.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.INDEXALLFILENAMES"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.INDEXALLFILENAMES"></a><span class="term"><code class="varname">indexallfilenames</code></span></dt>
                <dd>
                  <p>Индексирование имён необработанных файлов.
                  Обеспечивает индексацию имён файлов, содержимое которых не
                  индексируется, поскольку они принадлежат к неподдерживаемому
                  или исключённому MIME-типу</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.USESYSTEMFILECOMMAND"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.USESYSTEMFILECOMMAND">
                </a><span class="term"><code class=
                "varname">usesystemfilecommand</code></span></dt>
                <dd>
                  <p>Использование системного механизма в качестве
                  крайнего средства для определния MIME-типа.
                  В зависимости от платформы и версии, вопрос о том,
                  будет ли программа запускать соответствующую команду или использовать libmagic,
                  решается на этапе компиляции. Действие, как правило,
                  не бесполезное, но часто приводит к индексированию
                  массы бесполезных текстовых файлов без расширения.
                  См. «systemfilecommand» для определения
                  используемой команды.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SYSTEMFILECOMMAND"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SYSTEMFILECOMMAND"></a><span class="term"><code class="varname">systemfilecommand</code></span></dt>
                <dd>
                  <p>Команда, применяемая для определения MIME-типа,
                  когда внутренними методами определить его не удалось.
                  Данный параметр игнорируется в Windows или Recoll 1.38+,
                  если при компилировании использовался параметр
                  --enable-libmagic (по умолчанию). В противном случае,
                  в качестве команды будет использоваться аналог «file -i». Путь к определяемому файлу
                  будет добавлен в качестве последнего параметра командной
                  строки. «xdg-mime» работает лучше, чем традиционная команда
                  «file», и в данный момент используется в конфигурации по умолчанию
                  (параллельно с использующимся в коде резервным вариантом в виде команды «file»)</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PROCESSWEBQUEUE" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PROCESSWEBQUEUE"></a><span class="term"><code class="varname">processwebqueue</code></span></dt>
                <dd>
                  <p>Определяет необходимость обработки очереди веб-страниц. Очередь
                  представляет собой каталог, в котором модули
                  веб-браузера Recoll создают копии посещённых страниц.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TEXTFILEPAGEKBS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TEXTFILEPAGEKBS"></a><span class="term"><code class="varname">textfilepagekbs</code></span></dt>
                <dd>
                  <p>Размер страницы для текстовых файлов. При
                  установке данного параметра файлы типа text/plain
                  будут разделены на документы, примерно равные
                  заданному размеру. Это позволит уменьшить использование
                  памяти в процессе индексирования, а также поможет
                  загрузить данные в окно просмотра при выполнении
                  запроса. Особенно полезно с очень большими файлами,
                  такими как приложения или системные журналы. См. также
                  textfilemaxmbs и compressedfilemaxkbs.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MEMBERMAXKBS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MEMBERMAXKBS"></a><span class="term"><code class="varname">membermaxkbs</code></span></dt>
                <dd>
                  <p>Ограничение размера для элементов архива. Параметр
                  передаётся в окружение для фильтров в виде параметра
                  RECOLL_FILTER_MAXMEMBERKB.</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.TERMS" id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.TERMS"></a>Параметры,
                  оказывающие влияние на формирование элементов запроса и организацию
                  индекса</h4>
                </div>
              </div>
            </div>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.INDEXSTRIPCHARS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.INDEXSTRIPCHARS"></a><span class="term"><code class="varname">indexStripChars</code></span></dt>
                <dd>
                  <p>Определяет необходимость учёта в индексе регистра и диакритических знаков.
                  При необходимости учёта поиск может быть выполнен
                  с учётом регистра и диакритики, но в этом случае
                  индекс получает большие размеры и возникает склонность к появлению
                  некоторых странностей в результатах поиска.
                  По умолчанию используется урезанный индекс. При использовании
                  для поиска нескольких индексов данный параметр применяется
                  одинаково ко всем. Изменение значения подразумевает сброс индекса.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.INDEXSTOREDOCTEXT"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.INDEXSTOREDOCTEXT"></a><span class="term"><code class="varname">indexStoreDocText</code></span></dt>
                <dd>
                  <p>Определяет необходимость сохранения содержимого
                  текста в индексе. Хранение текста позволяет извлекать
                  из него фрагменты во время запроса вместо
                  построения их на основе позиционирования данных в индексе.</p>
                  <p>Применение списка позиционирования в новых
                  форматах индекса Xapian в ряде случаев
                  выполняется непростительно медленно. Chert является
                  последним форматом индекса Xapian, который показывает неплохую
                  производительность при использовании этого устаревшего метода.
                  Он применяется по умолчанию в версии 1.2, продолжает,
                  хоть и не по умолчанию, поддерживаться в версии 1.4
                  и прекращает поддерживаться в версии 1.6.</p>
                  <p>Сохраняемый текст документа преобразуется
                  из исходного формата в простой текст UTF-8, но
                  сохраняет верхний регистр, диакритику
                  и знаки пунктуации. Хранение текста обычно увеличивает
                  размер индекса на 10-20%, но фрагменты при этом
                  становятся более красивыми. Поэтому включение данного
                  параметра, даже при отсутствии проблем с производительностью,
                  может иметь смысл только при наличии необходимого
                  количества дискового пространства.</p>
                  <p>Переменная оказывает влияние только при создании
                  индекса, и каталог xapiandb при этом ещё не должен существовать.
                  Однако фактическое влияние переменной зависит от версии Xapian.</p>
                  <p>Так, использование Xapian 1.4 при значении переменной 0 ранее обычно
                  означало применение формата Chert без сохранения текста. При значении 1
                  использовался формат Glass с сохранением текста. Сейчас всё происходит иначе:
                  сохранение текста было признано более предпочтительным вариантом,
                  но отключение этой возможности упрощает код.</p>
                  <p>Поэтому в настоящее время формат для нового индекса всегда
                  задаётся по умолчанию, однако переменная всё ещё контролирует
                  необходимость сохранения текста, а также метод формирования краткого описания.
                  С Xapian 1.4 и более поздними версиями, а также при присвоении
                  переменной значения 0, формирование краткого описания может выполняться
                  очень медленно, но такая конфигурация все ещё может быть полезна
                  для сохранения дискового пространства, если вообще не использовать
                  формирование краткого описания при соответствующей настройке графического
                  интерфейса и/или без использования параметров Python API или
                  recollq, которые обычно приводят к её запуску.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NONUMBERS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NONUMBERS"></a><span class="term"><code class="varname">nonumbers</code></span></dt>
                <dd>
                  <p>Определяет необходимость формирования элементов поиска
                  для чисел. Например, «123», «1.5e6», 192.168.1.4,
                  не будут индексироваться, если задан параметр nonumbers
                  (однако индексирование будет выполняться для слов в виде «value123»). Числа часто
                  могут представлять интерес для поиска и вряд ли есть
                  смысл отключать их индексацию, за исключением особых ситуаций,
                  например, научных документов с большим количеством чисел,
                  в которых установка параметра nonumbers позволяет уменьшить размер индекса.
                  Может быть задан только для целого индекса, но не для его поддерева.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOTERMPOSITIONS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOTERMPOSITIONS"></a><span class="term"><code class="varname">notermpositions</code></span></dt>
                <dd>
                  <p>Позволяет не сохранять позицию элемента поиска. Позиции
                  элемента поиска позволяют выполнять поиск по фразам и близости,
                  но значительно увеличивают размер индекса. В некоторых особых
                  ситуациях может возникнуть необходимость обходиться без них.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.DEHYPHENATE" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.DEHYPHENATE"></a><span class="term"><code class="varname">dehyphenate</code></span></dt>
                <dd>
                  <p>Определяет будет ли индексироваться вариант «coworker»
                  при вводе «co-worker». Параметр появился в версии 1.22
                  и включен по умолчанию. Отключение переменной
                  позволяет восстановить предыдущее поведение.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.BACKSLASHASLETTER"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.BACKSLASHASLETTER"></a><span class="term"><code class="varname">backslashasletter</code></span></dt>
                <dd>
                  <p>Позволяет обрабатывать обратную косую черту как обычный символ.
                  Может иметь смысл для тех, кто хочет индексировать
                  команды TeX в их обычном виде, но в целом имеет мало применений
                  для практического использования.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.UNDERSCOREASLETTER"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.UNDERSCOREASLETTER"></a><span class="term"><code class="varname">underscoreasletter</code></span></dt>
                <dd>
                  <p>Позволяет обрабатывать символ подчёркивания как обычную букву. Это
                  настройка используется так часто, что невольно возникает
                  мысль включить её по умолчанию.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MAXTERMLENGTH" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MAXTERMLENGTH"></a><span class="term"><code class="varname">maxtermlength</code></span></dt>
                <dd>
                  <p>Максимальная длина элемента поиска в байтах.
                  Слова длиннее этого размера будут отклонены. По умолчанию
                  длина равна 40 и изначально жёстко задавалась
                  в коде программы, но теперь её можно настраивать.
                  При изменении значения может потребоваться сброс индекса.</p>
                </dd>
                <dt><a name="RCL.INSTALL.CONFIG.RECOLLCONF.NOCJK"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOCJK"></a><span class="term"><code class="varname">nocjk</code></span></dt>
                <dd>
                  <p>Определяет необходимость отключить отделение друг от друга особых
                  восточноазиатских (китайских, корейских, японских) символов/слов.
                  Это позволит лишь немного ослабить загруженность ЦП при
                  отсутствии документов CJK. Если же такие тексты присутствуют
                  в базе документов, но нет необходимости в организации
                  по ним поиска, то включение параметра nocjk приведёт
                  к заметной экономии времени и дискового пространства.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.CJKNGRAMLEN" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.CJKNGRAMLEN"></a><span class="term"><code class="varname">cjkngramlen</code></span></dt>
                <dd>
                  <p>Этот параметр позволяет настроить размер n-грамм,
                  используемых для индексирования текста CJK. Значение
                  по умолчанию 2 в большинстве случаев будет вполне разумно.
                  Значение 3 обеспечит большую точность и эффективность
                  в случае длинных слов, но приведёт к увеличению индекса
                  примерно в два раза.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.HANGULTAGGER" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.HANGULTAGGER"></a><span class="term"><code class="varname">hangultagger</code></span></dt>
                <dd>
                  <p>Внешний токенизатор для корейского хангыля.
                  Позволяет использовать специальный процессор для
                  корейского языка при извлечении элементов поиска
                  из корейского текста вместо обычного генератора
                  слов на основе n-грамм. См. более подробное описание
                  на https://www.recoll.org/pages/recoll-korean.html.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.CHINESETAGGER" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.CHINESETAGGER"></a><span class="term"><code class="varname">chinesetagger</code></span></dt>
                <dd>
                  <p>Внешний токенизатор для китайского языка.
                  Позволяет использовать специальный токенизатор Jieba
                  для извлечении осмысленных элементов поиска
                  из китайского текста вместо обычного генератора
                  слов на основе n-грамм. См. более подробное описание
                  на https://www.recoll.org/pages/recoll-chinese.html.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.INDEXSTEMMINGLANGUAGES"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.INDEXSTEMMINGLANGUAGES">
                </a><span class="term"><code class=
                "varname">indexstemminglanguages</code></span></dt>
                <dd>
                  <p>Языки, для которых создаются данные расширений
                  по словоформам. Имена языков с расширениями по словоформам
                  можно найти при запуске «recollindex -l», а также можно
                  задать их в виде списка в графическом интерфейсе. В качестве
                  значений используются полные наименования языков,
                  например, english, french…</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.DEFAULTCHARSET" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.DEFAULTCHARSET"></a><span class="term"><code class="varname">defaultcharset</code></span></dt>
                <dd>
                  <p>Кодировка по умолчанию. Используется для файлов,
                  в которых не заданы сведения о кодировке (например:
                  text/plain). При обнаружении таких указаний внутри файлов,
                  например, тег «charset» в документах HTML, данный параметр
                  будет переопределён. Если параметр не задан, то
                  кодировка по умолчанию будет определяться окружением
                  NLS ($LC_ALL, $LC_CTYPE, $LANG), а в самом крайнем случае
                  получит значение iso-8859-1 (по факту cp-1252).
                  Если по какой-то причине по умолчанию необходимо
                  задать кодировку, которая не совпадает с текущим значением LANG
                  и 8859-1, то можно смело использовать этот параметр.
                  Может переопределяться для каждого подкаталога.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.UNAC_EXCEPT_TRANS"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.UNAC_EXCEPT_TRANS"></a><span class="term"><code class="varname">unac_except_trans</code></span></dt>
                <dd>
                  <p>Список символов в кодировке UTF-8, которые
                  требуют специальной обработки при преобразовании
                  текста в нижний регистр без диакритических знаков.
                  Например, в шведском языке буква с диарезисом используется
                  во всех случаях жизни и не должна превращаться в a.
                  Каждый элемент в разделённом пробелами списке
                  начинается со специального символа, за которым 
                  следует значение для его замены. Необходимо указать
                  варианты для обработки обеих версий символа как в нижнем,
                  так и в верхнем регистре, поскольку принадлежность
                  к списку отключает стандартную обработку диакритики
                  и регистра. Значение глобально и затрагивает как
                  индексирование, так и выполнение запроса. Также
                  устраняется путаница с несколькими символами Unicode
                  (кавычки, дефис) путём преобразования в их ASCII-аналоги
                  во избежание «неочевидных» сбоев поиска.</p>
                  <p>Примеры: шведский язык: unac_except_trans = ää Ää
                  öö Öö üü Üü ßss œoe Œoe æae Æae ﬀff ﬁfi ﬂfl åå Åå
                  ’' ❜' ʼ' ‐- . Немецкий язык: unac_except_trans = ää Ää
                  öö Öö üü Üü ßss œoe Œoe æae Æae ﬀff ﬁfi ﬂfl ’' ❜'
                  ʼ' ‐- . Французский язык: совершенно естественно
                  возникает желание разложить oe и ae и очень маловероятно
                  использование немецкой буквы ß unac_except_trans = ßss œoe Œoe æae Æae ﬀff ﬁfi
                  ﬂfl ’' ❜' ʼ' ‐- . Далее следуют значения по умолчанию для всех
                  языков пока не будут выявлены несоответствия. Указанные разложения
                  не выполняются в unac, но шансы, что кто-то будет вводить
                  сложные формы в поисковом запросе однозначно стремятся к нулю.
                  unac_except_trans = ßss œoe Œoe æae Æae ﬀff ﬁfi ﬂfl ’' ❜' ʼ' ‐-</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MAILDEFCHARSET" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MAILDEFCHARSET"></a><span class="term"><code class="varname">maildefcharset</code></span></dt>
                <dd>
                  <p>Переопределение кодировки по умолчанию для сообщений
                  эл.почты, в которых она не указана. Главным образом,
                  используется для дампов readpst (libpst) с кодировкой
                  utf-8, которая нигде не указана.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.LOCALFIELDS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.LOCALFIELDS"></a><span class="term"><code class="varname">localfields</code></span></dt>
                <dd>
                  <p>Установка полей для всех файлов (обычно в заданной
                  области файловой системы). Используется стандартный синтаксис: имя = значение ;
                  attr1 = val1 ; [...] означает пустое значение, поэтому
                  в начале должна стоять точка с запятой.
                  Может применяться, например, чтобы задать значение поля rclaptg
                  для выбора приложения в mimeview.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TESTMODIFUSEMTIME"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TESTMODIFUSEMTIME"></a><span class="term"><code class="varname">testmodifusemtime</code></span></dt>
                <dd>
                  <p>Позволяет использовать mtime вместо ctime при проверке
                  факта внесения изменений в файл. Время используется в
                  дополнение к стандартно используемому размеру.
                  Включение этого параметра может снизить нагрузку
                  от переиндексирования на системах, где используются
                  расширенные атрибуты (каким-то другим приложением),
                  но индексация их изменения может не выполняться,
                  так как изменение расширенных атрибутов влияет только на ctime.
                  Примечания: — В некоторых отдельных случаях это может
                  привести к неспособности обнаружения изменений
                  при переименовании файла (целевой файл при этом
                  должен сохранить размер и mtime). — Также может
                  потребоваться установить значение 1 для noxattrfields,
                  если индексация xattr не входит в число предпочтений
                  пользователя. Например, такая индексация может
                  использоваться локальным шаблоном обновления файла
                  (как обычно, существует риск обновления только расширенных
                  атрибутов, при котором изменения файла могут
                  остаться незамеченными). После изменения параметра
                  необходимо выполнить полное обновление индекса.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOXATTRFIELDS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOXATTRFIELDS"></a><span class="term"><code class="varname">noxattrfields</code></span></dt>
                <dd>
                  <p>Отключение преобразования расширенных атрибутов
                  в поля метаданных. Этот параметр может потребоваться
                  при установке параметра testmodifusemtime.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.METADATACMDS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.METADATACMDS"></a><span class="term"><code class="varname">metadatacmds</code></span></dt>
                <dd>
                  <p>Определение команд для сборки внешних метаданных,
                  например, тегов tmsu. Может включать несколько элементов,
                  разделённых точками с запятой, каждый из которых определяет
                  имя поля, в которое поступают данные, а также используемую
                  команду. Не забудьте про начальный символ точки с запятой. Все
                  имена полей должны отличаться. При необходимости
                  в файле «field» можно использовать псевдонимы. Для удобства
                  пользователей была сделана довольно-таки топорная доработка: любое
                  имя поля, начинающееся с «rclmulti», указывает на то,
                  что команда возвращает несколько значений полей внутри блока текста,
                  отформатированного как конфигурационный файл recoll
                  (со строками «имя_поля = значение_поля»). При этом само имя rclmultixx
                  будет проигнорировано, а имена и значения полей
                  будут извлекаться из его данных. Например:
                  metadatacmds = ; tags = tmsu tags %f; rclmulti1 =
                  cmdOutputsConf %f</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.STORE" id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.STORE"></a>Параметры,
                  влияющие на место и способ хранения данных</h4>
                </div>
              </div>
            </div>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.CACHEDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.CACHEDIR"></a><span class="term"><code class="varname">cachedir</code></span></dt>
                <dd>
                  <p>Каталог верхнего уровня данных Recoll. Каталоги
                  данных Recoll обычно размещаются относительно
                  конфигурационного каталога (например, ~/.recoll/xapiandb,
                  ~/.recoll/mboxcache). Если же установлен параметр «cachedir»,
                  то каталоги будут размещены ниже заданного значения
                  (например, если «cachedir» имеет значение «~/.cache/recoll»,
                  то «dbdir» по умолчанию будет иметь значение «~/.cache/recoll/xapiandb»).
                  Этот параметр оказывает влияние на dbdir, webcachedir, mboxcachedir,
                  aspellDicDir, которые могут заданы индивидуально, чтобы не зависеть
                  от cachedir. Важно отметить, что при наличии нескольких конфигураций
                  каждая из них должна иметь свой параметр «cachedir», так как подпути
                  «cachedir» автоматически не вычисляются.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MAXFSOCCUPPC" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MAXFSOCCUPPC"></a><span class="term"><code class="varname">maxfsoccuppc</code></span></dt>
                <dd>
                  <p>Максимальный объём файловой системы, который может
                  быть занят до прекращения индексирования. Значение
                  выражено в процентах, относительно которого отображается
                  вывод df в столбце «Объём». Значение по умолчанию 0,
                  при котором проверка не производится.</p>
                </dd>
                <dt><a name="RCL.INSTALL.CONFIG.RECOLLCONF.DBDIR"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.DBDIR"></a><span class="term"><code class="varname">dbdir</code></span></dt>
                <dd>
                  <p>Расположение каталога базы данных Xapian. Создаётся
                  при первом индексировании. Если в значении указан не абсолютный путь,
                  то при наличии значения у этого параметра предполагается путь
                  относительно «cachedir», либо относительно конфигурационного каталога (параметр -c или $RECOLL_CONFDIR).
                  Если значение не указано, то в качестве значения по умолчанию
                  используется ~/.recoll/xapiandb/</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXSTATUSFILE" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXSTATUSFILE"></a><span class="term"><code class="varname">idxstatusfile</code></span></dt>
                <dd>
                  <p>Имя временного файла, в котором процесс индексатора
                  обновляет свой статус. По умолчанию:
                  idxstatus.txt в конфигурационном каталоге.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MBOXCACHEDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MBOXCACHEDIR"></a><span class="term"><code class="varname">mboxcachedir</code></span></dt>
                <dd>
                  <p>Расположение каталога для хранения файлов
                  кеширования смещений у сообщений mbox. Обычно это «mboxcache»
                  в каталоге «cachedir» при наличии значения у этого параметра, либо
                  в конфигурационном каталоге. При этом удобнее использовать
                  единый каталог для различных конфигураций.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MBOXCACHEMINMBS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MBOXCACHEMINMBS"></a><span class="term"><code class="varname">mboxcacheminmbs</code></span></dt>
                <dd>
                  <p>Минимальный размер файла mbox выше которого
                  начинается кеширование смещений. Очевидно, нет
                  никакого смысла в кешировании маленьких файлов.
                  Значение по умолчанию 5 МБ.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MBOXMAXMSGMBS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MBOXMAXMSGMBS"></a><span class="term"><code class="varname">mboxmaxmsgmbs</code></span></dt>
                <dd>
                  <p>Максимальный размер сообщения внутри mbox в мегабайтах.
                  Размер, выше которого формат mbox будет считаться недопустимым
                  или неверно интерпретированным. Обработка файла при этом
                  прекращается.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.WEBCACHEDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.WEBCACHEDIR"></a><span class="term"><code class="varname">webcachedir</code></span></dt>
                <dd>
                  <p>Каталог для хранения архивных
                  веб-страниц. Используется только в
                  коде индексатора истории веб-поиска.
                  По умолчанию: cachedir/webcache, если
                  задано значение парметра «cachedir»,
                  в противном случае — $RECOLL_CONFDIR/webcache</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.WEBCACHEMAXMBS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.WEBCACHEMAXMBS"></a><span class="term"><code class="varname">webcachemaxmbs</code></span></dt>
                <dd>
                  <p>Максимальный размер веб-архива в МБ.
                  Используется только в коде индексатора истории веб-поиска.
                  По умолчанию: 40 МБ. Уменьшение размера не приведёт
                  к физической обрезке файла.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.WEBQUEUEDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.WEBQUEUEDIR"></a><span class="term"><code class="varname">webqueuedir</code></span></dt>
                <dd>
                  <p>Путь к очереди индексатора веб-поиска. Изначально
                  задавался в коде старого модуля как
                  ~/.recollweb/ToIndex, чем благополучно устранялась как необходимость,
                  так и возможности его изменения. Однако теперь модуль WebExtensions
                  загружает файлы в каталог пользователя «Загрузки»,
                  а затем сценарий перемещает их в webqueuedir.
                  Сценарий считывает данное значение из конфигурации,
                  в результате чего появилась возможность его изменения.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.WEBDOWNLOADSDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.WEBDOWNLOADSDIR"></a><span class="term"><code class="varname">webdownloadsdir</code></span></dt>
                <dd>
                  <p>Путь к каталогу загрузки браузера. Здесь
                  добавляемое расширение браузера должно создавать файлы.
                  Затем с помощью сценария они перемещаются в webqueuedir.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.WEBCACHEKEEPINTERVAL"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.WEBCACHEKEEPINTERVAL">
                </a><span class="term"><code class=
                "varname">webcachekeepinterval</code></span></dt>
                <dd>
                  <p>Интервал сохранения страницы. По умолчанию в кеше
                  хранится только один экземпляр страницы на URL-адрес. Это
                  можно изменить путём установки значения для определения
                  частоты сохранения нескольких экземпляров
                  («день», «неделя», «месяц», «год»). Здесь важно понять,
                  что при увеличении интервала существующие записи не удаляются.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ASPELLDICDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ASPELLDICDIR"></a><span class="term"><code class="varname">aspellDicDir</code></span></dt>
                <dd>
                  <p>Место расположения каталога для хранения словаря Aspell.
                  Словарь aspell (aspdict.(lang).rws) обычно
                  хранится в каталоге, указанном в «cachedir»
                  (если значение этого параметра задано), либо в конфигурационном каталоге.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.FILTERSDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.FILTERSDIR"></a><span class="term"><code class="varname">filtersdir</code></span></dt>
                <dd>
                  <p>Место расположения каталога для исполняемых файлов
                  обработчиков ввода. Если в окружении задана переменная RECOLL_FILTERSDIR,
                  то она будет использоваться вместо данного параметра.
                  Значение по умолчанию: $prefix/share/recoll/filters.
                  Может переопределяться для подкаталогов.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ICONSDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ICONSDIR"></a><span class="term"><code class="varname">iconsdir</code></span></dt>
                <dd>
                  <p>Место расположения каталога для значков. Единственная
                  причина для изменения значения этого параметра может
                  заключаться в изменении значков, которые отображаются в списке результатов.
                  Значение по умолчанию: $prefix/share/recoll/images</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.PERFS" id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.PERFS"></a>Параметры,
                  влияющие на производительность индексирования и использование
                  ресурсов</h4>
                </div>
              </div>
            </div>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXFLUSHMB" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXFLUSHMB"></a><span class="term"><code class="varname">idxflushmb</code></span></dt>
                <dd>
                  <p>Порог (в мегабайтах новых данных), при котором
                  данные из памяти сбрасываются в индекс диска. Установка этого
                  параметра позволяет осуществлять некоторый контроль
                  над использованием памяти процессом
                  индексатора. При значении 0 память не очищается,
                  что позволяет Xapian работать в штатном режиме,
                  при котором сброс памяти происходит через такое число
                  созданных, изменённых и удалённых документов,
                  которое задано в переменной $XAPIAN_FLUSH_THRESHOLD:
                  но поскольку использование памяти зависит не только от числа
                  документов, но и от их среднего размера, то подход Xapian
                  нельзя признать очень эффективным. Поэтому бразды управления
                  памятью лучше передать Recoll. В коде программы
                  задано значение 0. Конфигурация по умолчанию (в соответствующем
                  файле конфигурации) теперь имеет значение 50 МБ, что
                  должно подойти для большинства ситуаций. Можно снизить
                  его до 10 для экономии памяти, но для достижения
                  максимальной скорости придётся поэксперементировать
                  со значениями от 20 до 200. Согласно моему опыту,
                  значения за пределами указанных величин всегда контрпродуктивны.
                  Если у вас другие данные, дайте мне знать.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.FILTERMAXSECONDS"
                id="RCL.INSTALL.CONFIG.RECOLLCONF.FILTERMAXSECONDS">
                </a><span class="term"><code class=
                "varname">filtermaxseconds</code></span></dt>
                <dd>
                  <p>Максимальное время работы внешнего фильтра в
                  секундах. По умолчанию 1200 (20mn). Для снятия ограничений
                  задайте значение 0. Большей частью служит для предотвращения
                  бесконечных циклов в файлах postscript (loop.ps)</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.FILTERMAXMBYTES" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.FILTERMAXMBYTES"></a><span class="term"><code class="varname">filtermaxmbytes</code></span></dt>
                <dd>
                  <p>Максимальный объём виртуальной памяти для процессов
                  фильтрации (setrlimit(RLIMIT_AS)) в мегабайтах.
                  Важно понимать, что это включает любые разделяемые
                  библиотеки (в Linux не существует надёжного способа
                  установки ограничения только на объём данных), в связи с чем
                  здесь приходится проявлять несколько большую щедрость. На 32-разрядных
                  машинах будет игнорироваться всё, что превышает 2000. Большое значение
                  по умолчанию необходимо при использовании обработчиков на
                  базе java (pdftk), которые требуют значительного объёма
                  виртуальной памяти (в основном, текст), а в особенности
                  pdftk при запуске из сценария Python rclpdf.py. Если
                  не использовать Java, то значение может быть намного ниже.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.THRQSIZES" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.THRQSIZES"></a><span class="term"><code class="varname">thrQSizes</code></span></dt>
                <dd>
                  <p>Глубина очереди задач на каждом этапе и управление
                  конфигурацией потоковой модели. Существует три внутренних
                  очереди на этапах конвейера индексирования (извлечение
                  данных из файлов, формирование элементов поиска, обновление
                  индекса). Этот параметр определяет глубину очереди для каждого
                  этапа (три целочисленных значения). На практике глубокие
                  очереди не показали увеличения производительности. Первое
                  значение также использовалось для управления автоматической
                  конфигурацией потоковой модели или для отключения
                  многопоточности. Если в качестве глубины первой очереди
                  задать 0, то Recoll задаст глубину очередей и число потоков
                  согласно обнаруженному числу ЦП. Произвольно выбранные
                  значения указаны ниже (глубина, число потоков). 1 ЦП
                  -&gt; без многопоточности. Менее 4 ЦП: (2, 2) (2,
                  2) (2, 1). Менее 6: (2, 4), (2, 2), (2, 1).
                  Либо (2, 5), (2, 3), (2, 1). Если в качестве глубины
                  первой очереди указать -1, многопоточность полностью
                  отключается. Второе и третье значения игнорируются в обоих
                  указанных случаях.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.THRTCOUNTS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.THRTCOUNTS"></a><span class="term"><code class="varname">thrTCounts</code></span></dt>
                <dd>
                  <p>Число потоков, использующееся на каждом этапе
                  индексирования. Если первый элемент значения thrQSizes
                  не равен 0 или -1, то эти три величины определяют
                  число потоков, использующихся на каждлом этапе
                  (извлечение данных файлов, формирование элементов
                  поиска, обновление индекса). Для последнего этапа
                  нет смысла использовать значение, отличное от 1,
                  потому что обновление индекса Xapian должно быть
                  однопоточным (и защищается с помощью mutex).</p>
                </dd>
                <dt><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.THRTMPDBCNT" id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.THRTMPDBCNT"></a><span class="term"><code class="varname">thrTmpDbCnt</code></span></dt>
                  <dd>
                    <p>Число временных индексов, использующихся при
                    инкрементальном или полном индексировании. Если значение не равно нулю,
                    то оно определяет сколько временных индексов мы используем
                    в процессе индексирования. Эти временные индексы объединяются
                    в основной индекс в конце выполнения операции. Использование нескольких
                    индексов и заключительное объединение может значительно улучшить
                    производительность индексирования, когда обновление однопоточного
                    индекса Xapian становится узким местом. Эффективность зависит
                    от типа ввода и ЦП. См. более подробную информацию в руководстве.</p>
                  </dd>
              </dl>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.MISC" id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.MISC"></a>Прочие
                  параметры</h4>
                </div>
              </div>
            </div>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.LOGLEVEL" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.LOGLEVEL"></a><span class="term"><code class="varname">loglevel</code></span></dt>
                <dd>
                  <p>Уровень детализации файла журнала 1-6.
                  Значение 2 — выводятся только ошибки
                  и предупреждения, 3 — выводится информация, например,
                  по обновлению документов, 4 — высокий уровень
                  детализации и 6 — очень высокий уровень детализации.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.LOGFILENAME" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.LOGFILENAME"></a><span class="term"><code class="varname">logfilename</code></span></dt>
                <dd>
                  <p>Местонахождение файла журнала. Введите «stderr» (default)
                  для вывода в консоль.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXLOGLEVEL" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXLOGLEVEL"></a><span class="term"><code class="varname">idxloglevel</code></span></dt>
                <dd>
                  <p>Переопределение уровня журнала для индексатора.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXLOGFILENAME" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXLOGFILENAME"></a><span class="term"><code class="varname">idxlogfilename</code></span></dt>
                <dd>
                  <p>Переопределение имени файла журнала для индексатора.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.HELPERLOGFILENAME"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.HELPERLOGFILENAME"></a><span class="term"><code class="varname">helperlogfilename</code></span></dt>
                <dd>
                  <p>Файл для стандартного вывода ошибок от
                  внешних вспомогательных программ. Вывод ошибок
                  внешних программ по умолчанию не контролируется,
                  например, выводится в консоль при выполнении
                  программы recoll[index] из командной строки.
                  Для полного отключения вывода можно использовать
                  /dev/null или файл в несуществующем каталоге.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.DAEMLOGLEVEL" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.DAEMLOGLEVEL"></a><span class="term"><code class="varname">daemloglevel</code></span></dt>
                <dd>
                  <p>Переопределение уровня журнала для индексатора
                  в режиме реального времени. По умолчанию используются
                  значения idx…, если заданы, в противном случае —
                  значения log….</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.DAEMLOGFILENAME" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.DAEMLOGFILENAME"></a><span class="term"><code class="varname">daemlogfilename</code></span></dt>
                <dd>
                  <p>Переопределение имени файла журнала для индексатора
                  в режиме реального времени. По умолчанию используются
                  значения idx…, если заданы, в противном случае —
                  значения log….</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PYLOGLEVEL" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PYLOGLEVEL"></a><span class="term"><code class="varname">pyloglevel</code></span></dt>
                <dd>
                  <p>Переопределение уровня журнала для модуля python.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PYLOGFILENAME" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PYLOGFILENAME"></a><span class="term"><code class="varname">pylogfilename</code></span></dt>
                <dd>
                  <p>Переопределение имени файла журнала для модуля python.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXNOAUTOPURGE" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXNOAUTOPURGE"></a><span class="term"><code class="varname">idxnoautopurge</code></span></dt>
                <dd>
                  <p>Позволяет не удалять данные для удалённых или недоступных
                  файлов. Может переопределяться параметрами
                  командой строки recollindex и очень помогает в случае временной,
                  но предсказуемой недоступности части общего набора документов,
                  чтобы очистку можно было запускать только при наличии всех необходимых документов.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ORGIDXCONFDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ORGIDXCONFDIR"></a><span class="term"><code class="varname">orgidxconfdir</code></span></dt>
                <dd>
                  <p>Исходное расположение конфигурационного каталога.
                  Используется только для перемещаемых наборов данных.
                  Размещение конфигурационного каталога внутри дерева
                  каталогов позволяет автоматически преобразовывать
                  пути при выполнении запроса как только набор
                  данных будет перемещён (например, по причине монтирования в другом месте).</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.CURIDXCONFDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.CURIDXCONFDIR"></a><span class="term"><code class="varname">curidxconfdir</code></span></dt>
                <dd>
                  <p>Текущее расположение конфигурационного каталога.
                  Дополняет orgidxconfdir для перемещаемых наборов данных.
                  Используется при копировании конфигурационного каталога
                  из набора данных в другое место расположения либо в связи с тем, что набор
                  данных доступен только для чтения, когда нужен
                  доступ с правами чтения/записи, либо по причинам
                  проблем с производительностью. Здесь задаётся
                  место расположения перемещённого оригинала
                  перед копированием для выполнения операций
                  по преобразованию пути. Например, если набор данных
                  изначально проиндексированный на
                  «/home/me/mydata/config» был смонтирован на
                  «/media/me/mydata», и графический интерфейс
                  работает из скопированной конфигурации, то
                  orgidxconfdir будет иметь значение
                  «/home/me/mydata/config», а curidxconfdir (как
                  задано в скопированной конфигурации) —
                  «/media/me/mydata/config».</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXRUNDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXRUNDIR"></a><span class="term"><code class="varname">idxrundir</code></span></dt>
                <dd>
                  <p>Текущий каталог процесса индексирования. Обработчики
                  ввода иногда оставляют временные файлы в текущем каталоге,
                  поэтому имеет смысл выполнить recollindex chdir для перехода
                  в какой-нибудь временный каталог. Пустое значение приводит
                  к сохранению текущего каталога.
                  Если указано значение tmp (буквально), то будет использоваться
                  временный каталог в соответствии с установками окружения
                  (RECOLL_TMPDIR, TMPDIR или /tmp). Если же указан
                  абсолютный путь к каталогу, то будет использоваться этой абсолютный путь.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.CHECKNEEDRETRYINDEXSCRIPT"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.CHECKNEEDRETRYINDEXSCRIPT">
                </a><span class="term"><code class=
                "varname">checkneedretryindexscript</code></span></dt>
                <dd>
                  <p>Сценарий для эвристической проверки необходимости
                  переиндексации файлов, предыдущая индексация которых
                  завершилась с ошибкой. Сценарий по умолчанию проверяет
                  даты изменения каталогов /usr/bin и /usr/local/bin.
                  Сначала просматривает относительный путь в каталогах
                  фильтров, а затем и в пути основного каталога.
                  Избежать этой процедуры можно при указании абсолютного пути.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.RECOLLHELPERPATH"
                id="RCL.INSTALL.CONFIG.RECOLLCONF.RECOLLHELPERPATH">
                </a><span class="term"><code class=
                "varname">recollhelperpath</code></span></dt>
                <dd>
                  <p>Дополнительные пути для поиска исполняемых
                  файлов вспомогательных программ. Может применяться,
                  например, на Windows в коде Python, и на Mac OS
                  с помощью упакованного recoll.app (потому что у меня
                  так и не получилось найти надёжный метод передачи в launchd
                  значения для установки PATH). Пример внизу предназначен для Windows.
                  Для Mac и Ux-подобных систем в качестве разделителя элементов
                  используется «:», для Windows необходимо использовать только «;».</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXABSMLEN" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXABSMLEN"></a><span class="term"><code class="varname">idxabsmlen</code></span></dt>
                <dd>
                  <p>Длина описаний, сохраняемых в процессе индексирования.
                  Recoll хранит описание для каждого индексируемого файла.
                  Текст описания может быть взят либо из настоящего раздела «abstract»
                  в документе, либо просто из начала документа.
                  Он хранится в индексе для возможности отображения
                  описания в составе списка результатов без декодирования
                  исходного файла. Параметр idxabsmlen определяет размер этого
                  описания. Значение по умолчанию составляет 250 байт.
                  Интерфейс поиска позволяет отображать либо этот
                  сохраняемый текст описания, либо синтетическое описание,
                  построенное путём извлечения текста вокруг элемента поиска.
                  Если предполагается использовать синтетическое
                  описание, то значение можно уменьшить для экономии
                  дискового пространства.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXMETASTOREDLEN"
                id="RCL.INSTALL.CONFIG.RECOLLCONF.IDXMETASTOREDLEN">
                </a><span class="term"><code class=
                "varname">idxmetastoredlen</code></span></dt>
                <dd>
                  <p>Обрезка длины сохраняемых полей метаданных.
                  Параметр влияет не на индексирование (в любом случае
                  обрабатывается всё поле), а лишь на размер
                  данных, хранящихся в индексе для отображения полей
                  внутри списка результатов или при просмотре. Значение
                  по умолчанию (150 байт) может оказаться слишком
                  низким при наличии пользовательских полей.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXTEXTTRUNCATELEN"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXTEXTTRUNCATELEN"></a><span class="term"><code class="varname">idxtexttruncatelen</code></span></dt>
                <dd>
                  <p>Обрезка длины текстов всех документов.
                  Индексируется только начало документа. Не рекомендуется,
                  кроме случаев полной уверенности в том, что
                  интересующие ключевые слова находятся в начале документа, а также
                  при серьёзной нехватке дискового пространства.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXSYNONYMS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXSYNONYMS"></a><span class="term"><code class="varname">idxsynonyms</code></span></dt>
                <dd>
                  <p>Имя файла синонимов, используемого при индексировании.
                  Используется при индексировании синонимов, состоящих
                  из нескольких слов, составляющих единый элемент поиска.
                  Может быть полезен только при выполнении поиска
                  по близости с указанными элементами.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXNICEPRIO" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.IDXNICEPRIO"></a><span class="term"><code class="varname">idxniceprio</code></span></dt>
                <dd>
                  <p>«Правильный» приоритет для процессов индексирования.
                  По умолчанию: 19 (наименьшее) Появилось начиная с версии
                  1.26.5. В предыдущих версиях значение 19 было фиксированным.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOASPELL" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.NOASPELL"></a><span class="term"><code class="varname">noaspell</code></span></dt>
                <dd>
                  <p>Отключение aspell. Формирование словаря
                  aspell занимает время, причём некоторые комбинации версии
                  aspell, языка и используемых элементов поиска приводят
                  к сбою aspell. Поэтому иногда имеет смысл просто
                  отключить эту функцию.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ASPELLLANGUAGE" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ASPELLLANGUAGE"></a><span class="term"><code class="varname">aspellLanguage</code></span></dt>
                <dd>
                  <p>Определение языка, используемого при создании
                  словаря aspell. Значение должно совпадать с набором
                  файлов определения языка aspell. Для просмотра списка
                  можно ввести «aspell dicts». Если значение не задано,
                  то по умолчанию для определения значения используется
                  окружение NLS. Значения задаются в виде двухбуквенных
                  кодов языка (например, «en», «fr»…)</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ASPELLADDCREATEPARAM"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ASPELLADDCREATEPARAM">
                </a><span class="term"><code class=
                "varname">aspellAddCreateParam</code></span></dt>
                <dd>
                  <p>Дополнительный аргумент и параметр для команды
                  создания словаря aspell. Для некоторых пакетов
                  aspell может потребоваться дополнительный параметр
                  (например, на Debian Jessie: --local-data-dir=/usr/lib/aspell). См.
                  баг Debian 772415.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ASPELLKEEPSTDERR"
                id="RCL.INSTALL.CONFIG.RECOLLCONF.ASPELLKEEPSTDERR">
                </a><span class="term"><code class=
                "varname">aspellKeepStderr</code></span></dt>
                <dd>
                  <p>Устанавливается для просмотра ошибок при создании словаря
                  aspell. Их всегда много и данный параметр используется для отладки.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MONAUXINTERVAL" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MONAUXINTERVAL"></a><span class="term"><code class="varname">monauxinterval</code></span></dt>
                <dd>
                  <p>Интервал обновления вспомогательной базы данных.
                  Индексатор режима реального времени только периодически
                  обновляет вспомогательные базы данных (stemdb, aspell),
                  потому что было бы слишком дорого делать это при каждом
                  изменении документа. Период по умолчанию составляет один час.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MONIXINTERVAL" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MONIXINTERVAL"></a><span class="term"><code class="varname">monixinterval</code></span></dt>
                <dd>
                  <p>Минимальный интервал (в секундах) при обработке
                  файлов в очереди индексирования. В режиме реального
                  времени индексатор не обрабатывает каждый процесс по мере его
                  поступления, но накапливает очередь с уменьшением верх
                  и группирует вместе несколько событий, воздействующих
                  на один файл. По умолчанию 30 с.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MONDELAYPATTERNS"
                id="RCL.INSTALL.CONFIG.RECOLLCONF.MONDELAYPATTERNS">
                </a><span class="term"><code class=
                "varname">mondelaypatterns</code></span></dt>
                <dd>
                  <p>Временные параметры для индексирования в режиме
                  реального времени. Можно использовать определения для файлов
                  с более длительной задержкой до получения возможности повторного
                  индексирования. Данный параметр предназначен для быстро
                  меняющихся файлов, переиндексирование которых
                  выполняется лишь время от времени. Состоит из списка пар
                  шаблон_с_символами_замещения:секунды. Совпадение шаблонов
                  проверяется с помощью fnmatch(шаблон, путь, 0). Элементы с пробелами можно
                  заключать в двойные кавычки (в кавычки заключается весь
                  элемент целиком, а не только шаблон).
                  По умолчанию имеет пустое значение. Пример: mondelaypatterns =
                  *.log:20 "*с пробелами.*:30"</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MONIONICECLASS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MONIONICECLASS"></a><span class="term"><code class="varname">monioniceclass</code></span></dt>
                <dd>
                  <p>Класс ionice для процесса индексирования. Не смотря на
                  обманчивое имя, на поддерживающих платформах данный класс
                  влияет на все процессы индексирования, а не только на те, которые
                  происходят в режиме реального времени/мониторинга. По умолчанию
                  имеет значение 3 (использовать самый низкий приоритет «Idle»).</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MONIONICECLASSDATA"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MONIONICECLASSDATA"></a><span class="term"><code class="varname">monioniceclassdata</code></span></dt>
                <dd>
                  <p>Уровень класса ionice, если он поддерживается классом.
                  По умолчанию имеет пустое значение, поскольку класс по умолчанию «Idle» не имеет уровня.</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.QUERY" id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.QUERY"></a>Параметры
                  времени запроса (не оказывают влияния на индекс)</h4>
                </div>
              </div>
            </div>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.AUTODIACSENS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.AUTODIACSENS"></a><span class="term"><code class="varname">autodiacsens</code></span></dt>
                <dd>
                  <p>Автоматическое включение чувствительности к диакритическим
                  знакам (только в случае неурезанного индекса). Если индекс
                  не урезан, то активировать чувствительность к диакритическим знакам
                  можно автоматически при наличии таких знаков в составе поискового запроса
                  (не в unac_except_trans). В противном случае для указания чувствительности
                  к диакритике необходимо использовать язык запросов с модификатором «D».
                  Значение по умолчанию: no.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.AUTOCASESENS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.AUTOCASESENS"></a><span class="term"><code class="varname">autocasesens</code></span></dt>
                <dd>
                  <p>Автоматическое включение чувствительности
                    к регистру (только в случае неурезанного индекса). Если
                    индекс не урезан (см. indexStripChars), то активировать
                    чувствительность к регистру можно автоматически при наличии
                    символов в верхнем регистре в составе поискового
                    запроса в любой позиции в слове, кроме первой. В противном случае
                    для включения чувствительности к регистру необходимо использовать
                    язык запросов с модификатором «C». Значение по умолчанию: yes.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MAXTERMEXPAND" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MAXTERMEXPAND"></a><span class="term"><code class="varname">maxTermExpand</code></span></dt>
                <dd>
                  <p>Предел расширения запросов для одного элемента
                  поиска (например: при использовании символов подстановки).
                  Влияет только на запросы, а не на индексирование.
                  Ранее такой предел не устанавливался (за исключением
                  предела на имена файлов, где ограничение имело слишком
                  малый размер: 1000), но с большим индексом использовать такое
                  значение нецелесообразно. Значение по умолчанию 10000.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MAXXAPIANCLAUSES"
                id="RCL.INSTALL.CONFIG.RECOLLCONF.MAXXAPIANCLAUSES">
                </a><span class="term"><code class=
                "varname">maxXapianClauses</code></span></dt>
                <dd>
                  <p>Максимальное число выражений в одном запросе
                  Xapian. Влияет только на запросы, а не на индексирование.
                  Во многих случаях результат расширения элементов поиска может иметь мультипликативный
                  эффект, при котором необходимо избежать поглощения всего объёма
                  памяти. Значение по умолчанию 50000.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SNIPPETMAXPOSWALK"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SNIPPETMAXPOSWALK"></a><span class="term"><code class="varname">snippetMaxPosWalk</code></span></dt>
                <dd>
                  <p>Максимальное число позиций для обхода
                  в процессе составления фрагмента для списка результатов.
                  Значение по умолчанию в размере 1,000,000 может оказаться
                  недостаточным для очень больших документов, что может привести
                  к получению фрагментов, не содержащих слова, которые
                  могут изменить смысл отрывка.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.THUMBNAILERCMD" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.THUMBNAILERCMD"></a><span class="term"><code class="varname">thumbnailercmd</code></span></dt>
                <dd>
                  <p>Команда для создания миниатюр. При использовании
                  параметра значение должно представлять собой путь
                  к команде или сценарию, за которым следуют её постоянные
                  аргументы. Четыре аргумента присоединяются перед
                  выполнением: URL-адрес документа, MIME-тип, размер (SIZE)
                  целевого значка (например, 128), и путь (PATH) файла вывода.
                  Команда должна формировать миниатюру из этих значений.
                  Например, если MIME-тип представляет собой видео, то
                  сценарий может использовать параметр: ffmpegthumbnailer -iURL -oPATH -sSIZE.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.STEMEXPANDPHRASES"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.STEMEXPANDPHRASES"></a><span class="term"><code class="varname">stemexpandphrases</code></span></dt>
                <dd>
                  <p>Значение по умолчанию для применения расширения по словоформам к
                  элементам поиска в составе фразы. Recoll обычно
                  не применяет расширение по словоформам
                  к словам в составе фразы. Установка этого параметра
                  изменит поведение по умолчанию, после чего
                  расширение по словоформам будет применяться и для слов в составе фразы.
                  Если параметр включен, то отключить его можно с помощью
                  модификатора «l», чтобы поиск по словоформам
                  в составе фразы не применялся для конкретного экземпляра поиска.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.AUTOSPELLRARITYTHRESHOLD"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.AUTOSPELLRARITYTHRESHOLD">
                </a><span class="term"><code class=
                "varname">autoSpellRarityThreshold</code></span></dt>
                <dd>
                  <p>Инверсия отношения частотности элемента поиска
                  к общему количеству элементов поиска в базе данных,
                  по которым выполняется поиск орфографически близких слов
                  для автоматического расширения запроса.
                  Когда элемент поиска встречается очень редко, можно (на
                  выбор пользователя) просмотреть более распространённые
                  варианты орфографии и, возможно, добавить их в запрос.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.AUTOSPELLSELECTIONTHRESHOLD"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.AUTOSPELLSELECTIONTHRESHOLD">
                </a><span class="term"><code class=
                "varname">autoSpellSelectionThreshold</code></span></dt>
                <dd>
                  <p>Пороговое значение отношения частотности орфографически близких слов
                  к частотности элемента поиска во вводе пользователя,
                  при превышении которого орфографический вариант добавляется в запрос. При выборе
                  элементов для расширения по словоформам учитывается
                  редкость его использования, в связи с чем включаются
                  только такие орфографически близкие слова, которые
                  являются более общеупотребительными согласно указанному
                  соотношению.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.KIOSHOWSUBDOCS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.KIOSHOWSUBDOCS"></a><span class="term"><code class="varname">kioshowsubdocs</code></span></dt>
                <dd>
                  <p>Отображение результата поиска вложенных документов в KDE
                  dolphin/kio и krunner. Вложенные документы могут привести
                  к беспорядочному отображению результатов поиска и не всегда легко применяются
                  из окружения kio или krunner. Установка этой переменной
                  приведёт к отображению результатов только для отдельных (не-вложенных) документов.</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.PDF" id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.PDF"></a>Параметры
                  для сценария ввода PDF</h4>
                </div>
              </div>
            </div>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><a name="RCL.INSTALL.CONFIG.RECOLLCONF.PDFOCR"
                id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PDFOCR"></a><span class="term"><code class="varname">pdfocr</code></span></dt>
                <dd>
                  <p>Попытка выполнить распознание текста (OCR)
                  для файлов PDF, не имеющих текстового содержимого.
                  Можно определить для подкаталогов.
                  По умолчанию отключено по причине медленной работы OCR.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PDFATTACH" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PDFATTACH"></a><span class="term"><code class="varname">pdfattach</code></span></dt>
                <dd>
                  <p>Активация извлечения вложения PDF с помощью
                  pdftk (при его наличии). Обычно этот параметр отключен
                  в связи с тем, что приводит к некоторому замедлению процесса индексирования PDF
                  даже при отсутсвии каких-либо вложений.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PDFEXTRAMETA" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PDFEXTRAMETA"></a><span class="term"><code class="varname">pdfextrameta</code></span></dt>
                <dd>
                  <p>Извлечение текста из выбранных тегов метаданных XMP.
                  Это разделённый пробелами список классифицированных имён тегов XMP.
                  Каждый элемент списка может содержать второе имя, отделённое символом «|»,
                  для преобразования имени тега в имя поля Recoll. В случае отсутствия второго элемента,
                  в качестве имени поля Recoll будет использоваться имя тега.
                  При этом также придётся добавить спецификации полей в файл «fields»
                  для непосредственной обработки извлеченных данных.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PDFEXTRAMETAFIX" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.PDFEXTRAMETAFIX"></a><span class="term"><code class="varname">pdfextrametafix</code></span></dt>
                <dd>
                  <p>Имя сценария обработки полей XMP. В данном параметре
                  указывается имя загружаемого сценария для
                  изменения значений поля XMP. Сценарий должен включать
                  определение класса «MetaFixer» и использовать метод metafix(),
                  который вызывается с указанием классифицированного имени тега
                  и его значения для каждого выбранного поля с целью его
                  изменения или удаления. Для каждого документа создаётся
                  новый экземпляр, чтобы объект мог сохранять его состояние,
                  например, для устранения дублирующих значений.</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.OCR" id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.OCR"></a>Параметры
                  для обработки OCR</h4>
                </div>
              </div>
            </div>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.OCRPROGS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.OCRPROGS"></a><span class="term"><code class="varname">ocrprogs</code></span></dt>
                <dd>
                  <p>Используемые модули OCR. Сценарий OCR
                  верхнего уровня будет пытаться загружать модули
                  по порядку и применит первый, позволяющий выполнять
                  распознавание текста в индексируемом файле. Модули для tesseract
                  (tesseract) и ABBYY FineReader (abbyy) имеются в наличии
                  в стандартном дистрибутиве. Для совместимости с предыдущей
                  версией при отсутствии значения у данного параметра по умолчанию
                  используется значение «tesseract». При необходимости можно
                  использовать преднамеренно пустое значение, а при указании «abbyy
                  tesseract» программа будет пытаться загружать модули из списка.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.OCRCACHEDIR" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.OCRCACHEDIR"></a><span class="term"><code class="varname">ocrcachedir</code></span></dt>
                <dd>
                  <p>Место расположения данных кеширования OCR.
                  Если указано пустое или неопределённое
                  значение, то по умолчанию данные кеша OCR будут
                  размещаться в $RECOLL_CONFDIR/ocrcache.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TESSERACTLANG" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TESSERACTLANG"></a><span class="term"><code class="varname">tesseractlang</code></span></dt>
                <dd>
                  <p>Язык для распознавания текста в tesseract.
                  Увеличивает точность распознавания.
                  Может быть также задан через содержимое
                  файла в обрабатываемом каталоге. См. сценарий
                  rclocrtesseract.py. Примеры значений: eng,
                  fra… См. документацию к tesseract.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TESSERACTCMD" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.TESSERACTCMD"></a><span class="term"><code class="varname">tesseractcmd</code></span></dt>
                <dd>
                  <p>Путь для команды tesseract. Без кавычек.
                  Главным образом, используется в Windows, либо для
                  указания нестандартной команды tesseract. Пример использования
                  в ОС Windows: tesseractcmd =
                  C:/ProgramFiles(x86)/Tesseract-OCR/tesseract.exe</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ABBYYLANG" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ABBYYLANG"></a><span class="term"><code class="varname">abbyylang</code></span></dt>
                <dd>
                  <p>Язык для распознавания текста в abbyy.
                  Увеличивает точность распознавания.
                  Может быть также задан через содержимое
                  файла в обрабатываемом каталоге. См. сценарий
                  rclocrabbyy.py. Примеры значений: English,
                  French… См. документацию к ABBYY.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ABBYYOCRCMD" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ABBYYOCRCMD"></a><span class="term"><code class="varname">abbyyocrcmd</code></span></dt>
                <dd>
                  <p>Путь для команды abbyy. Каталог ABBY обычно
                  не включается в стандартный путь, и поэтому нуждается в указании.</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.SPEECHTOTEXTPARAMS"
                  id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.SPEECHTOTEXTPARAMS">
                  </a>Параметры для распознавания речи</h4>
                </div>
              </div>
            </div>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SPEECHTOTEXT" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.SPEECHTOTEXT"></a><span class="term"><code class="varname">speechtotext</code></span></dt>
                <dd>
                  <p>Включить распознавание речи. На данный
                  момент единственно возможным значением является
                  «whisper» для использования с программой OpenAI whisper.</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.STTMODEL" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.STTMODEL"></a><span class="term"><code class="varname">sttmodel</code></span></dt>
                <dd>
                  <p>Имя модели whisper</p>
                </dd>
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.STTDEVICE" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.STTDEVICE"></a><span class="term"><code class="varname">sttdevice</code></span></dt>
                <dd>
                  <p>Имя устройства, используемого для whisper</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.MISCHANDLERPARAMS"
                  id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.MISCHANDLERPARAMS">
                  </a>Параметры для прочих специальных обработчиков</h4>
                </div>
              </div>
            </div>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ORGMODESUBDOCS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.ORGMODESUBDOCS"></a><span class="term"><code class="varname">orgmodesubdocs</code></span></dt>
                <dd>
                  <p>Индексирование разделов первого уровня в файлах org-mode в качестве
                  отдельных поддокументов. Установлено по умолчанию.
                  Если задано значение false, файлы org-mode будут индексироваться
                  как простой текст</p>
                </dd>
              </dl>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.SPECLOCATIONS" id=
                  "RCL.INSTALL.CONFIG.RECOLLCONF.SPECLOCATIONS"></a>Параметры
                  для особых мест размещения</h4>
                </div>
              </div>
            </div>
            <div class="variablelist">
              <dl class="variablelist">
                <dt><a name=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MHMBOXQUIRKS" id=
                "RCL.INSTALL.CONFIG.RECOLLCONF.MHMBOXQUIRKS"></a><span class="term"><code class="varname">mhmboxquirks</code></span></dt>
                <dd>
                  <p>Использование особенностей формата mbox
                  thunderbird/mozilla-seamonkey. Устанавливается
                  для каталога расположения файлов
                  mbox электронной почты.</p>
                </dd>
              </dl>
            </div>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.CONFIG.FIELDS" id=
                "RCL.INSTALL.CONFIG.FIELDS"></a>5.4.3.&nbsp;Файл fields</h3>
              </div>
            </div>
          </div>
          <p>Данный файл содержит информацию о динамической обработке
          полей в <span class="application">Recoll</span>. Значения отдельных
          самых основных полей заданы в коде программы,
          и в целом изменение исходного содержимого в файле
          <code class="filename">fields</code> не приветствуется. Но при этом
          можно создавать пользовательские поля, размещать в них свои данные
          и обрабатывать их точно также, как исходные.</p>
          <p>Файл <code class="filename">fields</code> имеет
          несколько разделов, каждый из которых определяет какой-то
          один аспект обработки полей. Для настройки соответствующих аспектов в работе программы
          довольно часто приходится изменять несколько разделов файла.</p>
          <p>Здесь даётся лишь краткое описание. Для получения более подробной информации
          см. комментарии в файле по умолчанию.</p>
          <p>Имена файлов должны содержать только буквенные ASCII-символы в нижнем регистре.</p>
          <div class="variablelist">
            <dl class="variablelist">
              <dt><span class="term">[prefixes]</span></dt>
              <dd>
                <p>Поле становится индексируемым (доступным для поиска)
                при определении префиксов в данном разделе. Существует
                более полное объяснение по префиксам, которые используются
                в стандартной установке recoll. Здесь укажем кратко:
                расширенные префиксы должны быть в верхнем регистре,
                начинаться с XY и иметь небольшой размер. Например, XYMFLD.</p>
              </dd>
              <dt><span class="term">[values]</span></dt>
              <dd>
                <p>Поля, перечисленные в этом разделе, будут храниться
                как <code class="literal">значения</code>
                <span class="application">Xapian</span>
                в составе индекса. Это позволяет использовать их в интервальных запросах
                для фильтрации результатов по значению их поля.
                В настоящий момент эта функция поддерживает строки и целочисленные
                значения. См. более подробную информацию в комментариях к файлу</p>
              </dd>
              <dt><span class="term">[stored]</span></dt>
              <dd>
                <p>Поле становится сохраняемым (отображается в составе
                списка результатов) после добавления его имени
                в этот раздел (обычно с пустым значением).</p>
              </dd>
              <dt><span class="term">[aliases]</span></dt>
              <dd>
                <p>В этом разделе определяются списки псевдонимов для
                канонических имён, используемых в разделах <code class=
                "literal">[prefixes]</code> и <code class=
                "literal">[stored]</code></p>
              </dd>
              <dt><span class="term">[queryaliases]</span></dt>
              <dd>
                <p>Данный раздел также содержит определения для псевдонимов
                канонических имён полей, с той разницей, что
                подстановка будет выполняться только в
                процессе запроса во избежание любой возможности
                получения в качестве значения случайных метаданных из документов.</p>
              </dd>
              <dt><span class="term">Специальные разделы для
              программ-обработчиков</span></dt>
              <dd>
                <p>Некоторым обработчикам ввода могут быть необходимы
                особые параметры конфигурации для обработки полей.
                В настоящий момент такой специальный раздел имеет только обработчик
                сообщений эл. почты (с именем <code class="literal">[mail]</code>).
                Это позволяет индексировать произвольные заголовки
                эл.почты в дополнение к индексируемым по умолчанию.
                В будущем могут появиться и другие подобные разделы.</p>
              </dd>
            </dl>
          </div>
          <p>Далее следует небольшой пример пользовательского файла
          <code class="filename">fields</code>. Здесь будет
          извлекаться заданный заголовок эл.почты в качестве поля
          для поиска, а данные будут отображаться в списках результатов.
          (Замечание: поскольку обработчик эл.почты не декодирует
          значения, то индексироваться могут только простые заголовки
          в ascii-тексте, а для повторяющихся заголовков
          будет использоваться только первый экземпляр).</p>
          <pre class="programlisting">[prefixes]
        # Индексировать содержимое поля mailmytag (с заданным префиксом)
        mailmytag = XMTAG

        [stored]
        # Сохранять поле mailmytag в записи данных для документа (для возможности
        # отображения в виде %(mailmytag) в списке результатов).
        mailmytag = 

        [queryaliases]
        filename = fn
        containerfilename = cfn

        [mail]
        # Извлекать заголовок почты X-My-Tag и использовать его для внутренних целей
        # совместно с полем mailmytag
        x-my-tag = mailmytag
        </pre>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.FIELDS.XATTR" id=
                  "RCL.INSTALL.CONFIG.FIELDS.XATTR"></a>Расширенные
                  атрибуты в файле fields</h4>
                </div>
              </div>
            </div>
            <p>По умолчанию <span class="application">Recoll</span>
            обрабатывает пользовательские расширенные атрибуты файлов
            как поля документов.</p>
            <p>В Linux атрибуты обрабатываются как поля с точно таким же именем
            после удаления префикса <code class="literal">user</code>.</p>
            <p>В разделе <code class="literal">[xattrtofields]</code>
            файла <code class="filename">fields</code>
            можно задать преобразование имён расширенных
            атрибутов в имена полей <span class=
            "application">Recoll</span>.</p>
            <p>Преобразования имён задаются в виде строки <code class=
            "code">имя_расш_атрибута = имя_поля</code>. Имена чувствительны к регистру.
            Например, ниже показан пример преобразования
            расширенного атрибута «tags» в поле «keywords»:
            <code class="code">tags = keywords</code>.</p>
            <p>Ввод пустого сопоставления сделает
            использование атрибута невозможным.</p>
            <p>Значения из расширенных атрибутов не изменяют
            данные из аналогичных полей внутри документа.
            Вместо этого происходит объединение значений.</p>
            <p>Особый случай: расширенный атрибут с именем
            <code class="literal">modificationdate</code> задаёт
            поле <code class="varname">dmtime</code> (дата
            документа) только в том случае, когда оно не задано
            во внутреннем поле документа (например, поле <code class=
            "literal">Date:</code> эл.почты).</p>
          </div>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.CONFIG.MIMEMAP" id=
                "RCL.INSTALL.CONFIG.MIMEMAP"></a>5.4.4.&nbsp;Файл
                mimemap</h3>
              </div>
            </div>
          </div>
          <p>Файл <code class="filename">mimemap</code> указывает
          расширение имени файла для сопоставления MIME-типов.</p>
          <p>Для имён файлов без расширения или с неизвестным
          расширением современные версии <span class=
          "application">Recoll</span> будут использовать libmagic.
          Более старые версии воспользуются
          системной командой (<span class="command"><strong>file</strong></span>
          <code class="option">-i</code> или <span class=
          "command"><strong>xdg-mime</strong></span>)
          определения MIME-типа (функцию можно отключить или
          изменить команду в основном конфигурационном файле).</p>
          <p>Все значения расширений в <code class=
          "filename">mimemap</code> должны вводиться в нижнем регистре.
          Расширения имён файлов переводятся в нижний регистр для сравнения
          в процессе индексирования исходя из того, что в верхнем регистре
          совпадение с элементом <code class="filename">mimemap</code> невозможно.</p>
          <p>Сопоставления могут быть представлены в виде поддерева,
          что иногда может быть полезно. Пример: заметки в программе
          <span class="application">okular</span> имеют расширение <code class=
          "filename">.xml</code>, но требуют специальной обработки,
          которую несложно реализовать, так как все они обычно находятся
          в одном месте. Например:</p>
          <pre class=
          "programlisting">[~/.kde/share/apps/okular/docdata]
        .xml = application/x-okular-notes</pre>
          <p>Переменная <code class="varname">recoll_noindex</code>
          была перемещена из <code class="filename">mimemap</code>
          в <code class="filename">recoll.conf</code> и
          переименована там в <code class=
          "varname">noContentSuffixes</code>, однако сохраняла свою
          функцию до версии <span class=
          "application">Recoll</span> 1.21. Для более старых версий
          <span class="application">Recoll</span>, см.
          документацию по <code class=
          "varname">noContentSuffixes</code>, но в <code class=
          "filename">mimemap</code> необходимо использовать <code class=
          "varname">recoll_noindex</code>.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.CONFIG.MIMECONF" id=
                "RCL.INSTALL.CONFIG.MIMECONF"></a>5.4.5.&nbsp;Файл
                mimeconf</h3>
              </div>
            </div>
          </div>
          <p>Основная задача файла <code class="filename">mimeconf</code>
          состоит в выдаче указаний по обработке различных MIME-типов
          для индексирования. Это делается в разделе
          <code class="literal">[index]</code>, который не должен
          подвергаться случайному изменению. См. комментарии в файле.</p>
          <p>Данный файл содержит и другие определения, оказывающие определённое
          влияние на язык запроса и графический интерфейс, которые, судя по всему,
          надо было изначально разместить в каком-то другом месте.</p>
          <p>Раздел <code class="literal">[icons]</code> позволяет
          изменять значки, отображаемые графическим интерфейсом
          <span class="command"><strong>recoll</strong></span>
          в списке результатов (значения параметров представлены в виде базовых имён
          изображений <code class="literal">png</code> в каталоге
          <code class="filename">iconsdir</code>, который задан
          в файле <code class="filename">recoll.conf</code>).</p>
          <p>Раздел <code class="literal">[categories]</code>
          определяет группирование MIME-типов в <code class=
          "literal">категории</code>, используемые при добавлении
          выражения <code class="literal">rclcat</code> к запросу
          на <a class="link" href="#RCL.SEARCH.LANG" title=
          "3.5.&nbsp;The query language">языке запроса</a>.
          Выражения <code class="literal">rclcat</code> также по умолчанию
          используются при нажатии кнопок <code class="literal">guifilters</code> 
          в графическом интерфейсе (см. далее).</p>
          <p>Элементы управления фильтрами находятся в верхней части окна
          графического интерфейса <span class="command"><strong>recoll</strong></span>
          в виде флажков непосредственно над списком результатов или
          в виде выпадающего списка в области инструментов.</p>
          <p>По умолчанию они обозначаются следующими надписями: <code class=
          "literal">медиа</code>, <code class=
          "literal">сообщение</code>, <code class=
          "literal">прочее</code>, <code class=
          "literal">презентация</code>, <code class=
          "literal">таблица</code>, <code class=
          "literal">текст</code>, и каждая из них сопоставлена
          с категорией документов. Эти категории определяются в разделе <code class=
          "literal">[guifilters]</code>, где каждому элементу управления
          назначается переменная, содержащая соответствующее выражение на языке запроса.</p>
          <p>Уверен, что простой пример ниже расставит все точки над и.</p>
          <pre class="programlisting">[guifilters]

Big Books = dir:"~/My Books" size&gt;10K
My Docs = dir:"~/My Documents"
Small Books = dir:"~/My Books" size&lt;10K
System Docs = dir:/usr/share/doc
        </pre>
          <p>Представленное выше определение приведёт к созданию
          четырёх флажков фильтра, с надписью <code class="literal">Big
          Books</code>, <code class="literal">My Docs</code>
          и т.д.</p>
          <p>Текст после знака равно должен представлять собой допустимое
          выражение на языке запросов, и при нажатии кнопки будет
          объединяться с остальной частью запроса с помощью оператора AND.</p>
          <p>Любой текст в составе имени перед символом двоеточия
          не отображается на экране, но применяется для сортировки.
          Можно использовать его для установки флажков в любом
          порядке. Например, представленное ниже определение
          практически полностью соответствует приведённому выше,
          но располагает флажки в обратном порядке.</p>
          <pre class="programlisting">[guifilters]

d:Big Books = dir:"~/My Books" size&gt;10K
c:My Docs = dir:"~/My Documents"
b:Small Books = dir:"~/My Books" size&lt;10K
a:System Docs = dir:/usr/share/doc
        </pre>
          <p>Как уже можно было предположить, раздел <code class=
          "literal">[guifilters]</code> по умолчанию выглядит следующим образом:</p>
          <pre class="programlisting">[guifilters]
text = rclcat:text
spreadsheet = rclcat:spreadsheet
presentation = rclcat:presentation
media = rclcat:media
message = rclcat:message
other = rclcat:other
        </pre>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.CONFIG.MIMEVIEW" id=
                "RCL.INSTALL.CONFIG.MIMEVIEW"></a>5.4.6.&nbsp;Файл
                mimeview</h3>
              </div>
            </div>
          </div>
          <p>Файл <code class="filename">mimeview</code> содержит указания
          по запуску соответствующих программ при нажатии
          ссылки <span class="guilabel">Открыть</span> в списке результатов.
          Например: HTML обычно открывается с помощью <span class=
          "application">firefox</span>, но его можно заменить на
          <span class="application">Konqueror</span>, 
          программа <span class="application">openoffice.org</span> на конкретной машине может иметь имя
          <span class="command"><strong>oofice</strong></span> вместо
          <span class="command"><strong>openoffice</strong></span>
          и т.д.</p>
          <p>Изменения в этот файл могут быть внесены путём непосредственного
          редактирования или с помощью диалога настройки параметров
          графического интерфейса <span class="command"><strong>recoll</strong></span>.</p>
          <p>Если в параметрах конфигурации графического интерфейса <span class="application">Recoll</span>
          установлен флажок <span class="guilabel">Использовать настройки
          окружения для выбора редактора документов</span>,
          все записи в <code class="filename">mimeview</code> будут
          проигнорированы, за исключением одной единственной записи для элемента <code class=
          "literal">application/x-all</code> (по умолчанию использует
          <span class="command"><strong>xdg-open</strong></span>).</p>
          <p>При этом переменная верхнего уровня <code class=
          "literal">xallexcepts</code> определяет список исключений
          MIME-типов, обрабатываемых в соответствии с
          локальной настройкой, а не согласно окружению рабочего стола.
          Это делается для того, чтобы специальные параметры <span class=
          "application">Recoll</span>, такие как номер страницы
          или строка поиска, могли быть переданы приложениям, которые
          их поддерживают, например, просмотрщику <span class=
          "application">evince</span>.</p>
          <p>Что касается других конфигурационных файлов, то в конфигурационном
          каталоге пользователя обычно тоже содержится файл <code class="filename">mimeview</code>,
          включающий только те записи, которые не соответствуют конфигурации по умолчанию,
          с целью переопределения параметров основного конфигурационного
          файла.</p> 
          <p>Все строки определения просмотрщиков должны размещаться в разделе
          <code class="literal">[view]</code>.</p>
          <p>Ключи в данном файле обычно представлены MIME-типами. Допускается
          добавление тега приложения для указания выбранной
          области файловой системы (в виде указания <code class=
          "varname">localfields</code> в <code class="filename">mimeconf</code>).
          Для записи ключа используется следующий синтаксис: <em class=
          "replaceable"><code>mimetype</code></em><code class=
          "literal">|</code><em class=
          "replaceable"><code>tag</code></em></p>
          <p>Строка <code class="varname">nouncompforviewmts</code>
          (размещается на верхнем уровне за пределами раздела
          <code class="literal">[view]</code>) и содержит
          список MIME-типов, которые не должны разархивироваться
          до запуска просмотрщика (если окажутся в сжатом виде, например:
          <em class=
          "replaceable"><code>mydoc.doc.gz</code></em>).</p>
          <p>С правой стороны каждой строки содержится команда,
          выполняемая для открытия файла. При этом производятся следующие замены:</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style=
            "list-style-type: disc;">
              <li class="listitem">
                <p><b>%D.&nbsp;</b>Дата документа</p>
              </li>
              <li class="listitem">
                <p><b>%f.&nbsp;</b>Имя файла. Может быть представлено именем
                временного файла, который требовалось создать
                (например: для извлечения поддокумента из контейнера).</p>
              </li>
              <li class="listitem">
                <p><b>%i.&nbsp;</b>Внутренний путь для поддокументов
                контейнеров. Формат зависит от типа контейнера.
                Если параметр используется в командной строке,
                <span class="application">Recoll</span> не будет
                создавать временный файл для извлечения поддокумента,
                предполагая, что вызываемое приложение (возможно,
                сценарий) само способно справиться с этой задачей.</p>
              </li>
              <li class="listitem">
                <p><b>%M.&nbsp;</b>MIME-тип</p>
              </li>
              <li class="listitem">
                <p><b>%p.&nbsp;</b>Индекс страницы. Имеет значение только
                для подгруппы типов документов и на данный момент включает только файлы PDF,
                Postscript и DVI. Если параметр задан, то из запроса выбирается
                важный элемент поиска и %p заменяется
                на номер первой страницы, содержащей данный элемент.
                Можно использовать для того, чтобы открыть редактор на нужной странице,
                содержащей совпадение или фрагмент.</p>
              </li>
              <li class="listitem">
                <p><b>%l.&nbsp;</b>Номер строки. Имеет значение только
                для типов документов, имеющих разрывы строк.
                Главным образом, text/plain и их аналоги. При установке
                параметра в запросе выбирается важный элемент поиска и
                %l заменяется на номер первой строки, содержащей
                данный элемент.</p>
              </li>
              <li class="listitem">
                <p><b>%s.&nbsp;</b>Элемент поиска. Значение устанавливается
                только для документов с индексацией номеров страниц или строк,
                а также при использовании параметров %p или %l. Значение
                будет содержать один из совпавших элементов поиска. Позволяет
                передавать значения элемента в строку «Поиск» для обеспечения
                его подсветки, как, например, в приложении Evince.</p>
              </li>
              <li class="listitem">
                <p><b>%u.&nbsp;</b>Url-адрес.</p>
              </li>
            </ul>
          </div>
          <p>В дополнение к описанным выше предустановленным значениям, все
          строки вида <code class="literal">%(fieldname)</code>
          заменяются значениями поля с именем <code class="literal">fieldname</code>
          для данного документа, что в комбинации с настройками полей можно
          использовать для обеспечения открытия документа.</p>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.CONFIG.PTRANS" id=
                "RCL.INSTALL.CONFIG.PTRANS"></a>5.4.7.&nbsp;Файл
                <code class="filename">ptrans</code></h3>
              </div>
            </div>
          </div>
          <p>Файл <code class="filename">ptrans</code> задаёт
          варианты преобразования путей в процессе поиска. Имеет
          <a class="link" href="#RCL.SEARCH.PTRANS" title=
          "3.8.&nbsp;Path translations">множество различных применений</a>.</p>
          <p>Файл содержит раздел для любого индекса, которому необходимо
          преобразовать пути, как главного, так и дополнительного.
          Разделы названы в соответствии с именами каталогов
          индекса <span class="application">Xapian</span>. В конце путей
          не должно быть символов косой черты (все сравнения
          исключительно текстовые). Представленный ниже пример наглядно демонстрирует указанные особенности.</p>
          <pre class="programlisting">
          [/home/me/.recoll/xapiandb]
          /this/directory/moved = /to/this/place

          [/path/to/additional/xapiandb]
          /server/volume1/docdir = /net/server/volume1/docdir
          /server/volume2/docdir = /net/server/volume2/docdir
        </pre>
        </div>
        <div class="sect2">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a name=
                "RCL.INSTALL.CONFIG.EXAMPLES" id=
                "RCL.INSTALL.CONFIG.EXAMPLES"></a>5.4.8.&nbsp;Примеры
                настройки конфигурации</h3>
              </div>
            </div>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.EXAMPLES.ADDVIEW" id=
                  "RCL.INSTALL.CONFIG.EXAMPLES.ADDVIEW"></a>Добавление
                  внешнего просмотрщика для неиндексированного типа</h4>
                </div>
              </div>
            </div>
            <p>Представьте, что у вас имеется некий файл, в котором отсутствует
            индексируемое содержимое, но для него необходимо
            создать рабочую ссылку <span class=
            "guilabel">Открыть</span> в списке результатов (при
            поиске по имени файла). Имена файлов заканчиваются на <em class=
            "replaceable"><code>.blob</code></em> и открываются
            в приложении <em class=
            "replaceable"><code>blobviewer</code></em>.</p>
            <p>Для решения этой задачи в конфигурационный файл необходимо ввести
            две строки:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style=
              "list-style-type: disc;">
                <li class="listitem">
                  <p>В <code class=
                  "filename">$RECOLL_CONFDIR/mimemap</code>
                  (обычно <code class=
                  "filename">~/.recoll/mimemap</code>) нужно добавить
                  следующую строку:</p>
                  <pre class="programlisting">
            .blob = application/x-blobapp
          </pre>
                  <p>Прошу заметить, что здесь используется абсолютно
                  вымышленный MIME-тип, который с таким же успехом можно было бы назвать
                  <em class="replaceable"><code>diesel/oil</code></em>.</p>
                </li>
                <li class="listitem">
                  <p>В раздел <code class="literal">[view]</code> файла
                  <code class="filename">$RECOLL_CONFDIR/mimeview</code>
                  нужно добавить:</p>
                  <pre class="programlisting">
              application/x-blobapp = blobviewer %f
            </pre>
                  <p>Здесь предполагается, что <em class=
                  "replaceable"><code>blobviewer</code></em> будет
                  получать параметр с именем файла, в качестве которого
                  можно использовать <code class="literal">%u</code>,
                  если URL-адрес окажется более предпочтительным.</p>
                </li>
              </ul>
            </div>
            <p>Если предполагается всего лишь сменить приложение, используемое в
            <span class="application">Recoll</span> для отображения
            MIME-типа, который ему уже известен, то достаточно
            внести изменения в файл <code class="filename">mimeview</code>.
            Строки, вводимые в файле пользовательской конфигурации, переопределяют
            настройку общесистемной конфигурации, менять которую нет никакой
            необходимости. Изменения в <code class="filename">mimeview</code>
            можно вносить и с помощью графического интерфейса.</p>
          </div>
          <div class="sect3">
            <div class="titlepage">
              <div>
                <div>
                  <h4 class="title"><a name=
                  "RCL.INSTALL.CONFIG.EXAMPLES.ADDINDEX" id=
                  "RCL.INSTALL.CONFIG.EXAMPLES.ADDINDEX"></a>Добавление
                  поддержки индексирования для нового типа файлов</h4>
                </div>
              </div>
            </div>
            <p>Теперь давайте представим, что вышеупомянутые файлы <em class=
            "replaceable"><code>.blob</code></em> на самом деле
            содержат индексируемый текст, который можно извлечь
            с помощью программы в командной строке. Настроить <span class=
            "application">Recoll</span> для индексации файлов будет несложно.
            Необходимо внести вышеуказанные изменения, а также добавить
            в файл <code class="filename">mimeconf</code> (обычно <code class=
            "filename">~/.recoll/mimeconf</code>) следующие строки:</p>
            <div class="itemizedlist">
              <ul class="itemizedlist" style=
              "list-style-type: disc;">
                <li class="listitem">
                  <p>Добавьте следующую строку в раздел <code class="literal">[index]</code>,
                   (более подробная информация о сценарии индексации <em class="replaceable"><code>rclblob</code></em>
                   будет представлена позже):</p>
                  <pre class="programlisting">
application/x-blobapp = exec rclblob</pre>
                  <p>Если же файлы имеют текстовый формат и не требуют
                    специальной обработки для индексирования:</p>
                  <pre class="programlisting">
application/x-blobapp = internal text/plain</pre>
                </li>
                <li class="listitem">
                  <p>В разделе <code class="literal">[icons]</code>
                  необходимо выбрать значок для отображения
                  файлов внутри списков результатов. Обычно используются
                  значки размером 64x64 пиксела в виде файлов PNG,
                  которые находятся в <code class=
                  "filename">/usr/share/recoll/images</code>.</p>
                </li>
                <li class="listitem">
                  <p>В разделе <code class=
                  "literal">[categories]</code> необходимо добавить
                  данный MIME-тип в необходимые категории (либо
                  создать собственную). Категории можно использовать
                  для фильтрации в сложном поиске.</p>
                </li>
              </ul>
            </div>
            <p>Обработчик <em class=
            "replaceable"><code>rclblob</code></em> должен
            быть исполняемой программой или сценарием, который находится
            в каталоге <code class=
            "filename">/usr/share/recoll/filters</code>. Имя файла будет
            передано ему в качестве аргумента, после чего он должен выдать
            содержимое файла в виде текста или html в стандартный вывод.</p>
            <p>Раздел, посвещённый <a class="link" href="#RCL.PROGRAM.FILTERS"
            title=
            "4.1.&nbsp;Writing a document input handler">программированию
            фильтра</a>, содержит более подробную информацию о создании
            обработчика ввода.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
